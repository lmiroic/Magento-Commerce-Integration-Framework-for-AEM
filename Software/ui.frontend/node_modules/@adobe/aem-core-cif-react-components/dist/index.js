(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("@adobe/aem-core-cif-react-components", [], factory);
	else if(typeof exports === 'object')
		exports["@adobe/aem-core-cif-react-components"] = factory();
	else
		root["@adobe/aem-core-cif-react-components"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/dist/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 82);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = require("react");

/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = require("prop-types");

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = require("@apollo/client");

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = require("react-intl");

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = require("react-feather");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AddressForm__addressForm__root","heading":"cmp-AddressForm__addressForm__heading","body":"cmp-AddressForm__addressForm__body","enter":"cmp-AddressForm__addressForm__enter","footer":"cmp-AddressForm__addressForm__footer","button":"cmp-AddressForm__addressForm__button","textInput":"cmp-AddressForm__addressForm__textInput","city":"cmp-AddressForm__addressForm__city","firstname":"cmp-AddressForm__addressForm__firstname","lastname":"cmp-AddressForm__addressForm__lastname","postcode":"cmp-AddressForm__addressForm__postcode","region_code":"cmp-AddressForm__addressForm__region_code","telephone":"cmp-AddressForm__addressForm__telephone","address_select":"cmp-AddressForm__addressForm__address_select","email":"cmp-AddressForm__addressForm__email","street0":"cmp-AddressForm__addressForm__street0","default_shipping":"cmp-AddressForm__addressForm__default_shipping","save_in_address_book":"cmp-AddressForm__addressForm__save_in_address_book","validation":"cmp-AddressForm__addressForm__validation","error":"cmp-AddressForm__addressForm__error"};

/***/ }),
/* 6 */
/***/ (function(module, exports) {

module.exports = require("informed");

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Checkout__paymentsForm__root","heading":"cmp-Checkout__paymentsForm__heading cmp-Checkout__flow__heading","body":"cmp-Checkout__paymentsForm__body cmp-Checkout__flow__body","footer":"cmp-Checkout__paymentsForm__footer cmp-Checkout__flow__footer","button":"cmp-Checkout__paymentsForm__button","textInput":"cmp-Checkout__paymentsForm__textInput","city":"cmp-Checkout__paymentsForm__city","postcode":"cmp-Checkout__paymentsForm__postcode","region_code":"cmp-Checkout__paymentsForm__region_code","address_check":"cmp-Checkout__paymentsForm__address_check","address_select":"cmp-Checkout__paymentsForm__address_select","email":"cmp-Checkout__paymentsForm__email","braintree":"cmp-Checkout__paymentsForm__braintree","save_in_address_book":"cmp-Checkout__paymentsForm__save_in_address_book","street0":"cmp-Checkout__paymentsForm__street0","validation":"cmp-Checkout__paymentsForm__validation"};

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AddressBook__addressItem__root","defaultTag":"cmp-AddressBook__addressItem__defaultTag","name":"cmp-AddressBook__addressItem__name","street":"cmp-AddressBook__addressItem__street","cityRegion":"cmp-AddressBook__addressItem__cityRegion","country":"cmp-AddressBook__addressItem__country","actions":"cmp-AddressBook__addressItem__actions","editButton":"cmp-AddressBook__addressItem__editButton","deleteButton":"cmp-AddressBook__addressItem__deleteButton","icon":"cmp-AddressBook__addressItem__icon","label":"cmp-AddressBook__addressItem__label"};

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__product__root","image":"cmp-Minicart__product__image","name":"cmp-Minicart__product__name","quantityRow":"cmp-Minicart__product__quantityRow","quantity":"cmp-Minicart__product__quantity","quantityOperator":"cmp-Minicart__product__quantityOperator","price":"cmp-Minicart__product__price","rowTotalRow":"cmp-Minicart__product__rowTotalRow","rowTotal":"cmp-Minicart__product__rowTotal","bundleOptions":"cmp-Minicart__product__bundleOptions","bundleOptionTitle":"cmp-Minicart__product__bundleOptionTitle","bundleOptionValue":"cmp-Minicart__product__bundleOptionValue","mask":"cmp-Minicart__product__mask"};

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Dialog__dialog__root","root_open":"cmp-Dialog__dialog__root_open cmp-Dialog__dialog__root","form":"cmp-Dialog__dialog__form","mask":"cmp-Dialog__dialog__mask","dialog":"cmp-Dialog__dialog__dialog","header":"cmp-Dialog__dialog__header","headerText":"cmp-Dialog__dialog__headerText","headerButton":"cmp-Dialog__dialog__headerButton","body":"cmp-Dialog__dialog__body","contents":"cmp-Dialog__dialog__contents","buttons":"cmp-Dialog__dialog__buttons","confirmButton":"cmp-Dialog__dialog__confirmButton cmp-Button__button__root_highPriority cmp-Button__button__root cmp-components__clickable__root cmp-Button__button__filled"};

/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AccountDetails__accountDetails__root","lineItems":"cmp-AccountDetails__accountDetails__lineItems","lineItemLabel":"cmp-AccountDetails__accountDetails__lineItemLabel","editInformationButton":"cmp-AccountDetails__accountDetails__editInformationButton cmp-Button__button__root_normalPriority cmp-Button__button__root cmp-components__clickable__root","messageText":"cmp-AccountDetails__accountDetails__messageText","accountDetails":"cmp-AccountDetails__accountDetails__accountDetails","lineItemButton":"cmp-AccountDetails__accountDetails__lineItemButton"};

/***/ }),
/* 12 */
/***/ (function(module, exports) {

module.exports = require("@magento/peregrine/lib/talons/MiniCart/miniCartFragments.gql");

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__cartOptions__root","focusItem":"cmp-Minicart__cartOptions__focusItem","name":"cmp-Minicart__cartOptions__name","form":"cmp-Minicart__cartOptions__form","modal":"cmp-Minicart__cartOptions__modal","modal_active":"cmp-Minicart__cartOptions__modal_active cmp-Minicart__cartOptions__modal","options":"cmp-Minicart__cartOptions__options","quantity":"cmp-Minicart__cartOptions__quantity","quantityTitle":"cmp-Minicart__cartOptions__quantityTitle","save":"cmp-Minicart__cartOptions__save"};

/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__totalsSummary__root","subtotalLabel":"cmp-Minicart__totalsSummary__subtotalLabel","subtotalValue":"cmp-Minicart__totalsSummary__subtotalValue","totals":"cmp-Minicart__totalsSummary__totals","discounted":"cmp-Minicart__totalsSummary__discounted","totalsDiscount":"cmp-Minicart__totalsSummary__totalsDiscount"};

/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-ResetPassword__ResetPassword__root","fields":"cmp-ResetPassword__ResetPassword__fields","lead":"cmp-ResetPassword__ResetPassword__lead","submit":"cmp-ResetPassword__ResetPassword__submit","error":"cmp-ResetPassword__ResetPassword__error"};

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AccountDetails__editForm__root","field":"cmp-AccountDetails__editForm__field","email":"cmp-AccountDetails__editForm__email cmp-AccountDetails__editForm__field","passwordLabel":"cmp-AccountDetails__editForm__passwordLabel cmp-AccountDetails__editForm__field","buttons":"cmp-AccountDetails__editForm__buttons cmp-AccountDetails__editForm__field","changePasswordButtonContainer":"cmp-AccountDetails__editForm__changePasswordButtonContainer","changePasswordButton":"cmp-AccountDetails__editForm__changePasswordButton","firstname":"cmp-AccountDetails__editForm__firstname","lastname":"cmp-AccountDetails__editForm__lastname","password":"cmp-AccountDetails__editForm__password","newPassword":"cmp-AccountDetails__editForm__newPassword"};

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Checkout__shippingForm__root","heading":"cmp-Checkout__shippingForm__heading cmp-Checkout__flow__heading","body":"cmp-Checkout__shippingForm__body cmp-Checkout__flow__body","footer":"cmp-Checkout__shippingForm__footer cmp-Checkout__flow__footer","button":"cmp-Checkout__shippingForm__button","shippingMethod":"cmp-Checkout__shippingForm__shippingMethod"};

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AuthBar__userChip__root","content":"cmp-AuthBar__userChip__content","avatar":"cmp-AuthBar__userChip__avatar","user":"cmp-AuthBar__userChip__user","fullName":"cmp-AuthBar__userChip__fullName","email":"cmp-AuthBar__userChip__email","icon":"cmp-AuthBar__userChip__icon"};

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-SignIn__signIn__root","forgotPassword":"cmp-SignIn__signIn__forgotPassword","form":"cmp-SignIn__signIn__form","formTitle":"cmp-SignIn__signIn__formTitle","modal":"cmp-SignIn__signIn__modal","modal_active":"cmp-SignIn__signIn__modal_active cmp-SignIn__signIn__modal","createAccountButton":"cmp-SignIn__signIn__createAccountButton","forgotPasswordButton":"cmp-SignIn__signIn__forgotPasswordButton","signInButton":"cmp-SignIn__signIn__signInButton","signInError":"cmp-SignIn__signIn__signInError"};

/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-MyAccount__myAccount__root","user":"cmp-MyAccount__myAccount__user","subtitle":"cmp-MyAccount__myAccount__subtitle"};

/***/ }),
/* 21 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-CreateAccount__createAccountSuccess__root","body":"cmp-CreateAccount__createAccountSuccess__body","header":"cmp-CreateAccount__createAccountSuccess__header","textBlock":"cmp-CreateAccount__createAccountSuccess__textBlock","signin":"cmp-CreateAccount__createAccountSuccess__signin","actions":"cmp-CreateAccount__createAccountSuccess__actions"};

/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-ChangePassword__changePassword__root","message":"cmp-ChangePassword__changePassword__message","actions":"cmp-ChangePassword__changePassword__actions","error":"cmp-ChangePassword__changePassword__error cmp-ChangePassword__changePassword__message","lead":"cmp-ChangePassword__changePassword__lead cmp-ChangePassword__changePassword__message"};

/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Checkout__section__root","content":"cmp-Checkout__section__content","label":"cmp-Checkout__section__label","summary":"cmp-Checkout__section__summary","icon":"cmp-Checkout__section__icon"};

/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Checkout__receipt__root","body":"cmp-Checkout__receipt__body","footer":"cmp-Checkout__receipt__footer","textBlock":"cmp-Checkout__receipt__textBlock","orderId":"cmp-Checkout__receipt__orderId","header":"cmp-Checkout__receipt__header","continue":"cmp-Checkout__receipt__continue"};

/***/ }),
/* 25 */
/***/ (function(module, exports) {

module.exports = require("@magento/peregrine/lib/store/actions/cart/asyncActions");

/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-LoadingIndicator__indicator__root","global":"cmp-LoadingIndicator__indicator__global cmp-LoadingIndicator__indicator__root","message":"cmp-LoadingIndicator__indicator__message","indicator":"cmp-LoadingIndicator__indicator__indicator","pulse":"cmp-LoadingIndicator__indicator__pulse"};

/***/ }),
/* 27 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__kebab__root","dropdown":"cmp-Minicart__kebab__dropdown","dropdown_active":"cmp-Minicart__kebab__dropdown_active cmp-Minicart__kebab__dropdown","kebab":"cmp-Minicart__kebab__kebab"};

/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Field__fieldIcons__root","input":"cmp-Field__fieldIcons__input","before":"cmp-Field__fieldIcons__before","after":"cmp-Field__fieldIcons__after"};

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Checkbox__checkbox__root","icon":"cmp-Checkbox__checkbox__icon","input":"cmp-Checkbox__checkbox__input","label":"cmp-Checkbox__checkbox__label"};

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AddressBook__addAddressButton__root","icon":"cmp-AddressBook__addAddressButton__icon","label":"cmp-AddressBook__addAddressButton__label"};

/***/ }),
/* 31 */
/***/ (function(module, exports) {

module.exports = require("@magento/peregrine/lib/util/simplePersistence");

/***/ }),
/* 32 */
/***/ (function(module, exports) {

module.exports = require("@magento/peregrine/lib/util/shallowMerge");

/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__emptyMiniCartBody__root","emptyTitle":"cmp-Minicart__emptyMiniCartBody__emptyTitle","continue":"cmp-Minicart__emptyMiniCartBody__continue"};

/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Field__field__root","label":"cmp-Field__field__label","input":"cmp-Field__field__input","requiredSymbol":"cmp-Field__field__requiredSymbol"};

/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__discountList__root","item":"cmp-Minicart__discountList__item","price":"cmp-Minicart__discountList__price"};

/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AccountContainer__accountDropdown__root","root_open":"cmp-AccountContainer__accountDropdown__root_open cmp-AccountContainer__accountDropdown__root","mask_active":"cmp-AccountContainer__accountDropdown__mask_active cmp-Mask__mask__root_active cmp-Mask__mask__root"};

/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AddressBook__addressDeleteModal__root"};

/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"mask":"cmp-AddressBook__addressFormContainer__mask cmp-Mask__mask__root","mask_active":"cmp-AddressBook__addressFormContainer__mask_active cmp-AddressBook__addressFormContainer__mask cmp-Mask__mask__root cmp-Mask__mask__root_active cmp-Mask__mask__root","container":"cmp-AddressBook__addressFormContainer__container"};

/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AddressBook__addressBook__root","title":"cmp-AddressBook__addressBook__title"};

/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__header__root","title":"cmp-Minicart__header__title"};

/***/ }),
/* 41 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"menuItem":"cmp-Minicart__section__menuItem","text":"cmp-Minicart__section__text"};

/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Button__button__root cmp-components__clickable__root","filled":"cmp-Button__button__filled","content":"cmp-Button__button__content","root_normalPriority":"cmp-Button__button__root_normalPriority cmp-Button__button__root cmp-components__clickable__root","root_highPriority":"cmp-Button__button__root_highPriority cmp-Button__button__root cmp-components__clickable__root cmp-Button__button__filled"};

/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Field__message__root","root_error":"cmp-Field__message__root_error cmp-Field__message__root"};

/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__error__root","action":"cmp-Minicart__error__action"};

/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__couponForm__root","error":"cmp-Minicart__couponForm__error"};

/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__couponItem__root","couponName":"cmp-Minicart__couponItem__couponName"};

/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Checkout__form__root","body":"cmp-Checkout__form__body cmp-Checkout__flow__body","footer":"cmp-Checkout__form__footer cmp-Checkout__flow__footer","informationPrompt":"cmp-Checkout__form__informationPrompt","paymentDisplayPrimary":"cmp-Checkout__form__paymentDisplayPrimary","paymentDisplaySecondary":"cmp-Checkout__form__paymentDisplaySecondary","enter":"cmp-Checkout__form__enter"};

/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"braintree":"cmp-paymentProviders__paymentProvider__braintree cmp-Checkout__paymentsForm__braintree","error_message":"cmp-paymentProviders__paymentProvider__error_message cmp-Field__message__root_error cmp-Field__message__root"};

/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__footer__root","root_open":"cmp-Minicart__footer__root_open cmp-Minicart__footer__root","placeholderButton":"cmp-Minicart__footer__placeholderButton"};

/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__minicart__root","root_open":"cmp-Minicart__minicart__root_open cmp-Minicart__minicart__root"};

/***/ }),
/* 51 */
/***/ (function(module, exports) {

module.exports = require("graphql");

/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-ForgotPassword__forgotPassword__root","instructions":"cmp-ForgotPassword__forgotPassword__instructions"};

/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"enter":"cmp-AuthBar__container__enter","exit":"cmp-AuthBar__container__exit","hidden":"cmp-AuthBar__container__hidden","visible":"cmp-AuthBar__container__visible","modal":"cmp-AuthBar__container__modal cmp-AuthBar__container__exit cmp-AuthBar__container__hidden","modal_open":"cmp-AuthBar__container__modal_open cmp-AuthBar__container__modal cmp-AuthBar__container__exit cmp-AuthBar__container__hidden cmp-AuthBar__container__enter cmp-AuthBar__container__visible"};

/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AccountContainer__accountTrigger__root cmp-components__clickable__root","label":"cmp-AccountContainer__accountTrigger__label"};

/***/ }),
/* 55 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AddressBook__addressItemsContainer__root"};

/***/ }),
/* 56 */
/***/ (function(module, exports) {

module.exports = require("@magento/peregrine/lib/Apollo/policies");

/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Mask__mask__root","root_active":"cmp-Mask__mask__root_active cmp-Mask__mask__root"};

/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Trigger__trigger__root cmp-components__clickable__root"};

/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__body__root"};

/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Icon__icon__root"};

/***/ }),
/* 61 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Minicart__productList__root"};

/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"wrapper":"cmp-Select__select__wrapper","input":"cmp-Select__select__input cmp-Field__field__input"};

/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Checkout__cart__root cmp-Checkout__flow__footer"};

/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AddressForm__addressSelect__root"};

/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"input":"cmp-TextInput__textInput__input cmp-Field__field__input"};

/***/ }),
/* 66 */
/***/ (function(module, exports) {

module.exports = require("braintree-web-drop-in");

/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-Checkout__flow__root","heading":"cmp-Checkout__flow__heading","body":"cmp-Checkout__flow__body","enter":"cmp-Checkout__flow__enter","footer":"cmp-Checkout__flow__footer"};

/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AuthBar__authBar__root"};

/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-MyAccount__accountLink__root","content":"cmp-MyAccount__accountLink__content","icon":"cmp-MyAccount__accountLink__icon","text":"cmp-MyAccount__accountLink__text","root_normalPriority":"cmp-MyAccount__accountLink__root_normalPriority cmp-MyAccount__accountLink__root"};

/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-ForgotPassword__forgotPasswordForm__root","buttonContainer":"cmp-ForgotPassword__forgotPasswordForm__buttonContainer"};

/***/ }),
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-ForgotPassword__formSubmissionSuccessful__root","text":"cmp-ForgotPassword__formSubmissionSuccessful__text","buttonContainer":"cmp-ForgotPassword__formSubmissionSuccessful__buttonContainer"};

/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-CreateAccount__createAccount__root","message":"cmp-CreateAccount__createAccount__message","actions":"cmp-CreateAccount__createAccount__actions","error":"cmp-CreateAccount__createAccount__error cmp-CreateAccount__createAccount__message","lead":"cmp-CreateAccount__createAccount__lead cmp-CreateAccount__createAccount__message","subscribe":"cmp-CreateAccount__createAccount__subscribe"};

/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-AuthBar__myAccountPanel__root"};

/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-CartTrigger__cartCounter__root"};

/***/ }),
/* 75 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-CartTrigger__cartTrigger__root cmp-components__clickable__root"};

/***/ }),
/* 76 */
/***/ (function(module, exports) {

module.exports = require("react-dom");

/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"errorMessage":"cmp-FormError__formError__errorMessage"};

/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"root":"cmp-LinkButton__linkButton__root cmp-components__clickable__root"};

/***/ }),
/* 79 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin
module.exports = {"passwordButton":"cmp-Password__password__passwordButton cmp-Button__button__root cmp-components__clickable__root","root":"cmp-Password__password__root"};

/***/ }),
/* 80 */
/***/ (function(module, exports) {

module.exports = require("@magento/peregrine/lib/context/cart");

/***/ }),
/* 81 */
/***/ (function(module, exports) {

module.exports = require("@magento/peregrine/lib/talons/Wishlist/AddToListButton/addToListButton.gql");

/***/ }),
/* 82 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, "CommerceApp", function() { return /* reexport */ app; });
__webpack_require__.d(__webpack_exports__, "AuthBar", function() { return /* reexport */ AuthBar_container; });
__webpack_require__.d(__webpack_exports__, "Cart", function() { return /* reexport */ Minicart_minicart; });
__webpack_require__.d(__webpack_exports__, "CartTrigger", function() { return /* reexport */ CartTrigger_cartTrigger; });
__webpack_require__.d(__webpack_exports__, "AccountContainer", function() { return /* reexport */ accountContainer; });
__webpack_require__.d(__webpack_exports__, "AddressBook", function() { return /* reexport */ AddressBook_addressBook; });
__webpack_require__.d(__webpack_exports__, "BundleProductOptions", function() { return /* reexport */ bundleProductOptions; });
__webpack_require__.d(__webpack_exports__, "GiftCartOptions", function() { return /* reexport */ giftCardOptions; });
__webpack_require__.d(__webpack_exports__, "useGiftCartOptions", function() { return /* reexport */ GiftCardOptions_useGiftCardOptions; });
__webpack_require__.d(__webpack_exports__, "Portal", function() { return /* reexport */ Portal_Portal; });
__webpack_require__.d(__webpack_exports__, "PortalPlacer", function() { return /* reexport */ PortalPlacer_PortalPlacer; });
__webpack_require__.d(__webpack_exports__, "ResetPassword", function() { return /* reexport */ components_ResetPassword_ResetPassword; });
__webpack_require__.d(__webpack_exports__, "Price", function() { return /* reexport */ Price_price; });
__webpack_require__.d(__webpack_exports__, "Trigger", function() { return /* reexport */ Trigger_trigger; });
__webpack_require__.d(__webpack_exports__, "LoadingIndicator", function() { return /* reexport */ LoadingIndicator_indicator; });
__webpack_require__.d(__webpack_exports__, "ConfigContextProvider", function() { return /* reexport */ context_ConfigContext; });
__webpack_require__.d(__webpack_exports__, "useConfigContext", function() { return /* reexport */ useConfigContext; });
__webpack_require__.d(__webpack_exports__, "UserContextProvider", function() { return /* reexport */ context_UserContext; });
__webpack_require__.d(__webpack_exports__, "useUserContext", function() { return /* reexport */ useUserContext; });
__webpack_require__.d(__webpack_exports__, "CheckoutProvider", function() { return /* reexport */ CheckoutProvider; });
__webpack_require__.d(__webpack_exports__, "CartProvider", function() { return /* reexport */ CartProvider; });
__webpack_require__.d(__webpack_exports__, "CartInitializer", function() { return /* reexport */ cartInitializer; });
__webpack_require__.d(__webpack_exports__, "useCartState", function() { return /* reexport */ useCartState; });
__webpack_require__.d(__webpack_exports__, "AccountDetails", function() { return /* reexport */ AccountDetails_accountDetails; });
__webpack_require__.d(__webpack_exports__, "AccountLink", function() { return /* reexport */ MyAccount_accountLink; });
__webpack_require__.d(__webpack_exports__, "MyAccount", function() { return /* reexport */ MyAccount_myAccount; });
__webpack_require__.d(__webpack_exports__, "SignOutLink", function() { return /* reexport */ signOutLink; });
__webpack_require__.d(__webpack_exports__, "AccountInfoLink", function() { return /* reexport */ accountInfoLink; });
__webpack_require__.d(__webpack_exports__, "AddressBookLink", function() { return /* reexport */ addressBookLink; });
__webpack_require__.d(__webpack_exports__, "ChangePasswordLink", function() { return /* reexport */ changePasswordLink; });
__webpack_require__.d(__webpack_exports__, "graphqlAuthLink", function() { return /* reexport */ authLink; });
__webpack_require__.d(__webpack_exports__, "useAwaitQuery", function() { return /* reexport */ useAwaitQuery; });
__webpack_require__.d(__webpack_exports__, "useStorefrontEvents", function() { return /* reexport */ useStorefrontEvents; });
__webpack_require__.d(__webpack_exports__, "usePageType", function() { return /* reexport */ usePageType; });
__webpack_require__.d(__webpack_exports__, "createProductPageUrl", function() { return /* reexport */ createProductPageUrl; });
__webpack_require__.d(__webpack_exports__, "useDataLayerEvents", function() { return /* reexport */ utils_useDataLayerEvents; });
__webpack_require__.d(__webpack_exports__, "useAddToCart", function() { return /* reexport */ Cart_useAddToCart; });
__webpack_require__.d(__webpack_exports__, "useAddToCartEvent", function() { return /* reexport */ Cart_useAddToCartEvent; });
__webpack_require__.d(__webpack_exports__, "useAddToWishlistEvent", function() { return /* reexport */ Wishlist_useAddToWishlistEvent; });
__webpack_require__.d(__webpack_exports__, "useCustomUrlEvent", function() { return /* reexport */ utils_useCustomUrlEvent; });
__webpack_require__.d(__webpack_exports__, "useReferrerEvent", function() { return /* reexport */ utils_useReferrerEvent; });
__webpack_require__.d(__webpack_exports__, "usePageEvent", function() { return /* reexport */ utils_usePageEvent; });
__webpack_require__.d(__webpack_exports__, "dataLayerUtils", function() { return /* reexport */ dataLayerUtils; });

// EXTERNAL MODULE: external "react"
var external_react_ = __webpack_require__(0);
var external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);

// EXTERNAL MODULE: external "@apollo/client"
var client_ = __webpack_require__(2);

// EXTERNAL MODULE: external "@magento/peregrine/lib/Apollo/policies"
var policies_ = __webpack_require__(56);
var policies_default = /*#__PURE__*/__webpack_require__.n(policies_);

// CONCATENATED MODULE: ./src/queries/mutation_create_guest_cart.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_create_guest_cart_graphql = (client_["gql"]`
    mutation {
        createEmptyCart
    }
`);
// EXTERNAL MODULE: external "@magento/peregrine/lib/talons/MiniCart/miniCartFragments.gql"
var miniCartFragments_gql_ = __webpack_require__(12);

// CONCATENATED MODULE: ./src/queries/mutation_add_to_cart.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


/* harmony default export */ var mutation_add_to_cart_graphql = (client_["gql"]`
    mutation addSimpleProductToCart($cartId: String!, $cartItems: [SimpleProductCartItemInput]!) {
        addSimpleProductsToCart(input: { cart_id: $cartId, cart_items: $cartItems }) {
            cart {
                id
                items {
                    uid
                    quantity
                    product {
                        name
                        thumbnail {
                            url
                        }
                    }
                }
                ...MiniCartFragment
            }
        }
    }
    ${miniCartFragments_gql_["MiniCartFragment"]}
`);
// CONCATENATED MODULE: ./src/queries/query_cart_details.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var query_cart_details_graphql = (client_["gql"]`
    query cartDetails($cartId: String!) {
        cart(cart_id: $cartId) {
            id
            is_virtual
            prices {
                discounts {
                    amount {
                        currency
                        value
                    }
                    label
                }
                applied_taxes {
                    amount {
                        currency
                        value
                    }
                    label
                }
                subtotal_with_discount_excluding_tax {
                    currency
                    value
                }
                subtotal_excluding_tax {
                    currency
                    value
                }
                subtotal_including_tax {
                    currency
                    value
                }
                grand_total {
                    currency
                    value
                }
            }
            email
            shipping_addresses {
                city
                company
                country {
                    code
                }
                firstname
                lastname
                postcode
                region {
                    code
                }
                street
                telephone
                available_shipping_methods {
                    method_code
                    method_title
                    carrier_code
                    carrier_title
                }
                selected_shipping_method {
                    carrier_code
                    carrier_title
                    method_code
                    method_title
                }
            }
            available_payment_methods {
                code
                title
            }
            selected_payment_method {
                code
                title
            }
            billing_address {
                city
                country {
                    code
                }
                lastname
                firstname
                region {
                    code
                }
                street
                postcode
                telephone
            }
            applied_coupon {
                code
            }
            total_quantity
            items {
                __typename
                uid
                quantity
                prices {
                    price {
                        currency
                        value
                    }
                    row_total {
                        currency
                        value
                    }
                }
                product {
                    name
                    sku
                    thumbnail {
                        url
                    }
                }
                ... on BundleCartItem {
                    bundle_options {
                        id
                        label
                        type
                        values {
                            id
                            label
                            price
                            quantity
                        }
                    }
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/queries/mutation_add_virtual_to_cart.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


/* harmony default export */ var mutation_add_virtual_to_cart_graphql = (client_["gql"]`
    mutation($cartId: String!, $cartItems: [VirtualProductCartItemInput]!) {
        addVirtualProductsToCart(input: { cart_id: $cartId, cart_items: $cartItems }) {
            cart {
                id
                items {
                    uid
                    quantity
                    product {
                        name
                        thumbnail {
                            url
                        }
                    }
                }
                ...MiniCartFragment
            }
        }
    }
    ${miniCartFragments_gql_["MiniCartFragment"]}
`);
// CONCATENATED MODULE: ./src/queries/mutation_add_simple_and_virtual_to_cart.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


/* harmony default export */ var mutation_add_simple_and_virtual_to_cart_graphql = (client_["gql"]`
    mutation(
        $cartId: String!
        $virtualCartItems: [VirtualProductCartItemInput]!
        $simpleCartItems: [SimpleProductCartItemInput]!
    ) {
        addSimpleProductsToCart(input: { cart_id: $cartId, cart_items: $simpleCartItems }) {
            cart {
                id
                ...MiniCartFragment
            }
        }
        addVirtualProductsToCart(input: { cart_id: $cartId, cart_items: $virtualCartItems }) {
            cart {
                id
                ...MiniCartFragment
            }
        }
    }
    ${miniCartFragments_gql_["MiniCartFragment"]}
`);
// CONCATENATED MODULE: ./src/queries/mutation_add_bundle_to_cart.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


/* harmony default export */ var mutation_add_bundle_to_cart_graphql = (client_["gql"]`
    mutation addBundleProductToCart($cartId: String!, $cartItems: [BundleProductCartItemInput]!) {
        addBundleProductsToCart(input: { cart_id: $cartId, cart_items: $cartItems }) {
            cart {
                id
                ...MiniCartFragment
            }
        }
    }
    ${miniCartFragments_gql_["MiniCartFragment"]}
`);
// EXTERNAL MODULE: external "prop-types"
var external_prop_types_ = __webpack_require__(1);
var external_prop_types_default = /*#__PURE__*/__webpack_require__.n(external_prop_types_);

// EXTERNAL MODULE: ./src/components/Mask/mask.css
var mask = __webpack_require__(57);
var mask_default = /*#__PURE__*/__webpack_require__.n(mask);

// CONCATENATED MODULE: ./src/utils/mergeClasses.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
/* harmony default export */ var mergeClasses = ((...args) => Object.assign({}, ...args));
// CONCATENATED MODULE: ./src/components/Mask/mask.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Mask = ({
  onClickHandler,
  isOpen,
  customClasses
}) => {
  const classes = mergeClasses(mask_default.a, customClasses);
  const className = isOpen ? classes.root_active : classes.root;
  return /*#__PURE__*/external_react_default.a.createElement("button", {
    "data-role": "mask",
    className: className,
    onClick: onClickHandler
  });
};

Mask.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"],
    root_active: external_prop_types_["string"]
  }),
  onClickHandler: external_prop_types_["func"].isRequired,
  isOpen: external_prop_types_["bool"],
  customClasses: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"],
    root_active: external_prop_types_["string"]
  })
};
/* harmony default export */ var Mask_mask = (Mask);
// CONCATENATED MODULE: ./src/components/Mask/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: external "react-feather"
var external_react_feather_ = __webpack_require__(4);

// EXTERNAL MODULE: external "react-intl"
var external_react_intl_ = __webpack_require__(3);

// EXTERNAL MODULE: ./src/components/Minicart/header.css
var header = __webpack_require__(40);
var header_default = /*#__PURE__*/__webpack_require__.n(header);

// CONCATENATED MODULE: ./src/utils/cookieUtils.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
const checkCookie = cookieName => {
  return document.cookie.split(';').filter(item => item.trim().startsWith(`${cookieName}=`)).length > 0;
};
const cookieValue = cookieName => {
  let b = document.cookie.match(`(^|[^;]+)\\s*${cookieName}\\s*=\\s*([^;]+)`);
  return b ? b.pop() : '';
};
// CONCATENATED MODULE: ./src/utils/dataLayerUtils.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
let dataLayerEnabled = null;
let dataLayer = null;
const isDataLayerEnabled = () => {
  if (dataLayerEnabled === null) {
    dataLayerEnabled = document.body.hasAttribute('data-cmp-data-layer-enabled');
  }

  return dataLayerEnabled;
};

const getDataLayer = () => {
  if (dataLayer === null) {
    dataLayer = isDataLayerEnabled() ? window.adobeDataLayer = window.adobeDataLayer || [] : undefined;
  }

  return dataLayer;
};

const generateDataLayerId = async (prefix, idData, separator = '-') => {
  const msgUint8 = new TextEncoder().encode(idData); // encode as (utf-8) Uint8Array

  const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8); // hash the message

  const hashArray = Array.from(new Uint8Array(hashBuffer)); // convert buffer to byte array

  const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join(''); // convert bytes to hex string

  return prefix + separator + hashHex.substring(0, 10);
}; // https://github.com/adobe/adobe-client-data-layer/wiki#push

const pushData = data => {
  if (isDataLayerEnabled()) {
    getDataLayer().push(data);
  }
}; // https://github.com/adobe/adobe-client-data-layer/wiki#push

const pushEvent = (eventName, eventInfo, extraData) => {
  if (isDataLayerEnabled()) {
    getDataLayer().push({
      event: eventName,
      eventInfo: eventInfo,
      ...extraData
    });
  }
}; // https://github.com/adobe/adobe-client-data-layer/wiki#getstate

const getState = reference => {
  if (isDataLayerEnabled()) {
    return getDataLayer().getState(reference);
  }

  return null;
}; // https://github.com/adobe/adobe-client-data-layer/wiki#addeventlistener

const addEventListener = (eventName, handler) => {
  if (isDataLayerEnabled()) {
    getDataLayer().addEventListener(eventName, handler);
  }
}; // https://github.com/adobe/adobe-client-data-layer/wiki#removeeventlistener

const removeEventListener = (eventName, handler) => {
  if (isDataLayerEnabled()) {
    getDataLayer().removeEventListener(eventName, handler);
  }
};
/**
 * Converts all keys of a given GraphQL response from kebab-case or snake_case into camelCase.
 */

const transformGraphqlResponse = o => {
  const result = {};
  Object.entries(o).forEach(([key, value]) => {
    if (key === '__typename') {
      return;
    }

    if (Array.isArray(value)) {
      result[toCamel(key)] = value.map(item => transformGraphqlResponse(item));
    } else if (typeof value === 'object' && value !== null) {
      result[toCamel(key)] = transformGraphqlResponse(value);
    } else {
      result[toCamel(key)] = value;
    }
  });
  return result;
};

const toCamel = s => s.replace(/([-_][a-z])/gi, group => group.toUpperCase().replace('-', '').replace('_', ''));
/**
 * Remove fields which are not required by MSE SDK and add fields which are unavailable in GraphQL.
 */


const transformCart = cart => {
  let newCart = {};

  try {
    const {
      id,
      prices,
      totalQuantity
    } = cart;
    const {
      subtotalExcludingTax,
      subtotalIncludingTax
    } = prices || {};
    const items = cart.items ? cart.items.map(item => {
      const {
        price
      } = item.prices;
      const {
        value,
        currency
      } = price;
      return {
        prices: {
          price
        },
        canApplyMsrp: false,
        id: item.uid,
        formattedPrice: `${value} ${currency}`,
        quantity: item.quantity,
        product: {
          productId: 0,
          name: item.product.name,
          sku: item.product.sku
        }
      };
    }) : [];
    newCart = {
      id,
      items,
      prices: {
        subtotalExcludingTax,
        subtotalIncludingTax
      },
      totalQuantity
    };
  } catch (e) {
    console.error(e);
  }

  return newCart;
};

/* harmony default export */ var dataLayerUtils = ({
  isEnabled: isDataLayerEnabled,
  getState,
  pushEvent,
  pushData,
  generateId: generateDataLayerId
});
// CONCATENATED MODULE: ./src/queries/query_countries.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var query_countries_graphql = (client_["gql"]`
    query {
        countries {
            id
            full_name_locale
            available_regions {
                id
                name
                code
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/utils/hooks.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





const useEventListener = (target, type, listener, ...rest) => {
  Object(external_react_["useEffect"])(() => {
    target.addEventListener(type, listener, ...rest); // return a callback, which is called on unmount

    return () => {
      target.removeEventListener(type, listener, ...rest);
    };
  }, [listener, rest, target, type]);
};
const useCookieValue = cookieName => {
  if (!cookieName || cookieName.length === 0) {
    return '';
  }

  let value = checkCookie(cookieName) ? cookieValue(cookieName) : '';

  const setCookieValue = (value, age) => {
    const cookieSettings = `path=/; domain=${window.location.hostname};Max-Age=${age !== undefined ? age : 3600}`;
    document.cookie = `${cookieName}=${value};${cookieSettings}`;
  };

  return [value, setCookieValue];
};
const useCountries = () => {
  const {
    data,
    error
  } = Object(client_["useQuery"])(query_countries_graphql);

  if (error || !data || !data.countries) {
    return {
      error,
      countries: []
    };
  }

  return {
    countries: data.countries
  };
};
/**
 * This hook is taken from the Peregrine library.
 * We don't use it because upgrading to the peregrine library that exports it would mean bringing in some dependencies we don't need (i.e. Redux)
 *
 * @param {DocumentNode} query - parsed GraphQL operation description
 *
 * @returns {Function} callback that runs the query and returns a Promise
 */

const useAwaitQuery = query => {
  const apolloClient = Object(client_["useApolloClient"])();
  return Object(external_react_["useCallback"])(options => {
    return apolloClient.query({ ...options,
      query
    });
  }, [apolloClient, query]);
};
/**
 * This hook makes the query parameters of the URL available.
 */

const useQueryParams = () => {
  // Better to use useLocation from react router here, but this doesn't work because of dependency mess up.
  return new URLSearchParams(window.location.search);
};
/**
 * This hook provides access to the Magento Storefront Events SDK if enabled and available.
 */

const useStorefrontEvents = () => {
  if (isDataLayerEnabled && window.magentoStorefrontEvents) {
    return window.magentoStorefrontEvents;
  }

  return false;
};
const usePageType = () => {
  const PageTypes = {
    // Pages with landing-page template or pages that match the store root URL
    // as defined in the store config.
    CMS: 'CMS',
    // Pages with category component or category-page template
    CATEGORY: 'Category',
    // Pages with product component or product-page template
    PRODUCT: 'Product',
    // Pages with cart component
    CART: 'Cart',
    // Pages with checkout component
    CHECKOUT: 'Checkout',
    // Any other pages
    PAGE_BUILDER: 'PageBuilder'
  }; // Detect homepage, either by template name or by URL

  let template = document.querySelector('meta[name="template"]');

  if (template) {
    template = template.getAttribute('content');
  }

  let canonicalUrl = document.querySelector('link[rel="canonical"]');

  if (canonicalUrl) {
    canonicalUrl = canonicalUrl.getAttribute('href');
  }

  let storeRootUrl = null;

  try {
    let storeConfig = JSON.parse(document.querySelector('meta[name="store-config"]').getAttribute('content'));
    storeRootUrl = storeConfig.storeRootUrl;
  } catch (err) {// Could not parse store config, ignore for now
  }

  if (template == 'landing-page' || canonicalUrl && storeRootUrl && canonicalUrl.endsWith(storeRootUrl)) {
    return PageTypes.CMS;
  }

  if (document.querySelector('[data-cif-product-context]') || template == 'product-page') {
    return PageTypes.PRODUCT;
  }

  if (document.querySelector('[data-cif-category-context]') || template == 'category-page') {
    return PageTypes.CATEGORY;
  }

  if (document.querySelector('.cartcontainer__root')) {
    return PageTypes.CART;
  }

  if (document.querySelector('.checkoutpage__root')) {
    return PageTypes.CHECKOUT;
  }

  return PageTypes.PAGE_BUILDER;
};
// CONCATENATED MODULE: ./src/components/Minicart/cartContext.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const cartContext_initialState = {
  isOpen: false,
  isRegistered: false,
  isEditing: false,
  isLoading: false,
  editItem: {},
  cartId: null,
  cart: null,
  errorMessage: null,
  couponError: null
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const reducerFactory = (setCartCookie, mse) => {
  return (state, action) => {
    switch (action.type) {
      case 'close':
        return { ...state,
          isOpen: false
        };

      case 'open':
        return { ...state,
          isOpen: true
        };

      case 'beginLoading':
        return { ...state,
          isLoading: true
        };

      case 'endLoading':
        return { ...state,
          isLoading: false
        };

      case 'beginEditing':
        return { ...state,
          isEditing: true,
          editItem: action.item
        };

      case 'endEditing':
        return { ...state,
          isEditing: false,
          editItem: {}
        };

      case 'cartId':
        return { ...state,
          cartId: action.cartId
        };

      case 'reset':
        setCartCookie('', 0);
        return { ...state,
          cartId: null,
          errorMessage: null,
          couponError: null,
          cart: null
        };

      case 'cart':
        {
          mse && mse.context.setShoppingCart(transformCart(transformGraphqlResponse(action.cart)));
          return { ...state,
            cart: action.cart,
            isLoading: false,
            couponError: !action.cart.applied_coupon ? state.couponError : null
          };
        }

      case 'register':
        {
          return { ...state,
            isRegistered: true
          };
        }

      case 'error':
        console.error(action.error);
        return { ...state,
          errorMessage: action.error
        };

      case 'discardError':
        return { ...state,
          errorMessage: null
        };

      case 'couponError':
        return { ...state,
          couponError: action.error
        };

      default:
        return state;
    }
  };
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CartContext = /*#__PURE__*/Object(external_react_["createContext"])();
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CartProvider = props => {
  const factory = props.reducerFactory || reducerFactory;
  const state = props.initialState || cartContext_initialState;
  const mse = useStorefrontEvents();
  const [, setCartCookie] = useCookieValue('cif.cart');
  const contextValue = Object(external_react_["useReducer"])(factory(setCartCookie, mse), state);
  return /*#__PURE__*/external_react_default.a.createElement(CartContext.Provider, {
    value: contextValue
  }, props.children);
};
CartProvider.propTypes = {
  reducerFactory: external_prop_types_["func"],
  initialState: external_prop_types_["object"]
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const useCartState = () => Object(external_react_["useContext"])(CartContext);
// CONCATENATED MODULE: ./src/components/Minicart/header.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Header = () => {
  const [, dispatch] = useCartState();
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: header_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: header_default.a.title
  }, intl.formatMessage({
    id: "cart:shopping-cart",
    defaultMessage: [{
      "type": 0,
      "value": "Shopping Cart"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement("button", {
    onClick: () => {
      dispatch({
        type: 'close'
      });
    }
  }, /*#__PURE__*/external_react_default.a.createElement(external_react_feather_["X"], null)));
};

/* harmony default export */ var Minicart_header = (Header);
// EXTERNAL MODULE: ./src/components/LoadingIndicator/indicator.css
var indicator = __webpack_require__(26);
var indicator_default = /*#__PURE__*/__webpack_require__.n(indicator);

// CONCATENATED MODULE: ./src/components/LoadingIndicator/indicator.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




const LoadingIndicator = props => {
  const className = props.global ? indicator_default.a.global : indicator_default.a.root;
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: className
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: `${indicator_default.a.indicator} loader-img`
  }), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: indicator_default.a.message
  }, props.children));
};

LoadingIndicator.propTypes = {
  global: external_prop_types_["bool"],
  children: external_prop_types_["node"]
};
/* harmony default export */ var LoadingIndicator_indicator = (LoadingIndicator);
// CONCATENATED MODULE: ./src/components/LoadingIndicator/static.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


const staticIndicator = /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, {
  global: true
}, 'Fetching Data...');
/* harmony default export */ var LoadingIndicator_static = (staticIndicator);
// CONCATENATED MODULE: ./src/components/LoadingIndicator/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


// EXTERNAL MODULE: ./src/components/Trigger/trigger.css
var trigger = __webpack_require__(58);
var trigger_default = /*#__PURE__*/__webpack_require__.n(trigger);

// CONCATENATED MODULE: ./src/components/Trigger/trigger.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Trigger = props => {
  const {
    action,
    children
  } = props;
  return /*#__PURE__*/external_react_default.a.createElement("button", {
    className: trigger_default.a.root,
    type: "button",
    onClick: action
  }, children);
};

Trigger.propTypes = {
  action: external_prop_types_["func"].isRequired,
  children: external_prop_types_["node"]
};
/* harmony default export */ var Trigger_trigger = (Trigger);
// CONCATENATED MODULE: ./src/components/Trigger/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/Minicart/emptyMiniCartBody.css
var emptyMiniCartBody = __webpack_require__(33);
var emptyMiniCartBody_default = /*#__PURE__*/__webpack_require__.n(emptyMiniCartBody);

// CONCATENATED MODULE: ./src/components/Minicart/emptyMinicartBody.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const EmptyMinicartBody = () => {
  const [, dispatch] = useCartState();
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: emptyMiniCartBody_default.a.root,
    "data-testid": "empty-minicart"
  }, /*#__PURE__*/external_react_default.a.createElement("h3", {
    className: emptyMiniCartBody_default.a.emptyTitle
  }, intl.formatMessage({
    id: "cart:no-items",
    defaultMessage: [{
      "type": 0,
      "value": "There are no items in your shopping cart"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement(Trigger_trigger, {
    action: () => {
      dispatch({
        type: 'close'
      });
    }
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: emptyMiniCartBody_default.a.continue
  }, intl.formatMessage({
    id: "cart:continue-shopping",
    defaultMessage: [{
      "type": 0,
      "value": "Continue Shopping"
    }]
  }))));
};

/* harmony default export */ var emptyMinicartBody = (EmptyMinicartBody);
// EXTERNAL MODULE: ./src/components/Minicart/body.css
var body = __webpack_require__(59);
var body_default = /*#__PURE__*/__webpack_require__.n(body);

// EXTERNAL MODULE: ./src/components/Minicart/product.css
var Minicart_product = __webpack_require__(9);
var product_default = /*#__PURE__*/__webpack_require__.n(Minicart_product);

// CONCATENATED MODULE: ./src/components/Price/price.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




const Price = props => {
  const {
    value,
    currencyCode,
    className
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement("span", {
    className: className
  }, intl.formatNumber(value, {
    style: 'currency',
    currency: currencyCode
  }));
};

Price.propTypes = {
  /**
   * The numeric price
   */
  value: external_prop_types_["number"].isRequired,

  /**
   * A string with any of the currency code supported by Intl.NumberFormat
   */
  currencyCode: external_prop_types_["string"].isRequired,

  /**
   * Class name to use when styling this component
   */
  className: external_prop_types_["string"]
};
Price.defaultProps = {
  className: ''
};
/* harmony default export */ var Price_price = (Price);
// CONCATENATED MODULE: ./src/components/Price/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/utils/transparentPlaceholder.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
const transparentPlaceholder = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAFCAQAAADIpIVQAAAADklEQVR42mNkgAJGIhgAALQABsHyMOcAAAAASUVORK5CYII=';
// CONCATENATED MODULE: ./src/utils/makeUrl.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
const htmlDataset = document.querySelector('html').dataset;
const {
  imageOptimizingOrigin
} = htmlDataset; // Protect against potential falsy values for `mediaBackend`.

let mediaBackend = htmlDataset.mediaBackend;

if (!mediaBackend) {
  console.warn('A media backend URL should be defined in your config.');
  mediaBackend = 'https://backend.test/media/';
}

const useBackendForImgs = imageOptimizingOrigin === 'backend'; // Tests if a URL begins with `http:` or `https:` or `data:`

const absoluteUrl = /^(data|http|https)?:/i; // Simple path joiner that guarantees one and only one slash between segments

const joinUrls = (base, url) => (base.endsWith('/') ? base.slice(0, -1) : base) + '/' + (url.startsWith('/') ? url.slice(1) : url);

const mediaBases = new Map().set('image-product', 'catalog/product/').set('image-category', 'catalog/category/');
/**
 * Creates an "optimized" url for a provided relative url based on
 * requested media type and width. Any image URLs (whose type begins with
 * "image-" will also be optimized.)
 *
 * If a `type` is provided the `path` will be joined with the associated media
 * base.
 *  - `catalog/product/path/to/img.jpg`
 *
 * If a `width` is provided, "resize parameters" are added to the URL for
 * middlewares (either onboard or backend) to return using the desired width
 * and original media url.
 *  - `catalog/product/path/to/img.jpg?width=500&auto=webp&format=pjpg
 *
 * If only `path` is provided it is returned unaltered.
 *
 * @param {string} path - absolute or relative url to resource.
 * @param {Object} props - properties describing desired optimizations
 * @param {string} props.type - "image-product" or "image-category"
 * @param {number} props.width - the desired resize width of the image
 * @param {number} props.height - the desired resize height of the image
 */

const makeOptimizedUrl = (path, {
  type,
  width,
  height
} = {}) => {
  // Immediate return if there's no image optimization to attempt
  if (!type || !type.startsWith('image-')) {
    return path;
  }

  const {
    origin
  } = window.location;
  const isAbsolute = absoluteUrl.test(path);
  let baseURL = new URL(path, mediaBackend); // If URL is relative and has a supported type, prepend media base onto path

  if (!isAbsolute && mediaBases.has(type)) {
    const mediaBase = mediaBases.get(type);

    if (!baseURL.pathname.includes(mediaBase)) {
      baseURL = new URL(joinUrls(mediaBase, path), mediaBackend);
    }
  }

  if (baseURL.href.startsWith(mediaBackend) && !useBackendForImgs) {
    baseURL = new URL(baseURL.href.slice(baseURL.origin.length), origin);
  } // Append image optimization parameters


  const params = new URLSearchParams(baseURL.search);
  params.set('auto', 'webp'); // Use the webp format if available

  params.set('format', 'pjpg'); // Use progressive JPGs at least

  if (width) {
    params.set('width', width);
  }

  if (height) {
    params.set('height', height);
  }

  baseURL.search = params.toString();

  if (baseURL.origin === origin) {
    return baseURL.href.slice(baseURL.origin.length);
  }

  return baseURL.href;
};

/* harmony default export */ var makeUrl = (makeOptimizedUrl);
// EXTERNAL MODULE: ./src/components/Minicart/kebab.css
var kebab = __webpack_require__(27);
var kebab_default = /*#__PURE__*/__webpack_require__.n(kebab);

// EXTERNAL MODULE: ./src/components/Icon/icon.css
var Icon_icon = __webpack_require__(60);
var icon_default = /*#__PURE__*/__webpack_require__.n(Icon_icon);

// CONCATENATED MODULE: ./src/components/Icon/icon.js
function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



/**
 * The Icon component allows us to wrap each icon with some default styling.
 */

const Icon = props => {
  const {
    attrs: {
      width,
      ...restAttrs
    } = {},
    size,
    src: IconComponent
  } = props; // Permit both prop styles:
  // <Icon src={Foo} attrs={{ width: 18 }} />
  // <Icon src={Foo} size={18} />

  return /*#__PURE__*/external_react_default.a.createElement("span", {
    className: icon_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement(IconComponent, _extends({
    size: size || width
  }, restAttrs)));
};

Icon.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"]
  }),
  size: external_prop_types_["number"],
  attrs: external_prop_types_["object"],
  src: Object(external_prop_types_["oneOfType"])([external_prop_types_["func"], Object(external_prop_types_["shape"])({
    render: external_prop_types_["func"].isRequired
  })]).isRequired
};
/* harmony default export */ var components_Icon_icon = (Icon);
// CONCATENATED MODULE: ./src/components/Icon/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/components/Minicart/kebab.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Kebab = props => {
  const {
    children
  } = props;
  const [open, isOpen] = Object(external_react_["useState"])(false);
  const kebabRef = Object(external_react_["useRef"])(null);
  const handleOutsideKebabClick = Object(external_react_["useCallback"])(event => {
    if (!kebabRef.current.contains(event.target)) {
      isOpen(false);
    }
  }, []);
  useEventListener(document, 'mousedown', handleOutsideKebabClick);
  useEventListener(document, 'touchend', handleOutsideKebabClick);
  const handleKebabClick = Object(external_react_["useCallback"])(() => {
    isOpen(!open);
  }, [isOpen]);
  const toggleClass = open ? kebab_default.a.dropdown_active : kebab_default.a.dropdown;
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: kebab_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("button", {
    className: kebab_default.a.kebab,
    onClick: handleKebabClick,
    ref: kebabRef
  }, /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
    src: external_react_feather_["MoreVertical"]
  })), /*#__PURE__*/external_react_default.a.createElement("ul", {
    className: toggleClass
  }, children));
};

Kebab.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    dropdown: external_prop_types_["string"],
    dropdown_active: external_prop_types_["string"],
    kebab: external_prop_types_["string"],
    root: external_prop_types_["string"]
  }),
  children: external_prop_types_["node"]
};
/* harmony default export */ var Minicart_kebab = (Kebab);
// EXTERNAL MODULE: ./src/components/Minicart/section.css
var section = __webpack_require__(41);
var section_default = /*#__PURE__*/__webpack_require__.n(section);

// CONCATENATED MODULE: ./src/components/Minicart/section.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





const defaultIconAttributes = {
  color: 'rgb(var(--venia-teal))',
  width: '14px',
  height: '14px'
};
const filledIconAttributes = { ...defaultIconAttributes,
  fill: 'rgb(var(--venia-teal))'
};
const icons = {
  Heart: external_react_feather_["Heart"],
  Edit2: external_react_feather_["Edit2"],
  Trash: external_react_feather_["Trash"]
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Section = props => {
  const {
    icon,
    isFilled,
    onClick,
    text
  } = props;
  const attributes = isFilled ? filledIconAttributes : defaultIconAttributes;
  const iconSrc = icons[icon];
  return /*#__PURE__*/external_react_default.a.createElement("li", {
    className: section_default.a.menuItem
  }, /*#__PURE__*/external_react_default.a.createElement("button", {
    onMouseDown: onClick
  }, iconSrc && /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
    src: iconSrc,
    attrs: attributes
  }), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: section_default.a.text
  }, text)));
};

Section.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    menuItem: external_prop_types_["string"],
    text: external_prop_types_["string"]
  }),
  icon: Object(external_prop_types_["oneOf"])(Object.keys(icons)),
  isFilled: external_prop_types_["bool"],
  onClick: external_prop_types_["func"],
  text: external_prop_types_["string"]
};
/* harmony default export */ var Minicart_section = (Section);
// CONCATENATED MODULE: ./src/queries/mutation_remove_item.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_remove_item_graphql = (client_["gql"]`
    mutation($cartId: String!, $itemUid: ID!) {
        removeItemFromCart(input: { cart_id: $cartId, cart_item_uid: $itemUid }) {
            cart {
                items {
                    uid
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/utils/parseError.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
/* harmony default export */ var parseError = (error => {
  if (error.networkError) {
    return error.networkError;
  }

  if (error.graphQLErrors && error.graphQLErrors.length > 0) {
    return error.graphQLErrors[0].message;
  }

  if (error.message) {
    return error.message;
  }

  return JSON.stringify(error);
});
// CONCATENATED MODULE: ./src/actions/cart/actions.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/**
 * Adds an item to the cart. If the cart doesn't exist then it's created
 *
 * @param {Object} payload a parameters object with the following structure:
 *      cartDetailsQuery - the query object to execute
 *      createCartMutation - the mutation to execute to create the cart
 *      addToCartMutation - the mutation to execute to add the item to the cart
 *      dispatch - the dispatch callback for the cart context
 *      cartItems - the items to add to the cart
 *      cartId - the id of the cart in which to add the items. This could be `undefined` or `null`
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const addItemToCart = async payload => {
  const {
    createCartMutation,
    cartDetailsQuery,
    addToCartMutation,
    dispatch,
    physicalCartItems,
    virtualCartItems,
    bundleCartItems
  } = payload;

  try {
    let cartId = payload.cartId;

    if (!payload.cartId) {
      let {
        data: newCartData
      } = await createCartMutation();
      cartId = newCartData.createEmptyCart;
    }

    let variables = {
      cartId,
      cartItems: physicalCartItems
    };

    if (bundleCartItems.length > 0) {
      variables = {
        cartId,
        cartItems: bundleCartItems
      };
    } else if (physicalCartItems.length > 0 && virtualCartItems.length > 0) {
      variables = {
        cartId,
        virtualCartItems,
        simpleCartItems: physicalCartItems
      };
    } else if (virtualCartItems.length > 0) {
      variables = {
        cartId,
        cartItems: virtualCartItems
      };
    }

    await addToCartMutation({
      variables
    });
    dispatch({
      type: 'cartId',
      cartId
    });
    await getCartDetails({
      cartDetailsQuery,
      cartId,
      dispatch
    });
  } catch (error) {
    dispatch({
      type: 'error',
      error: error.toString()
    });
  }
};
/**
 * Retrieves the cart details
 * @param {Object} payload a parameters object with the following structure:
 *      cartDetailsQuery - the query object to execute
 *      dispatch - the dispatch callback for the cart context
 *      cartId - the id of the cart
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const getCartDetails = async payload => {
  const {
    cartDetailsQuery,
    dispatch,
    cartId
  } = payload;

  try {
    if (!cartId) {
      return;
    }

    const {
      data,
      error
    } = await cartDetailsQuery({
      variables: {
        cartId
      },
      fetchPolicy: 'network-only'
    });

    if (error) {
      throw new Error(error);
    }

    dispatch({
      type: 'cart',
      cart: data.cart
    });
  } catch (error) {
    dispatch({
      type: 'error',
      error: error.toString()
    });
  }
};
/**
 * Removes an item from the cart
 *
 * @param {Object} payload a parameters object with the following structure:
 *      cartDetailsQuery - the query object to execute to retrieve the details
 *      removeItemMutation - the mutation to execute to remove the items
 *      dispatch - the dispatch callback for the cart context
 *      cartId - the id of the cart
 *      itemId - the id of the item to remove
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const removeItemFromCart = async payload => {
  const {
    cartDetailsQuery,
    removeItemMutation,
    cartId,
    itemUid,
    dispatch
  } = payload;

  try {
    await removeItemMutation({
      variables: {
        cartId,
        itemUid
      }
    });
  } catch (error) {
    dispatch({
      type: 'error',
      error: error.toString()
    });
  }

  await getCartDetails({
    cartDetailsQuery,
    dispatch,
    cartId
  });
};
/**
 * Removes a coupon from the cart
 *
 * @param {Object} payload a parameters object with the following structure:
 *      cartDetailsQuery - the query object to execute
 *      removeCouponMutation - the mutation to execute to remove the coupon
 *      dispatch - the dispatch callback for the cart context
 *      cartId - the id of the cart
 *      couponCode - the code of the coupon to be removed
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const removeCoupon = async payload => {
  const {
    cartDetailsQuery,
    cartId,
    couponCode,
    removeCouponMutation,
    dispatch
  } = payload;

  try {
    await removeCouponMutation({
      variables: {
        cartId,
        couponCode
      }
    });
  } catch (error) {
    dispatch({
      type: 'couponError',
      error: parseError(error)
    });
  }

  await getCartDetails({
    cartDetailsQuery,
    dispatch,
    cartId
  });
};
/**
 * Adds a coupon to the cart
 *
 * @param {Object} payload a parameters object with the following structure:
 *      cartDetailsQuery - the query object to execute
 *      addCouponMutation - the mutation to execute to add the coupon to the cart
 *      dispatch - the dispatch callback for the cart context
 *      cartId - the id of the cart
 *      couponCode - the code of the coupon
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const addCoupon = async payload => {
  const {
    cartDetailsQuery,
    cartId,
    couponCode,
    addCouponMutation,
    dispatch
  } = payload;

  try {
    await addCouponMutation({
      variables: {
        cartId,
        couponCode
      }
    });
  } catch (error) {
    dispatch({
      type: 'couponError',
      error: parseError(error)
    });
  }

  await getCartDetails({
    cartDetailsQuery,
    dispatch,
    cartId
  });
};
/**
 * Merges two shopping carts
 *
 * @param {Object} payload a parameters object with the following structure:
 *      cartDetailsQuery - the query object to execute
 *      mergeCartsMutation - the mutation to execute to merge the carts
 *      dispatch - the dispatch callback for the cart context
 *      cartId - the id of the cart to be merged
 *      customerCartId - the id of the cart that the other cart will the merged into (i.e. the customer cart)
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const mergeCarts = async payload => {
  const {
    cartDetailsQuery,
    mergeCartsMutation,
    cartId,
    customerCartId,
    dispatch
  } = payload;

  try {
    const {
      data
    } = await mergeCartsMutation({
      variables: {
        sourceCartId: cartId,
        destinationCartId: customerCartId
      }
    });
    await getCartDetails({
      cartDetailsQuery,
      dispatch,
      cartId: data.mergeCarts.id
    });
    return data.mergeCarts.id;
  } catch (error) {
    dispatch({
      type: 'error',
      error: parseError(error)
    });
  }
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const actions_updateCartItem = async payload => {
  const {
    cartDetailsQuery,
    updateCartItemMutation,
    cartId,
    cartItemUid,
    itemQuantity,
    dispatch
  } = payload;

  try {
    await updateCartItemMutation({
      variables: {
        cartId,
        cartItemUid,
        quantity: itemQuantity
      }
    });
    await getCartDetails({
      cartDetailsQuery,
      dispatch,
      cartId
    });
  } catch (error) {
    dispatch({
      type: 'error',
      error: parseError(error)
    });
  }
};
// CONCATENATED MODULE: ./src/actions/cart/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/components/Minicart/useProduct.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

/* harmony default export */ var useProduct = (props => {
  const {
    item
  } = props;
  const [{
    cartId
  }, dispatch] = useCartState();
  const mse = useStorefrontEvents();
  const [removeItemMutation] = Object(client_["useMutation"])(mutation_remove_item_graphql);
  const cartDetailsQuery = useAwaitQuery(query_cart_details_graphql);

  const editItem = () => {
    dispatch({
      type: 'beginEditing',
      item: item
    });
  };

  const removeItem = async itemUid => {
    dispatch({
      type: 'beginLoading'
    });
    await removeItemFromCart({
      cartId,
      itemUid,
      dispatch,
      cartDetailsQuery,
      removeItemMutation
    });
    dispatch({
      type: 'endLoading'
    });
    mse && mse.publish.removeFromCart();
    pushEvent('cif:removeFromCart', {
      '@id': await generateDataLayerId('product', item.product.sku),
      'xdm:SKU': item.product.sku,
      'xdm:quantity': item.quantity
    });
  };

  return [{}, {
    removeItem,
    editItem
  }];
});
// CONCATENATED MODULE: ./src/components/Minicart/product.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/










const imageWidth = 80;
const imageHeight = 100;
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Product = props => {
  const {
    item
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  const {
    product = {},
    quantity = 0,
    uid = '',
    prices,
    bundle_options = []
  } = item;
  const {
    thumbnail,
    name,
    __typename
  } = product;
  const [, {
    removeItem,
    editItem
  }] = useProduct({
    item
  });
  let {
    price,
    row_total
  } = prices;
  const productImage = Object(external_react_["useMemo"])(() => {
    const src = thumbnail && thumbnail.url ? makeUrl(thumbnail.url, {
      type: 'image-product',
      width: imageWidth,
      height: imageHeight
    }) : transparentPlaceholder;
    return /*#__PURE__*/external_react_default.a.createElement("img", {
      alt: name,
      className: product_default.a.image,
      placeholder: transparentPlaceholder,
      src: src
    });
  });
  const handleRemoveItem = Object(external_react_["useCallback"])(() => {
    removeItem(uid);
  }, [uid, removeItem]);
  return /*#__PURE__*/external_react_default.a.createElement("li", {
    className: product_default.a.root,
    "data-testid": "cart-item"
  }, productImage, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: product_default.a.name
  }, name), __typename === 'BundleProduct' && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: product_default.a.bundleOptions
  }, bundle_options.map(o => /*#__PURE__*/external_react_default.a.createElement("div", {
    key: `${o.id}`
  }, /*#__PURE__*/external_react_default.a.createElement("p", {
    className: product_default.a.bundleOptionTitle
  }, o.label, ":"), o.values.map(v => /*#__PURE__*/external_react_default.a.createElement("p", {
    key: `${o.id}-${v.id}`,
    className: product_default.a.bundleOptionValue
  }, `${v.quantity} x ${v.label} `, /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    currencyCode: price.currency,
    value: v.price
  })))))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: product_default.a.quantity
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: product_default.a.quantityRow
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, quantity), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: product_default.a.quantityOperator
  }, '×'), /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    className: product_default.a.price,
    currencyCode: price.currency,
    value: price.value
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: product_default.a.rowTotalRow
  }, /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    className: product_default.a.rowTotal,
    currencyCode: row_total.currency,
    value: row_total.value
  }))), /*#__PURE__*/external_react_default.a.createElement(Minicart_kebab, null, /*#__PURE__*/external_react_default.a.createElement(Minicart_section, {
    text: intl.formatMessage({
      id: "cart:edit-item",
      defaultMessage: [{
        "type": 0,
        "value": "Edit item"
      }]
    }),
    onClick: editItem,
    icon: "Edit2"
  }), /*#__PURE__*/external_react_default.a.createElement(Minicart_section, {
    text: intl.formatMessage({
      id: "cart:remove-item",
      defaultMessage: [{
        "type": 0,
        "value": "Remove item"
      }]
    }),
    onClick: handleRemoveItem,
    icon: "Trash"
  })));
};

Product.propTypes = {
  item: Object(external_prop_types_["shape"])({
    uid: external_prop_types_["string"].isRequired,
    quantity: external_prop_types_["number"].isRequired,
    prices: Object(external_prop_types_["shape"])({
      price: Object(external_prop_types_["shape"])({
        value: external_prop_types_["number"].isRequired,
        currency: external_prop_types_["string"].isRequired
      }).isRequired,
      row_total: Object(external_prop_types_["shape"])({
        value: external_prop_types_["number"].isRequired,
        currency: external_prop_types_["string"].isRequired
      }).isRequired
    }).isRequired,
    product: Object(external_prop_types_["shape"])({
      name: external_prop_types_["string"].isRequired,
      image: external_prop_types_["object"]
    })
  })
};
/* harmony default export */ var components_Minicart_product = (Product);
// EXTERNAL MODULE: ./src/components/Minicart/productList.css
var productList = __webpack_require__(61);
var productList_default = /*#__PURE__*/__webpack_require__.n(productList);

// CONCATENATED MODULE: ./src/components/Minicart/productList.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const ProductList = props => {
  const {
    cartItems
  } = props;
  return /*#__PURE__*/external_react_default.a.createElement("ul", {
    className: productList_default.a.root
  }, cartItems.map(item => /*#__PURE__*/external_react_default.a.createElement(components_Minicart_product, {
    key: item.id,
    item: item
  })));
};

ProductList.propTypes = {
  cartItems: external_prop_types_["array"],
  classes: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"]
  })
};
/* harmony default export */ var Minicart_productList = (ProductList);
// EXTERNAL MODULE: ./src/components/Button/button.css
var Button_button = __webpack_require__(42);
var button_default = /*#__PURE__*/__webpack_require__.n(Button_button);

// CONCATENATED MODULE: ./src/components/Button/button.js
function button_extends() { button_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return button_extends.apply(this, arguments); }

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




const getRootClassName = priority => `root_${priority}Priority`;

const Button = props => {
  const {
    children,
    priority,
    type,
    ...restProps
  } = props;
  let classes = props.classes ? Object.assign({}, button_default.a, props.classes) : button_default.a;
  const rootClassName = classes[getRootClassName(priority)];
  return /*#__PURE__*/external_react_default.a.createElement("button", button_extends({
    className: rootClassName,
    type: type
  }, restProps), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: classes.content
  }, children));
};

Button.defaultProps = {
  priority: 'normal',
  type: 'button'
};
Button.propTypes = {
  priority: Object(external_prop_types_["oneOf"])(['high', 'normal', 'low']).isRequired,
  type: Object(external_prop_types_["oneOf"])(['button', 'reset', 'submit']).isRequired,
  children: external_prop_types_["node"],
  classes: Object(external_prop_types_["shape"])({
    content: external_prop_types_["string"]
  })
};
/* harmony default export */ var components_Button_button = (Button);
// CONCATENATED MODULE: ./src/components/Button/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: external "informed"
var external_informed_ = __webpack_require__(6);

// EXTERNAL MODULE: ./src/components/Field/field.css
var field = __webpack_require__(34);
var field_default = /*#__PURE__*/__webpack_require__.n(field);

// CONCATENATED MODULE: ./src/components/Field/field.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




const Field = props => {
  const {
    required,
    children,
    label,
    htmlFor
  } = props;
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: field_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("label", {
    htmlFor: htmlFor
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: field_default.a.label
  }, required && /*#__PURE__*/external_react_default.a.createElement("span", {
    className: field_default.a.requiredSymbol
  }), label)), children);
};

Field.propTypes = {
  children: external_prop_types_["node"],
  classes: Object(external_prop_types_["shape"])({
    label: external_prop_types_["string"],
    root: external_prop_types_["string"]
  }),
  label: external_prop_types_["node"],
  required: external_prop_types_["bool"],
  htmlFor: external_prop_types_["string"]
};
/* harmony default export */ var Field_field = (Field);
// EXTERNAL MODULE: ./src/components/Field/fieldIcons.css
var fieldIcons = __webpack_require__(28);
var fieldIcons_default = /*#__PURE__*/__webpack_require__.n(fieldIcons);

// CONCATENATED MODULE: ./src/components/Field/fieldIcons.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




const FieldIcons = props => {
  const {
    after,
    before,
    children
  } = props;
  const style = {
    '--iconsBefore': before ? 1 : 0,
    '--iconsAfter': after ? 1 : 0
  };
  return /*#__PURE__*/external_react_default.a.createElement("span", {
    className: fieldIcons_default.a.root,
    style: style
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: fieldIcons_default.a.input
  }, children), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: fieldIcons_default.a.before
  }, before), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: fieldIcons_default.a.after
  }, after));
};

FieldIcons.propTypes = {
  after: external_prop_types_["object"],
  before: external_prop_types_["string"],
  root: external_prop_types_["string"],
  children: external_prop_types_["node"]
};
/* harmony default export */ var Field_fieldIcons = (FieldIcons);
// EXTERNAL MODULE: ./src/components/Field/message.css
var Field_message = __webpack_require__(43);
var message_default = /*#__PURE__*/__webpack_require__.n(Field_message);

// CONCATENATED MODULE: ./src/components/Field/message.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




const Message = props => {
  const {
    children,
    fieldState
  } = props;
  const {
    asyncError,
    error
  } = fieldState;
  const errorMessage = error || asyncError;
  const className = errorMessage ? message_default.a.root_error : message_default.a.root;
  return /*#__PURE__*/external_react_default.a.createElement("p", {
    className: className
  }, errorMessage || children);
};

Message.propTypes = {
  children: external_prop_types_["node"],
  classes: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"],
    root_error: external_prop_types_["string"]
  }),
  fieldState: Object(external_prop_types_["shape"])({
    asyncError: external_prop_types_["string"],
    error: external_prop_types_["string"]
  })
};
/* harmony default export */ var components_Field_message = (Message);
// CONCATENATED MODULE: ./src/components/Field/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



// EXTERNAL MODULE: ./src/components/Select/select.css
var Select_select = __webpack_require__(62);
var select_default = /*#__PURE__*/__webpack_require__.n(Select_select);

// CONCATENATED MODULE: ./src/components/Select/select.js
function select_extends() { select_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return select_extends.apply(this, arguments); }

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







const arrow = /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
  src: external_react_feather_["ChevronDown"],
  size: 18
});
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Select = props => {
  const {
    fieldState,
    items,
    message,
    ...rest
  } = props;
  const options = items.map(({
    label,
    value
  }) => /*#__PURE__*/external_react_default.a.createElement(external_informed_["Option"], {
    key: value,
    value: value
  }, label || (value != null ? value : '')));
  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement(Field_fieldIcons, {
    after: arrow
  }, /*#__PURE__*/external_react_default.a.createElement(external_informed_["BasicSelect"], select_extends({}, rest, {
    fieldState: fieldState,
    className: select_default.a.input
  }), options)), /*#__PURE__*/external_react_default.a.createElement(components_Field_message, {
    fieldState: fieldState
  }, message));
};

Select.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    input: external_prop_types_["string"]
  }),
  field: external_prop_types_["string"].isRequired,
  fieldState: Object(external_prop_types_["shape"])({
    value: Object(external_prop_types_["oneOfType"])([external_prop_types_["number"], external_prop_types_["string"]])
  }),
  items: Object(external_prop_types_["arrayOf"])(Object(external_prop_types_["shape"])({
    label: external_prop_types_["string"],
    value: Object(external_prop_types_["oneOfType"])([external_prop_types_["number"], external_prop_types_["string"]])
  })),
  message: external_prop_types_["node"]
};
/* harmony default export */ var components_Select_select = (Object(external_informed_["asField"])(Select));
// CONCATENATED MODULE: ./src/components/Select/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/Minicart/cartOptions.css
var cartOptions = __webpack_require__(13);
var cartOptions_default = /*#__PURE__*/__webpack_require__.n(cartOptions);

// CONCATENATED MODULE: ./src/queries/mutation_update_cart_item.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_update_cart_item_graphql = (client_["gql"]`
    mutation($cartId: String!, $cartItemUid: ID!, $quantity: Float!) {
        updateCartItems(
            input: { cart_id: $cartId, cart_items: [{ cart_item_uid: $cartItemUid, quantity: $quantity }] }
        ) {
            cart {
                items {
                    uid
                    quantity
                    product {
                        name
                    }
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/components/Minicart/useCartOptions.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const useCartOptions = ({
  updateCartItemMutation,
  cartDetailsQuery
}) => {
  const [{
    editItem,
    cartId
  }, dispatch] = useCartState();
  const mse = useStorefrontEvents();

  const updateCart = async newQuantity => {
    dispatch({
      type: 'beginLoading'
    });
    await actions_updateCartItem({
      cartDetailsQuery,
      updateCartItemMutation,
      cartId,
      cartItemUid: editItem.uid,
      itemQuantity: newQuantity,
      dispatch
    });
    mse && mse.publish.updateCart();
    dispatch({
      type: 'endLoading'
    });
  };

  const data = {
    editItem,
    cartId
  };
  const api = {
    dispatch,
    updateCartItem: updateCart
  };
  return [data, api];
};

/* harmony default export */ var Minicart_useCartOptions = (useCartOptions);
// CONCATENATED MODULE: ./src/components/Minicart/cartOptions.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/











/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CartOptions = () => {
  const [updateCartItemMutation] = Object(client_["useMutation"])(mutation_update_cart_item_graphql);
  const cartDetailsQuery = useAwaitQuery(query_cart_details_graphql);
  const intl = Object(external_react_intl_["useIntl"])();
  const [{
    editItem
  }, {
    dispatch,
    updateCartItem
  }] = Minicart_useCartOptions({
    updateCartItemMutation,
    cartDetailsQuery
  });
  const {
    product,
    quantity: initialQuantity,
    prices
  } = editItem;
  const {
    name
  } = product;
  const {
    value,
    currency
  } = prices.price;
  const [quantity, setQuantity] = Object(external_react_["useState"])(initialQuantity);
  const mockQtys = [{
    value: '1'
  }, {
    value: '2'
  }, {
    value: '3'
  }, {
    value: '4'
  }];

  const handleUpdateClick = async () => {
    await updateCartItem(quantity);
    dispatch({
      type: 'endEditing'
    });
  };

  const handleOnChange = newVal => {
    setQuantity(parseInt(newVal));
  };

  return /*#__PURE__*/external_react_default.a.createElement("form", {
    className: cartOptions_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: cartOptions_default.a.focusItem
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: cartOptions_default.a.name
  }, name), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: cartOptions_default.a.price
  }, /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    currencyCode: currency,
    value: value
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: cartOptions_default.a.form
  }, /*#__PURE__*/external_react_default.a.createElement("section", {
    className: cartOptions_default.a.quantity
  }, /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: cartOptions_default.a.quantityTitle
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "cart:quantity",
    defaultMessage: [{
      "type": 0,
      "value": "Quantity"
    }]
  }))), /*#__PURE__*/external_react_default.a.createElement(components_Select_select, {
    field: "quantity",
    initialValue: quantity,
    onValueChange: handleOnChange,
    items: mockQtys
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: cartOptions_default.a.save
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    onClick: () => {
      dispatch({
        type: 'endEditing'
      });
    }
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "common:cancel",
    defaultMessage: [{
      "type": 0,
      "value": "Cancel"
    }]
  }))), /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "high",
    onClick: handleUpdateClick
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "cart:update-cart",
    defaultMessage: [{
      "type": 0,
      "value": "Update Cart"
    }]
  })))));
};

/* harmony default export */ var Minicart_cartOptions = (CartOptions);
// EXTERNAL MODULE: ./src/components/Minicart/error.css
var Minicart_error = __webpack_require__(44);
var error_default = /*#__PURE__*/__webpack_require__.n(Minicart_error);

// CONCATENATED MODULE: ./src/components/Minicart/error.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const error_Error = () => {
  const [{
    errorMessage
  }, dispatch] = useCartState();
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: error_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("h2", null, "Error"), /*#__PURE__*/external_react_default.a.createElement("p", null, errorMessage), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: error_default.a.action
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "high",
    onClick: () => {
      dispatch({
        type: 'discardError'
      });
    }
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "common:close",
    defaultMessage: [{
      "type": 0,
      "value": "Close"
    }]
  })))));
};

/* harmony default export */ var components_Minicart_error = (error_Error);
// EXTERNAL MODULE: ./src/components/Minicart/couponForm.css
var couponForm = __webpack_require__(45);
var couponForm_default = /*#__PURE__*/__webpack_require__.n(couponForm);

// CONCATENATED MODULE: ./src/queries/mutation_add_coupon.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_add_coupon_graphql = (client_["gql"]`
    mutation($cartId: String!, $couponCode: String!) {
        applyCouponToCart(input: { cart_id: $cartId, coupon_code: $couponCode }) {
            cart {
                applied_coupon {
                    code
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/components/Minicart/useCouponForm.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

/* harmony default export */ var useCouponForm = (() => {
  const [{
    cartId,
    couponError
  }, dispatch] = useCartState();
  const [addCouponMutation] = Object(client_["useMutation"])(mutation_add_coupon_graphql);
  const cartDetailsQuery = useAwaitQuery(query_cart_details_graphql);

  const addCouponToCart = async couponCode => {
    dispatch({
      type: 'beginLoading'
    });
    await addCoupon({
      cartId,
      couponCode,
      cartDetailsQuery,
      addCouponMutation,
      dispatch
    });
    dispatch({
      type: 'endLoading'
    });
  };

  return [{
    couponError
  }, {
    addCouponToCart
  }];
});
// CONCATENATED MODULE: ./src/components/Minicart/couponForm.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CouponForm = () => {
  const [{
    couponError
  }, {
    addCouponToCart
  }] = useCouponForm();
  const [couponCode, setCouponCode] = Object(external_react_["useState"])('');
  const intl = Object(external_react_intl_["useIntl"])();

  const addCouponHandler = () => {
    return addCouponToCart(couponCode);
  };

  const errorFragment = couponError ? /*#__PURE__*/external_react_default.a.createElement("div", {
    className: couponForm_default.a.error
  }, couponError) : '';
  return /*#__PURE__*/external_react_default.a.createElement("form", {
    className: couponForm_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("input", {
    value: couponCode,
    onChange: e => setCouponCode(e.target.value),
    type: "text",
    name: "couponCode",
    placeholder: intl.formatMessage({
      id: "cart:enter-coupon",
      defaultMessage: [{
        "type": 0,
        "value": "Enter your code"
      }]
    })
  }), /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "high",
    onClick: addCouponHandler,
    disabled: couponCode.length < 3
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "cart:apply-coupon",
    defaultMessage: [{
      "type": 0,
      "value": "Apply Coupon"
    }]
  }))), errorFragment);
};

/* harmony default export */ var Minicart_couponForm = (CouponForm);
// EXTERNAL MODULE: ./src/components/Minicart/couponItem.css
var couponItem = __webpack_require__(46);
var couponItem_default = /*#__PURE__*/__webpack_require__.n(couponItem);

// CONCATENATED MODULE: ./src/queries/mutation_remove_coupon.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_remove_coupon_graphql = (client_["gql"]`
    mutation($cartId: String!) {
        removeCouponFromCart(input: { cart_id: $cartId }) {
            cart {
                applied_coupon {
                    code
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/components/Minicart/useCouponItem.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

/* harmony default export */ var useCouponItem = (() => {
  const [{
    cartId,
    cart
  }, dispatch] = useCartState();
  const [removeCouponMutation] = Object(client_["useMutation"])(mutation_remove_coupon_graphql);
  const cartDetailsQuery = useAwaitQuery(query_cart_details_graphql);
  const appliedCoupon = cart.applied_coupon ? cart.applied_coupon.code : null;

  const removeCouponFromCart = async () => {
    dispatch({
      type: 'beginLoading'
    });
    await removeCoupon({
      cartId,
      removeCouponMutation,
      cartDetailsQuery,
      dispatch
    });
    dispatch({
      type: 'endLoading'
    });
  };

  return [{
    appliedCoupon
  }, {
    removeCouponFromCart
  }];
});
// CONCATENATED MODULE: ./src/components/Minicart/couponItem.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CouponItem = () => {
  const [{
    appliedCoupon
  }, {
    removeCouponFromCart
  }] = useCouponItem();
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: couponItem_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: couponItem_default.a.couponName
  }, "Coupon ", /*#__PURE__*/external_react_default.a.createElement("strong", null, appliedCoupon), " applied."), /*#__PURE__*/external_react_default.a.createElement(Minicart_kebab, null, /*#__PURE__*/external_react_default.a.createElement(Minicart_section, {
    text: intl.formatMessage({
      id: "cart:remove-coupon",
      defaultMessage: [{
        "type": 0,
        "value": "Remove coupon"
      }]
    }),
    onClick: removeCouponFromCart,
    icon: "Trash"
  })));
};

/* harmony default export */ var Minicart_couponItem = (CouponItem);
// EXTERNAL MODULE: ./src/components/Minicart/discountList.css
var discountList = __webpack_require__(35);
var discountList_default = /*#__PURE__*/__webpack_require__.n(discountList);

// CONCATENATED MODULE: ./src/components/Minicart/discountList.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const DiscountList = props => {
  let _renderDiscounts = () => {
    return props.discounts.map(discount => {
      const {
        currency,
        value
      } = discount.amount;
      return /*#__PURE__*/external_react_default.a.createElement("div", {
        className: discountList_default.a.item,
        key: discount.label
      }, /*#__PURE__*/external_react_default.a.createElement("span", null, discount.label), /*#__PURE__*/external_react_default.a.createElement("span", {
        className: discountList_default.a.price
      }, /*#__PURE__*/external_react_default.a.createElement(Price_price, {
        currencyCode: currency,
        value: -value
      })));
    });
  };

  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: discountList_default.a.root
  }, _renderDiscounts());
};

DiscountList.propTypes = {
  discounts: Object(external_prop_types_["arrayOf"])(Object(external_prop_types_["shape"])({
    amount: Object(external_prop_types_["shape"])({
      value: external_prop_types_["number"].isRequired,
      currency: external_prop_types_["string"].isRequired
    }).isRequired,
    label: external_prop_types_["string"].isRequired
  }))
};
/* harmony default export */ var Minicart_discountList = (DiscountList);
// CONCATENATED MODULE: ./src/components/Minicart/body.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/












/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CartLoadingIndicator = () => {
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, null, intl.formatMessage({
    id: "cart:fetching-data",
    defaultMessage: [{
      "type": 0,
      "value": "Fetching cart data..."
    }]
  }));
};

const Body = () => {
  const [{
    isEditing,
    cart,
    isLoading,
    errorMessage
  }] = useCartState();
  const isEmpty = cart && Object.entries(cart).length > 0 ? cart.items.length === 0 : true;

  if (isLoading) {
    return /*#__PURE__*/external_react_default.a.createElement(CartLoadingIndicator, null);
  }

  if (errorMessage) {
    return /*#__PURE__*/external_react_default.a.createElement(components_Minicart_error, null);
  }

  if (isEmpty) {
    return /*#__PURE__*/external_react_default.a.createElement(emptyMinicartBody, null);
  }

  if (isEditing) {
    return /*#__PURE__*/external_react_default.a.createElement(Minicart_cartOptions, null);
  }

  const cartItems = cart.items;
  const couponFragment = !cart.applied_coupon ? /*#__PURE__*/external_react_default.a.createElement(Minicart_couponForm, null) : /*#__PURE__*/external_react_default.a.createElement(Minicart_couponItem, null);
  const discountFragment = cart.prices.discounts && cart.prices.discounts.length > 0 ? /*#__PURE__*/external_react_default.a.createElement(Minicart_discountList, {
    discounts: cart.prices.discounts
  }) : /*#__PURE__*/external_react_default.a.createElement("div", null);
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: body_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement(Minicart_productList, {
    cartItems: cartItems
  }), discountFragment, couponFragment);
};

/* harmony default export */ var Minicart_body = (Body);
// EXTERNAL MODULE: external "@magento/peregrine/lib/util/simplePersistence"
var simplePersistence_ = __webpack_require__(31);
var simplePersistence_default = /*#__PURE__*/__webpack_require__.n(simplePersistence_);

// EXTERNAL MODULE: external "@magento/peregrine/lib/store/actions/cart/asyncActions"
var asyncActions_ = __webpack_require__(25);

// CONCATENATED MODULE: ./src/actions/user/actions.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/**
 * Re-fetches a customer cart.
 *
 * @param {Object} payload a parameters object with the following structure:
 *     fetchCustomerCartQuery - the query object to execute to retrieve the cart details
 *     dispatch - the dispatch callback for the user context
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */
const actions_resetCustomerCart = async ({
  dispatch,
  fetchCustomerCartQuery
}) => {
  const {
    data
  } = await fetchCustomerCartQuery({
    fetchPolicy: 'network-only'
  });
  const cartId = data.customerCart.id;
  dispatch({
    type: 'setCartId',
    cartId
  });
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const signOutUser = async ({
  revokeCustomerToken,
  setCartCookie,
  setUserCookie,
  dispatch
}) => {
  try {
    await revokeCustomerToken();
    setCartCookie('', 0);
    setUserCookie('', 0);
    dispatch({
      type: 'signOut'
    });
  } catch (error) {
    console.error('An error occurred during sign-out', error);
    dispatch({
      type: 'error',
      error: error.toString()
    });
  }
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const createAddress = async ({
  createCustomerAddress,
  variables,
  resetFields,
  dispatch
}) => {
  try {
    const {
      data
    } = await createCustomerAddress({
      variables: variables
    });
    dispatch({
      type: 'postCreateAddress',
      address: data.createCustomerAddress,
      resetFields
    });
  } catch (error) {
    console.error('An error occurred during creating customer address', error);
    dispatch({
      type: 'setAddressFormError',
      error: error.toString()
    });
  }
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const actions_updateAddress = async ({
  updateCustomerAddress,
  variables,
  resetFields,
  dispatch
}) => {
  try {
    const {
      data
    } = await updateCustomerAddress({
      variables: variables
    });
    dispatch({
      type: 'postUpdateAddress',
      address: data.updateCustomerAddress,
      resetFields
    });
  } catch (error) {
    console.error('An error occurred during updating customer address', error);
    dispatch({
      type: 'setAddressFormError',
      error: error.toString()
    });
  }
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const actions_deleteAddress = async ({
  deleteCustomerAddress,
  address,
  dispatch
}) => {
  try {
    await deleteCustomerAddress({
      variables: {
        id: address.id
      }
    });
    dispatch({
      type: 'postDeleteAddress',
      address
    });
  } catch (error) {
    console.error('An error occurred during deleting customer address', error);
    dispatch({
      type: 'deleteAddressError',
      error: error.toString()
    });
  }
};
// CONCATENATED MODULE: ./src/actions/user/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/queries/mutation_delete_customer_address.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_delete_customer_address_graphql = (client_["gql"]`
    mutation($id: Int!) {
        deleteCustomerAddress(id: $id)
    }
`);
// CONCATENATED MODULE: ./src/queries/mutation_revoke_customer_token.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_revoke_customer_token_graphql = (client_["gql"]`
    mutation {
        revokeCustomerToken {
            result
        }
    }
`);
// CONCATENATED MODULE: ./src/queries/query_customer_details.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var query_customer_details_graphql = (client_["gql"]`
    query {
        customer {
            email
            firstname
            lastname
            addresses {
                id
                city
                company
                country_code
                default_billing
                default_shipping
                firstname
                lastname
                postcode
                region {
                    region_code
                }
                street
                telephone
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/context/UserContext.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/












const UserContext = /*#__PURE__*/external_react_default.a.createContext();

const UserContext_reducerFactory = () => {
  return (state, action) => {
    switch (action.type) {
      case 'setUserDetails':
        return { ...state,
          inProgress: false,
          currentUser: { ...action.userDetails
          }
        };

      case 'setCartId':
        return { ...state,
          cartId: action.cartId
        };

      case 'setInProgress':
        {
          return { ...state,
            inProgress: true
          };
        }

      case 'setToken':
        return { ...state,
          isSignedIn: true,
          inProgress: false,
          token: action.token,
          signInError: null
        };

      case 'setAddressFormError':
        return { ...state,
          addressFormError: parseError(action.error)
        };

      case 'clearAddressFormError':
        return { ...state,
          addressFormError: null
        };

      case 'postCreateAddress':
        return { ...state,
          currentUser: { ...state.currentUser,
            addresses: [...[...state.currentUser.addresses].map(address => {
              if (action.resetFields) {
                Object.entries(action.resetFields).forEach(([key, value]) => {
                  address[key] = value;
                });
              }

              return address;
            }), action.address]
          },
          addressFormError: null,
          isShowAddressForm: false
        };

      case 'beginEditingAddress':
        return { ...state,
          updateAddress: action.address,
          isShowAddressForm: true
        };

      case 'endEditingAddress':
        return { ...state,
          updateAddress: null
        };

      case 'postUpdateAddress':
        return { ...state,
          currentUser: { ...state.currentUser,
            addresses: [...state.currentUser.addresses].map(address => {
              if (action.resetFields) {
                Object.entries(action.resetFields).forEach(([key, value]) => {
                  address[key] = value;
                });
              }

              return address.id === action.address.id ? action.address : address;
            })
          },
          updateAddress: null,
          addressFormError: null,
          isShowAddressForm: false
        };

      case 'beginDeletingAddress':
        return { ...state,
          deleteAddress: action.address
        };

      case 'endDeletingAddress':
        return { ...state,
          deleteAddress: null
        };

      case 'postDeleteAddress':
        return { ...state,
          currentUser: { ...state.currentUser,
            addresses: [...state.currentUser.addresses].filter(address => address.id !== action.address.id)
          },
          deleteAddress: null,
          deleteAddressError: null
        };

      case 'deleteAddressError':
        return { ...state,
          deleteAddressError: parseError(action.error)
        };

      case 'postCreateAccount':
        return { ...state,
          isSignedIn: false,
          inProgress: false,
          createAccountError: null,
          createAccountEmail: action.accountEmail
        };

      case 'cleanupAccountCreated':
        return { ...state,
          createAccountEmail: null
        };

      case 'error':
        {
          return { ...state,
            inProgress: false,
            signInError: action.error
          };
        }

      case 'createAccountError':
        {
          return { ...state,
            inProgress: false,
            createAccountError: parseError(action.error)
          };
        }

      case 'signOut':
        return { ...state,
          isSignedIn: false,
          inProgress: false,
          token: '',
          currentUser: {
            firstname: '',
            lastname: '',
            email: '',
            addresses: []
          },
          cartId: '',
          accountDropdownView: null
        };

      case 'toggleAccountDropdown':
        return { ...state,
          isAccountDropdownOpen: action.toggle
        };

      case 'changeAccountDropdownView':
        return { ...state,
          accountDropdownView: action.view
        };

      case 'openAddressForm':
        return { ...state,
          isShowAddressForm: true
        };

      case 'closeAddressForm':
        return { ...state,
          isShowAddressForm: false
        };

      default:
        return state;
    }
  };
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */


const UserContextProvider = props => {
  const [userCookie, setUserCookie] = useCookieValue('cif.userToken');
  const [, setCartCookie] = useCookieValue('cif.cart');

  const isSignedInFunc = () => !!userCookie;

  const mse = useStorefrontEvents();
  const [deleteCustomerAddress] = Object(client_["useMutation"])(mutation_delete_customer_address_graphql);
  const [revokeCustomerToken] = Object(client_["useMutation"])(mutation_revoke_customer_token_graphql);
  const fetchCustomerDetails = useAwaitQuery(query_customer_details_graphql);
  const factory = props.reducerFactory || UserContext_reducerFactory;
  const initialState = props.initialState || {
    currentUser: {
      firstname: '',
      lastname: '',
      email: '',
      addresses: []
    },
    token: userCookie,
    isSignedIn: isSignedInFunc(),
    isAccountDropdownOpen: false,
    isShowAddressForm: false,
    addressFormError: null,
    updateAddress: null,
    updateAddressError: null,
    deleteAddress: null,
    deleteAddressError: null,
    signInError: null,
    inProgress: false,
    createAccountError: null,
    createAccountEmail: null,
    cartId: null,
    accountDropdownView: null
  };
  const [userState, dispatch] = Object(external_react_["useReducer"])(factory(), initialState);
  const {
    isSignedIn,
    currentUser
  } = userState; // Storage as used by Peregrine components

  const storage = new simplePersistence_default.a();
  Object(external_react_["useEffect"])(() => {
    if (!isSignedIn) {
      mse && mse.context.setShopper({
        shopperId: 'guest'
      });
      pushData({
        user: null
      });
    } else if (isSignedIn && currentUser && currentUser.email !== '') {
      mse && mse.context.setShopper({
        shopperId: 'logged-in'
      });
      pushData({
        user: currentUser
      });
    }
  }, [isSignedIn, currentUser]);

  const setToken = token => {
    setUserCookie(token);
    pushEvent('cif:userSignIn');
    mse && mse.context.setShopper({
      shopperId: 'logged-in'
    });
    mse && mse.publish.signIn();
    storage.setItem('signin_token', token, 3600);
    dispatch({
      type: 'setToken',
      token
    });
  };

  const setError = error => {
    dispatch({
      type: 'error',
      error: parseError(error)
    });
  };

  const setCustomerCart = cartId => {
    dispatch({
      type: 'setCartId',
      cartId
    });
  };

  const signOut = async () => {
    pushEvent('cif:userSignOut', null, {
      user: null
    });
    mse && mse.context.setShopper({
      shopperId: 'guest'
    });
    mse && mse.publish.signOut();
    storage.removeItem('signin_token');
    await Object(asyncActions_["clearCartId"])();
    await signOutUser({
      revokeCustomerToken,
      setCartCookie,
      setUserCookie,
      dispatch
    });
  };

  const resetCustomerCart = async fetchCustomerCartQuery => {
    await actions_resetCustomerCart({
      fetchCustomerCartQuery,
      dispatch
    });
  };

  const getUserDetails = Object(external_react_["useCallback"])(async () => {
    try {
      const {
        data: customerData
      } = await fetchCustomerDetails({
        fetchPolicy: 'no-cache'
      });
      dispatch({
        type: 'setUserDetails',
        userDetails: customerData.customer
      });
    } catch (error) {
      dispatch({
        type: 'error',
        error
      });
    }
  }, [fetchCustomerDetails]);

  const toggleAccountDropdown = toggle => {
    dispatch({
      type: 'toggleAccountDropdown',
      toggle
    });
  };

  const showSignIn = () => {
    dispatch({
      type: 'changeAccountDropdownView',
      view: 'SIGN_IN'
    });
  };

  const showMyAccount = () => {
    dispatch({
      type: 'changeAccountDropdownView',
      view: 'MY_ACCOUNT'
    });
  };

  const showForgotPassword = () => {
    dispatch({
      type: 'changeAccountDropdownView',
      view: 'FORGOT_PASSWORD'
    });
  };

  const showCreateAccount = () => {
    dispatch({
      type: 'changeAccountDropdownView',
      view: 'CREATE_ACCOUNT'
    });
  };

  const showAccountCreated = () => {
    dispatch({
      type: 'changeAccountDropdownView',
      view: 'ACCOUNT_CREATED'
    });
  };

  const showChangePassword = () => {
    dispatch({
      type: 'changeAccountDropdownView',
      view: 'CHANGE_PASSWORD'
    });
  };

  const deleteAddress = async address => {
    await actions_deleteAddress({
      deleteCustomerAddress,
      address,
      dispatch
    });
  };

  const {
    children
  } = props;
  const contextValue = [userState, {
    dispatch,
    setToken,
    setError,
    signOut,
    setCustomerCart,
    getUserDetails,
    resetCustomerCart,
    toggleAccountDropdown,
    showSignIn,
    showMyAccount,
    showForgotPassword,
    showCreateAccount,
    showAccountCreated,
    showChangePassword,
    deleteAddress
  }];
  return /*#__PURE__*/external_react_default.a.createElement(UserContext.Provider, {
    value: contextValue
  }, children);
};

UserContextProvider.propTypes = {
  reducerFactory: external_prop_types_["func"],
  initialState: external_prop_types_["object"]
};
/* harmony default export */ var context_UserContext = (UserContextProvider);
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const useUserContext = () => Object(external_react_["useContext"])(UserContext);
// CONCATENATED MODULE: ./src/queries/mutation_update_customer_address.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_update_customer_address_graphql = (client_["gql"]`
    mutation(
        $id: Int!
        $city: String
        $company: String
        $country_code: CountryCodeEnum
        $default_billing: Boolean
        $default_shipping: Boolean
        $firstname: String
        $lastname: String
        $postcode: String
        $region: CustomerAddressRegionInput
        $street: [String]
        $telephone: String
    ) {
        updateCustomerAddress(
            id: $id
            input: {
                city: $city
                company: $company
                country_code: $country_code
                default_billing: $default_billing
                default_shipping: $default_shipping
                firstname: $firstname
                lastname: $lastname
                postcode: $postcode
                region: $region
                street: $street
                telephone: $telephone
            }
        ) {
            id
            city
            company
            country_code
            default_billing
            default_shipping
            firstname
            lastname
            postcode
            region {
                region_code
            }
            street
            telephone
        }
    }
`);
// CONCATENATED MODULE: ./src/queries/mutation_create_customer_address.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_create_customer_address_graphql = (client_["gql"]`
    mutation(
        $city: String
        $company: String
        $country_code: CountryCodeEnum
        $default_billing: Boolean
        $default_shipping: Boolean
        $firstname: String
        $lastname: String
        $postcode: String
        $region: CustomerAddressRegionInput
        $street: [String]
        $telephone: String
    ) {
        createCustomerAddress(
            input: {
                city: $city
                company: $company
                country_code: $country_code
                default_billing: $default_billing
                default_shipping: $default_shipping
                firstname: $firstname
                lastname: $lastname
                postcode: $postcode
                region: $region
                street: $street
                telephone: $telephone
            }
        ) {
            id
            city
            company
            country_code
            default_billing
            default_shipping
            firstname
            lastname
            postcode
            region {
                region_code
            }
            street
            telephone
        }
    }
`);
// CONCATENATED MODULE: ./src/components/AddressForm/useAddressForm.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const useAddressForm = () => {
  const [userState, {
    dispatch
  }] = useUserContext();
  const {
    countries
  } = useCountries();
  const [inProgress, setInProgress] = Object(external_react_["useState"])(false);
  const [createCustomerAddress] = Object(client_["useMutation"])(mutation_create_customer_address_graphql);
  const [updateCustomerAddress] = Object(client_["useMutation"])(mutation_update_customer_address_graphql);
  let errorMessage = '';

  if (userState.addressFormError && userState.addressFormError.length > 0) {
    errorMessage = userState.addressFormError;
  }

  const findSavedAddress = address => {
    return address ? userState.currentUser.addresses.find(item => isSameAddress(item, address)) : null;
  };

  const getNewAddress = () => {
    return {
      city: '',
      firstname: '',
      lastname: '',
      postcode: '',
      region_code: '',
      save_in_address_book: false,
      street0: '',
      telephone: ''
    };
  };

  const getRegionCode = address => {
    return address.region && (address.region.region_code || address.region.code) || address.region_code;
  };

  const getRegionId = (countries, countryCode, regionCode) => {
    const region = countries && countries.filter(country => country.id == countryCode && country.available_regions).map(country => country.available_regions.find(region => region.code == regionCode));
    return region && region[0] ? region[0].id : null;
  };

  const handleSubmit = async formValues => {
    setInProgress(true);
    const variables = {
      region: {
        region_code: formValues.region_code,
        region_id: getRegionId(countries, formValues.country_code, formValues.region_code)
      },
      default_billing: formValues.default_shipping,
      ...formValues
    };
    let resetFields;

    if (formValues.default_shipping) {
      resetFields = {
        default_shipping: false,
        default_billing: false
      };
    }

    if (userState.updateAddress) {
      variables.id = userState.updateAddress.id;
      actions_updateAddress({
        updateCustomerAddress,
        variables,
        resetFields,
        dispatch
      });
    } else {
      createAddress({
        createCustomerAddress,
        variables,
        resetFields,
        dispatch
      });
    }

    setInProgress(false);
  };

  const handleCancel = () => {
    dispatch({
      type: 'clearAddressFormError'
    });

    if (userState.updateAddress) {
      dispatch({
        type: 'endEditingAddress'
      });
    }

    dispatch({
      type: 'closeAddressForm'
    });
  };

  const isSameAddress = (address1, address2) => {
    return address1.firstname === address2.firstname && address1.lastname === address2.lastname && address1.street.join(' ') === address2.street.join(' ') && address1.city === address2.city && address1.country_code === address2.country_code && getRegionCode(address1) === getRegionCode(address2) && address1.postcode === address2.postcode && address1.telephone === address2.telephone;
  };

  const parseAddress = (address, email) => {
    let result = { ...address,
      region_code: getRegionCode(address),
      country_code: address.country_code || address.country.code
    };

    if (email) {
      result.email = email;
    }

    return result;
  };

  const parseAddressFormValues = address => {
    const fields = ['city', 'default_shipping', 'email', 'firstname', 'lastname', 'postcode', 'region_code', 'country_code', 'region', 'save_in_address_book', 'street', 'telephone'];
    return fields.reduce((acc, key) => {
      if (address && key in address) {
        // Convert street from array to flat strings
        if (key === 'street') {
          address[key].forEach((v, i) => acc[`street${i}`] = v);
          return acc;
        } // Convert region from object to region_code string, region object returned in different graphql
        // endpoints has different shape, so we have to check both 'region_code' and 'code' to get the
        // value of the region code


        if (key === 'region') {
          acc['region_code'] = address[key].region_code || address[key].code;
          return acc;
        }

        acc[key] = address[key];
      }

      return acc;
    }, {});
  };

  return {
    countries,
    errorMessage,
    findSavedAddress,
    getNewAddress,
    getRegionCode,
    getRegionId,
    handleSubmit,
    handleCancel,
    inProgress,
    isSameAddress,
    parseAddress,
    parseAddressFormValues,
    updateAddress: userState.updateAddress
  };
};
// CONCATENATED MODULE: ./src/components/Checkout/checkoutContext.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const initialCheckoutState = {
  flowState: 'cart',
  order: null,
  editing: null,
  shippingAddress: null,
  billingAddress: null,
  billingAddressSameAsShippingAddress: true,
  isEditingNewAddress: false,
  shippingMethod: null,
  paymentMethod: null,
  braintreeToken: false
};
const checkoutReducer = (state, action) => {
  switch (action.type) {
    case 'beginCheckout':
      return { ...state,
        flowState: 'form'
      };

    case 'cancelCheckout':
      return { ...state,
        flowState: 'cart'
      };

    case 'placeOrder':
      return { ...state,
        order: action.order,
        flowState: 'receipt',
        editing: 'receipt'
      };

    case 'reset':
      return { ...initialCheckoutState
      };

    case 'setEditing':
      return { ...state,
        editing: action.editing
      };

    case 'endEditing':
      return { ...state,
        editing: null,
        isEditingNewAddress: false
      };

    case 'setShippingAddress':
      return { ...state,
        shippingAddress: action.shippingAddress,
        editing: null,
        isEditingNewAddress: false
      };

    case 'setShippingAddressEmail':
      return { ...state,
        shippingAddress: { ...state.shippingAddress,
          email: action.email
        }
      };

    case 'setBillingAddress':
      return { ...state,
        billingAddress: action.billingAddress,
        editing: null,
        isEditingNewAddress: false
      };

    case 'setBillingAddressEmail':
      return { ...state,
        billingAddress: { ...state.billingAddress,
          email: action.email
        }
      };

    case 'setBillingAddressSameAsShippingAddress':
      return { ...state,
        billingAddressSameAsShippingAddress: action.same
      };

    case 'setIsEditingNewAddress':
      return { ...state,
        isEditingNewAddress: action.editing
      };

    case 'setShippingMethod':
      return { ...state,
        shippingMethod: action.shippingMethod,
        editing: null
      };

    case 'setPaymentMethod':
      return { ...state,
        paymentMethod: action.paymentMethod,
        editing: null
      };

    case 'setBraintreeToken':
      return { ...state,
        braintreeToken: action.token
      };

    default:
      return state;
  }
};
const CheckoutContext = /*#__PURE__*/Object(external_react_["createContext"])();
const CheckoutProvider = props => {
  const reducer = props.reducer || checkoutReducer;
  const initialState = props.initialState || initialCheckoutState;
  return /*#__PURE__*/external_react_default.a.createElement(CheckoutContext.Provider, {
    value: Object(external_react_["useReducer"])(reducer, initialState)
  }, props.children);
};
CheckoutProvider.propTypes = {
  reducer: external_prop_types_["func"],
  initialState: Object(external_prop_types_["shape"])({
    flowState: external_prop_types_["string"].isRequired,
    order: external_prop_types_["object"],
    editing: external_prop_types_["string"],
    shippingAddress: external_prop_types_["object"],
    billingAddress: external_prop_types_["object"],
    billingAddressSameAsShippingAddress: external_prop_types_["bool"],
    isEditingNewAddress: external_prop_types_["bool"],
    shippingMethod: external_prop_types_["object"],
    paymentMethod: external_prop_types_["object"]
  })
};
const useCheckoutState = () => Object(external_react_["useContext"])(CheckoutContext);
// CONCATENATED MODULE: ./src/queries/mutation_set_shipping_address.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_set_shipping_address_graphql = (client_["gql"]`
    mutation(
        $cartId: String!
        $city: String!
        $company: String
        $country_code: String!
        $firstname: String!
        $lastname: String!
        $postcode: String
        $region_code: String
        $save_in_address_book: Boolean
        $street: [String]!
        $telephone: String!
    ) {
        setShippingAddressesOnCart(
            input: {
                cart_id: $cartId
                shipping_addresses: [
                    {
                        address: {
                            city: $city
                            company: $company
                            country_code: $country_code
                            firstname: $firstname
                            lastname: $lastname
                            postcode: $postcode
                            region: $region_code
                            save_in_address_book: $save_in_address_book
                            street: $street
                            telephone: $telephone
                        }
                    }
                ]
            }
        ) {
            cart {
                shipping_addresses {
                    available_shipping_methods {
                        carrier_code
                        carrier_title
                        method_code
                        method_title
                    }
                    city
                    company
                    country {
                        code
                    }
                    firstname
                    lastname
                    postcode
                    region {
                        code
                    }
                    street
                    telephone
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/components/Checkout/useCart.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/









/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

/* harmony default export */ var useCart = (() => {
  const {
    parseAddress,
    isSameAddress
  } = useAddressForm();
  const [{
    cartId,
    cart
  }, cartDispatch] = useCartState();
  const [{
    shippingAddress
  }, dispatch] = useCheckoutState();
  const [{
    currentUser,
    isSignedIn
  }] = useUserContext();
  const [setShippingAddressesOnCart] = Object(client_["useMutation"])(mutation_set_shipping_address_graphql);
  const cartDetailsQuery = useAwaitQuery(query_cart_details_graphql);
  const mse = useStorefrontEvents();

  const beginCheckout = async () => {
    cartDispatch({
      type: 'beginLoading'
    });

    if (cart && (cart.shipping_addresses && cart.shipping_addresses[0] || cart.is_virtual && cart.billing_address)) {
      await getCartDetails({
        cartDetailsQuery,
        cartId,
        dispatch: cartDispatch
      });
      const cartShippingAddress = cart.shipping_addresses && cart.shipping_addresses[0];
      const cartBillingAddress = cart.billing_address;

      if (cartShippingAddress && cartBillingAddress && !isSameAddress(cartShippingAddress, cartBillingAddress)) {
        dispatch({
          type: 'setBillingAddressSameAsShippingAddress',
          same: false
        });
      }
    } else if (isSignedIn && currentUser.addresses.length > 0 && cart && !cart.is_virtual && !shippingAddress) {
      const address = currentUser.addresses.find(address => address.default_shipping) || currentUser.addresses[0];
      const addressVariables = {
        variables: {
          cartId,
          country_code: 'US',
          ...parseAddress(address)
        }
      };
      await setShippingAddressesOnCart(addressVariables);
      await getCartDetails({
        cartDetailsQuery,
        dispatch: cartDispatch,
        cartId
      });
    }

    mse && mse.publish.initiateCheckout();
    cartDispatch({
      type: 'endLoading'
    });
    dispatch({
      type: 'beginCheckout'
    });
  };

  return {
    beginCheckout
  };
});
// CONCATENATED MODULE: ./src/components/Checkout/checkoutButton.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CheckoutButton = ({
  disabled,
  onClick
}) => {
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "high",
    disabled: disabled,
    onClick: onClick
  }, /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
    src: external_react_feather_["Lock"],
    size: 16
  }), /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "checkout:checkout",
    defaultMessage: [{
      "type": 0,
      "value": "Checkout"
    }]
  })));
};

CheckoutButton.propTypes = {
  disabled: external_prop_types_["bool"],
  onClick: external_prop_types_["func"]
};
/* harmony default export */ var checkoutButton = (CheckoutButton);
// EXTERNAL MODULE: ./src/components/Checkout/cart.css
var Checkout_cart = __webpack_require__(63);
var cart_default = /*#__PURE__*/__webpack_require__.n(Checkout_cart);

// CONCATENATED MODULE: ./src/components/Checkout/cart.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Cart = props => {
  const {
    ready,
    submitting
  } = props;
  const {
    beginCheckout
  } = useCart();
  const disabled = submitting || !ready;
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: cart_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement(checkoutButton, {
    disabled: disabled,
    onClick: beginCheckout
  }));
};

Cart.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"]
  }),
  ready: external_prop_types_["bool"].isRequired,
  submitting: external_prop_types_["bool"].isRequired
};
/* harmony default export */ var components_Checkout_cart = (Cart);
// CONCATENATED MODULE: ./src/components/Checkout/paymentMethodSummary.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const PaymentMethodSummary = props => {
  const {
    classes
  } = props;
  const [{
    paymentMethod
  }] = useCheckoutState();
  const intl = Object(external_react_intl_["useIntl"])();

  if (!paymentMethod) {
    return /*#__PURE__*/external_react_default.a.createElement("span", {
      className: classes.informationPrompt
    }, intl.formatMessage({
      id: "checkout:add-billing-information",
      defaultMessage: [{
        "type": 0,
        "value": "Add Billing Information"
      }]
    }));
  }

  return /*#__PURE__*/external_react_default.a.createElement(external_react_["Fragment"], null, /*#__PURE__*/external_react_default.a.createElement("strong", {
    className: classes.paymentDisplayPrimary
  }, paymentMethod.title), /*#__PURE__*/external_react_default.a.createElement("br", null), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: classes.paymentDisplaySecondary
  }, paymentMethod.description));
};

PaymentMethodSummary.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    informationPrompt: external_prop_types_["string"],
    paymentDisplayPrimary: external_prop_types_["string"],
    paymentDisplaySecondary: external_prop_types_["string"]
  })
};
/* harmony default export */ var paymentMethodSummary = (PaymentMethodSummary);
// CONCATENATED MODULE: ./src/components/Checkout/shippingAddressSummary.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const ShippingAddressSummary = props => {
  const {
    classes
  } = props;
  const [{
    shippingAddress
  }] = useCheckoutState();
  const intl = Object(external_react_intl_["useIntl"])();

  if (!shippingAddress) {
    return /*#__PURE__*/external_react_default.a.createElement("span", {
      className: classes.informationPrompt
    }, intl.formatMessage({
      id: "checkout:add-shipping-information",
      defaultMessage: [{
        "type": 0,
        "value": "Add Shipping Information"
      }]
    }));
  }

  const name = `${shippingAddress.firstname} ${shippingAddress.lastname}`;
  const street = shippingAddress.street.join(' ');
  return /*#__PURE__*/external_react_default.a.createElement(external_react_["Fragment"], null, /*#__PURE__*/external_react_default.a.createElement("strong", null, name), /*#__PURE__*/external_react_default.a.createElement("br", null), /*#__PURE__*/external_react_default.a.createElement("span", null, street));
};

ShippingAddressSummary.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    informationPrompt: external_prop_types_["string"]
  })
};
/* harmony default export */ var shippingAddressSummary = (ShippingAddressSummary);
// CONCATENATED MODULE: ./src/components/Checkout/shippingMethodSummary.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const ShippingMethodSummary = props => {
  const {
    classes
  } = props;
  const [{
    shippingMethod
  }] = useCheckoutState();
  const intl = Object(external_react_intl_["useIntl"])();

  if (!shippingMethod) {
    return /*#__PURE__*/external_react_default.a.createElement("span", {
      className: classes.informationPrompt
    }, intl.formatMessage({
      id: "checkout:specify-shipping-method",
      defaultMessage: [{
        "type": 0,
        "value": "Specify Shipping Method"
      }]
    }));
  }

  return /*#__PURE__*/external_react_default.a.createElement(external_react_["Fragment"], null, /*#__PURE__*/external_react_default.a.createElement("strong", null, shippingMethod.carrier_title));
};

ShippingMethodSummary.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    informationPrompt: external_prop_types_["string"]
  })
};
/* harmony default export */ var shippingMethodSummary = (ShippingMethodSummary);
// EXTERNAL MODULE: ./src/components/Checkout/section.css
var Checkout_section = __webpack_require__(23);
var Checkout_section_default = /*#__PURE__*/__webpack_require__.n(Checkout_section);

// CONCATENATED MODULE: ./src/components/Checkout/section.js
function section_extends() { section_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return section_extends.apply(this, arguments); }

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





const editIconAttrs = {
  color: 'black',
  width: 18
};
const EDIT_ICON = /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
  src: external_react_feather_["Edit2"],
  attrs: editIconAttrs
});
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const section_Section = props => {
  const {
    children,
    label,
    showEditIcon = false,
    ...restProps
  } = props;
  const icon = showEditIcon ? EDIT_ICON : null;
  return /*#__PURE__*/external_react_default.a.createElement("button", section_extends({
    className: Checkout_section_default.a.root
  }, restProps), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: Checkout_section_default.a.content
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: Checkout_section_default.a.label
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, label)), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: Checkout_section_default.a.summary
  }, children), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: Checkout_section_default.a.icon
  }, icon)));
};

section_Section.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    content: external_prop_types_["string"],
    icon: external_prop_types_["string"],
    label: external_prop_types_["string"],
    root: external_prop_types_["string"],
    summary: external_prop_types_["string"]
  }),
  label: external_prop_types_["node"],
  showEditIcon: external_prop_types_["bool"]
};
/* harmony default export */ var components_Checkout_section = (section_Section);
// CONCATENATED MODULE: ./src/queries/mutation_place_order.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_place_order_graphql = (client_["gql"]`
    mutation($cartId: String!) {
        placeOrder(input: { cart_id: $cartId }) {
            order {
                order_id
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/queries/query_customer_cart.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var query_customer_cart_graphql = (client_["gql"]`
    query {
        customerCart {
            id
        }
    }
`);
// CONCATENATED MODULE: ./src/components/Checkout/useOverview.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/










/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

/* harmony default export */ var useOverview = (() => {
  const [{
    shippingAddress,
    billingAddress,
    billingAddressSameAsShippingAddress,
    shippingMethod,
    paymentMethod
  }, checkoutDispatch] = useCheckoutState();
  const [{
    cart,
    cartId
  }, cartDispatch] = useCartState();
  const [{
    isSignedIn
  }, {
    resetCustomerCart
  }] = useUserContext();
  const fetchCustomerCartQuery = useAwaitQuery(query_customer_cart_graphql);
  const {
    findSavedAddress
  } = useAddressForm();
  const [placeOrder] = Object(client_["useMutation"])(mutation_place_order_graphql);
  const [inProgress, setInProgress] = Object(external_react_["useState"])(false);
  const mse = useStorefrontEvents();

  const editShippingAddress = address => {
    if (!findSavedAddress(address)) {
      checkoutDispatch({
        type: 'setIsEditingNewAddress',
        editing: true
      });
    }

    checkoutDispatch({
      type: 'setEditing',
      editing: 'address'
    });
  };

  const editBillingInformation = address => {
    if (!findSavedAddress(address) || billingAddressSameAsShippingAddress) {
      checkoutDispatch({
        type: 'setIsEditingNewAddress',
        editing: true
      });
    }

    checkoutDispatch({
      type: 'setEditing',
      editing: 'paymentMethod'
    });
  };

  const submitOrder = async () => {
    setInProgress(true); // we set the progress to `false` *before* dispatching because the component
    // will be unmounted and the `setInProgress` call will trigger a React warning

    try {
      const {
        data
      } = await placeOrder({
        variables: {
          cartId
        }
      });
      checkoutDispatch({
        type: 'placeOrder',
        order: data.placeOrder.order
      });
      const {
        placeOrder: {
          order: {
            order_id
          }
        }
      } = data;
      const {
        email,
        applied_coupon,
        prices: {
          subtotal_excluding_tax: {
            value: subtotalExcludingTax
          },
          subtotal_including_tax: {
            value: subtotalIncludingTax
          },
          grand_total: {
            currency,
            value: priceTotal
          }
        },
        selected_payment_method: {
          code: paymentCode,
          title: paymentName
        },
        items
      } = cart;
      pushEvent('cif:placeOrder', {
        'xdm:purchaseOrderNumber': order_id,
        'xdm:currencyCode': currency,
        'xdm:priceTotal': priceTotal,
        'xdm:payments': [{
          'xdm:paymentAmount': priceTotal,
          'xdm:paymentType': paymentCode,
          'xdm:currencyCode': currency
        }],
        'xdm:products': await Promise.all(items.map(async item => {
          const {
            product: {
              sku
            },
            quantity
          } = item;
          return {
            '@id': await generateDataLayerId('product', sku),
            'xdm:SKU': sku,
            'xdm:quantity': quantity
          };
        }))
      });
      mse && mse.context.setOrder({
        appliedCouponCode: applied_coupon ? applied_coupon.code : '',
        email: email,
        grandTotal: priceTotal,
        orderId: order_id,
        otherTax: priceTotal - subtotalIncludingTax,
        paymentMethodCode: paymentCode,
        paymentMethodName: paymentName,
        salesTax: subtotalIncludingTax - subtotalExcludingTax,
        subtotalExcludingTax: subtotalExcludingTax,
        subtotalIncludingTax: subtotalIncludingTax
      });
      mse && mse.publish.placeOrder(); // if user is signed in reset the cart

      if (isSignedIn) {
        resetCustomerCart(fetchCustomerCartQuery);
      }

      cartDispatch({
        type: 'reset'
      });
      return data;
    } catch (error) {
      console.error(error);
      cartDispatch({
        type: 'error',
        error: error.toString()
      });
    } finally {
      setInProgress(false);
    }
  };

  return [{
    shippingAddress,
    billingAddress,
    shippingMethod,
    paymentMethod,
    inProgress,
    cart
  }, {
    editShippingAddress,
    editBillingInformation,
    placeOrder: submitOrder,
    checkoutDispatch
  }];
});
// CONCATENATED MODULE: ./src/components/Checkout/overview.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/











/**
 * The Overview component renders summaries for each section of the editable
 * form.
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Overview = props => {
  const {
    classes
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  const [{
    billingAddress,
    shippingAddress,
    shippingMethod,
    paymentMethod,
    cart,
    inProgress
  }, {
    editShippingAddress,
    editBillingInformation,
    placeOrder,
    checkoutDispatch
  }] = useOverview();
  const ready = cart.is_virtual && paymentMethod || shippingAddress && paymentMethod && shippingMethod;

  if (inProgress) {
    return /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, {
      message: "Placing order"
    });
  }

  const submitOrder = async () => {
    await placeOrder(cart.id);
  };

  return /*#__PURE__*/external_react_default.a.createElement(external_react_["Fragment"], null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: classes.body
  }, !cart.is_virtual && /*#__PURE__*/external_react_default.a.createElement(components_Checkout_section, {
    label: intl.formatMessage({
      id: "checkout:ship-to",
      defaultMessage: [{
        "type": 0,
        "value": "Ship To"
      }]
    }),
    onClick: () => editShippingAddress(shippingAddress),
    showEditIcon: !!shippingAddress
  }, /*#__PURE__*/external_react_default.a.createElement(shippingAddressSummary, {
    classes: classes
  })), /*#__PURE__*/external_react_default.a.createElement(components_Checkout_section, {
    label: intl.formatMessage({
      id: "checkout:pay-with",
      defaultMessage: [{
        "type": 0,
        "value": "Pay With"
      }]
    }),
    onClick: () => editBillingInformation(billingAddress),
    showEditIcon: !!paymentMethod,
    disabled: !cart.is_virtual && !shippingAddress
  }, /*#__PURE__*/external_react_default.a.createElement(paymentMethodSummary, {
    classes: classes
  })), !cart.is_virtual && /*#__PURE__*/external_react_default.a.createElement(components_Checkout_section, {
    label: intl.formatMessage({
      id: "checkout:use",
      defaultMessage: [{
        "type": 0,
        "value": "Use"
      }]
    }),
    onClick: () => checkoutDispatch({
      type: 'setEditing',
      editing: 'shippingMethod'
    }),
    showEditIcon: !!shippingMethod,
    disabled: !shippingAddress
  }, /*#__PURE__*/external_react_default.a.createElement(shippingMethodSummary, {
    classes: classes
  })), /*#__PURE__*/external_react_default.a.createElement(components_Checkout_section, {
    label: intl.formatMessage({
      id: "checkout:total",
      defaultMessage: [{
        "type": 0,
        "value": "TOTAL"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    currencyCode: cart.prices.grand_total.currency,
    value: cart.prices.grand_total.value || 0
  }), /*#__PURE__*/external_react_default.a.createElement("br", null), /*#__PURE__*/external_react_default.a.createElement("span", null, cart.items.length, " Items"))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: classes.footer
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    onClick: () => checkoutDispatch({
      type: 'cancelCheckout'
    })
  }, ' ', intl.formatMessage({
    id: "checkout:back-to-cart",
    defaultMessage: [{
      "type": 0,
      "value": "Back to cart"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "high",
    disabled: !ready,
    onClick: submitOrder
  }, intl.formatMessage({
    id: "checkout:confirm-order",
    defaultMessage: [{
      "type": 0,
      "value": "Confirm Order"
    }]
  }))));
};

Overview.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    body: external_prop_types_["string"],
    footer: external_prop_types_["string"]
  })
};
/* harmony default export */ var overview = (Overview);
// EXTERNAL MODULE: ./src/components/Checkout/form.css
var Checkout_form = __webpack_require__(47);
var form_default = /*#__PURE__*/__webpack_require__.n(Checkout_form);

// EXTERNAL MODULE: ./src/components/AddressForm/addressForm.css
var addressForm = __webpack_require__(5);
var addressForm_default = /*#__PURE__*/__webpack_require__.n(addressForm);

// CONCATENATED MODULE: ./src/utils/formValidators.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
const SUCCESS = undefined;
const hasLengthAtLeast = (value, values, minimumLength) => {
  if (!value || value.length < minimumLength) {
    return `Must contain at least ${minimumLength} character(s).`;
  }

  return SUCCESS;
};
const hasLengthAtMost = (value, values, maximumLength) => {
  if (value && value.length > maximumLength) {
    return `Must not exceed ${maximumLength} character(s).`;
  }

  return SUCCESS;
};
const hasLengthExactly = (value, values, length) => {
  if (value && value.length !== length) {
    return `Must contain exactly ${length} character(s).`;
  }

  return SUCCESS;
};
const isRequired = value => {
  return (value || '').trim() ? SUCCESS : 'The field is required.';
};
const validateEmail = value => {
  const regex = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return regex.test(value) ? SUCCESS : 'Please enter a valid email address (Ex: johndoe@domain.com).';
};
const validateRegionCode = (value, values, countries) => {
  const selectedCountry = values.countryCode;

  if (selectedCountry !== 'US') {
    // not validating the state for countries other than US
    // this is actually more complex since on the Magento side
    // you can define this in the store configuration
    // ...but we don't read the store configuration now.
    return SUCCESS;
  }

  if (!value || value.length === 0) {
    return 'This field is mandatory';
  }

  let lengthValidation = hasLengthExactly(value, values, 2);

  if (lengthValidation) {
    return lengthValidation;
  }

  const country = countries.find(({
    id
  }) => id === 'US');
  const {
    available_regions: regions
  } = country;

  if (!(Array.isArray(regions) && regions.length)) {
    return 'Country "US" does not contain any available regions.';
  }

  const region = regions.find(({
    code
  }) => code === value);

  if (!region) {
    return `State "${value}" is not an valid state abbreviation.`;
  }

  return SUCCESS;
};
const validatePassword = value => {
  const count = {
    lower: 0,
    upper: 0,
    digit: 0,
    special: 0
  };

  for (const char of value) {
    if (/[a-z]/.test(char)) count.lower++;else if (/[A-Z]/.test(char)) count.upper++;else if (/\d/.test(char)) count.digit++;else if (/\S/.test(char)) count.special++;
  }

  if (Object.values(count).filter(Boolean).length < 3) {
    return 'A password must contain at least 3 of the following: lowercase, uppercase, digits, special characters.';
  }

  return SUCCESS;
};
const validateConfirmPassword = (value, values, passwordKey = 'password') => {
  return value === values[passwordKey] ? SUCCESS : 'Passwords must match.';
};
const isNotEqualToField = (value, values, otherField) => {
  return value !== values[otherField] ? SUCCESS : `${otherField} must be different`;
};
// CONCATENATED MODULE: ./src/utils/combineValidators.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/**
 * The function purpose is to group validation callbacks into a chain within single callback function.
 *
 * The single callback function should be passed as `validation` prop to an input component. It's being
 * called by the React Controller on a form submit.
 * The `callbacks` param is the array contains validators. Each validator should be either function or array. In case of a
 * validator is a function it is called the same way as React Controller does, with a field `value` and a form `values` params. If
 * the validator is an array, this means that it is extended validator which requires additional param for configuration.
 * The first index of that array should be a extended validator function, the second index is extended param, which is needed for
 * that function. So the function is called with three params on the form submit, with a field `value`, a form `values`
 * and an `extended param`.
 *
 * Example usage of the function:
 *
 * <input validate={combine([
 * foo
 * ])} .../>
 *
 * foo - validation function
 * It will be called on form submitting within chain as:
 * `foo(value, values)`
 *
 * Example usage of the function with extended callback:
 *
 * <input validate={combine([
 * [foo, bar]
 * ])} .../>
 *
 * foo - extended validator
 * bar - additional param
 * It will be called on form submitting within chain as:
 * `foo(value, values, bar)`
 *
 * Each callback being called one after another, according to their index in callbacks array, if one item returned the error
 * message, validation is failed, and rest validator are not supposed to be called.
 *
 * @param {Array} callbacks
 * @return {function(value, values): *}
 */
/* harmony default export */ var combineValidators = (callbacks => {
  if (callbacks == null || !Array.isArray(callbacks)) {
    throw new Error('Expected `callbacks` to be array.');
  }

  return (value, values) => {
    let result = null;

    for (let i = 0; i < callbacks.length; i++) {
      const callback = callbacks[i];

      if (callback == null || !Array.isArray(callback) && typeof callback !== 'function') {
        throw new Error('Expected `callbacks[' + i + ']` to be array or function.');
      }

      if (Array.isArray(callback)) {
        const [extendedCallback, extendedParam] = callback;

        if (typeof extendedCallback !== 'function') {
          throw new Error('Expected `callbacks[' + i + '][0]` to be function.');
        }

        result = extendedCallback(value, values, extendedParam);
      } else {
        result = callback(value, values);
      }

      if (result) {
        break;
      }
    }

    return result;
  };
});
// CONCATENATED MODULE: ./src/components/AddressForm/useAddressSelect.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const useAddressSelect = (props = {
  initialAddress: undefined
}) => {
  const {
    initialAddress
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  const {
    findSavedAddress,
    getNewAddress,
    parseAddress,
    parseAddressFormValues
  } = useAddressForm();
  const [, dispatch] = useCheckoutState();
  const [{
    currentUser
  }] = useUserContext();

  const parseInitialAddressSelectValue = address => {
    let initialValue = 0; // '0' is the value of option item 'New Address' in address select

    const foundAddress = findSavedAddress(address);
    return foundAddress ? foundAddress.id : initialValue;
  };

  const initialAddressId = initialAddress ? parseInitialAddressSelectValue(initialAddress) : 0;
  const [selectedAddressId, setSelectedAddressId] = Object(external_react_["useState"])(initialAddressId);
  const addressSelectNewAddressItem = {
    label: intl.formatMessage({
      id: "checkout:address-form-address-select-new-address",
      defaultMessage: [{
        "type": 0,
        "value": "New Address"
      }]
    }),
    value: 0
  };
  const addressSelectItems = currentUser.addresses.map(address => {
    return {
      label: address.street.join(' '),
      value: address.id
    };
  });
  addressSelectItems.unshift(addressSelectNewAddressItem);

  const handleChangeAddressSelectInCheckout = (value, addressFormApi) => {
    const newAddressItemValue = 0;
    setSelectedAddressId(value);

    if (newAddressItemValue == value) {
      // clear the values of the form fields if the current select option item is 'New Address'
      addressFormApi.setValues(getNewAddress());
      dispatch({
        type: 'setIsEditingNewAddress',
        editing: true
      });
      return;
    }

    const address = currentUser.addresses.find(address => address.id == value); // parse the "GraphQL format" address and normalize the properties (i.e. add the region_code on the same level as the rest of the props)

    const parsedAddress = parseAddress(address); // update form values by using formApi passed from <AddressForm> component, this is due to the fact that
    // this is the proposed way to update values of fields in 'informed' form library

    const parsedFormValues = parseAddressFormValues(parsedAddress);
    addressFormApi.setValues(parsedFormValues);
  };

  return {
    addressSelectItems,
    selectedAddressId,
    handleChangeAddressSelectInCheckout,
    parseInitialAddressSelectValue
  };
};
// EXTERNAL MODULE: ./src/components/AddressForm/addressSelect.css
var addressSelect = __webpack_require__(64);
var addressSelect_default = /*#__PURE__*/__webpack_require__.n(addressSelect);

// CONCATENATED MODULE: ./src/components/AddressForm/addressSelect.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AddressSelect = props => {
  const {
    initialValue,
    onValueChange
  } = props;
  const {
    addressSelectItems
  } = useAddressSelect();
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressSelect_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement(components_Select_select, {
    items: addressSelectItems,
    field: "address_select",
    initialValue: initialValue,
    onValueChange: onValueChange
  }));
};

AddressSelect.propTypes = {
  initialValue: external_prop_types_["number"],
  onValueChange: external_prop_types_["func"]
};
/* harmony default export */ var AddressForm_addressSelect = (AddressSelect);
// EXTERNAL MODULE: ./src/components/Checkbox/checkbox.css
var Checkbox_checkbox = __webpack_require__(29);
var checkbox_default = /*#__PURE__*/__webpack_require__.n(Checkbox_checkbox);

// CONCATENATED MODULE: ./src/components/Checkbox/checkbox.js
function checkbox_extends() { checkbox_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return checkbox_extends.apply(this, arguments); }

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Checkbox = props => {
  const {
    fieldState,
    id,
    label,
    message,
    ...rest
  } = props;
  const {
    value: checked
  } = fieldState;
  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement("label", {
    className: checkbox_default.a.root,
    htmlFor: id
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: checkbox_default.a.icon
  }, checked && /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
    src: external_react_feather_["Check"],
    size: 18
  })), /*#__PURE__*/external_react_default.a.createElement(external_informed_["BasicCheckbox"], checkbox_extends({}, rest, {
    className: checkbox_default.a.input,
    fieldState: fieldState,
    id: id
  })), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: checkbox_default.a.label
  }, label)), /*#__PURE__*/external_react_default.a.createElement(components_Field_message, {
    fieldState: fieldState
  }, message));
};

Checkbox.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    icon: external_prop_types_["string"],
    input: external_prop_types_["string"],
    label: external_prop_types_["string"],
    message: external_prop_types_["string"],
    root: external_prop_types_["string"]
  }),
  field: external_prop_types_["string"].isRequired,
  fieldState: Object(external_prop_types_["shape"])({
    value: external_prop_types_["bool"]
  }).isRequired,
  id: external_prop_types_["string"],
  label: external_prop_types_["node"].isRequired,
  message: external_prop_types_["node"]
};
/* harmony default export */ var components_Checkbox_checkbox = (Object(external_informed_["asField"])(Checkbox));
// CONCATENATED MODULE: ./src/components/Checkbox/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/TextInput/textInput.css
var textInput = __webpack_require__(65);
var textInput_default = /*#__PURE__*/__webpack_require__.n(textInput);

// CONCATENATED MODULE: ./src/components/TextInput/textInput.js
function textInput_extends() { textInput_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return textInput_extends.apply(this, arguments); }

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const TextInput = props => {
  const {
    after,
    before,
    fieldState,
    message,
    ...rest
  } = props;
  return /*#__PURE__*/external_react_default.a.createElement(external_react_["Fragment"], null, /*#__PURE__*/external_react_default.a.createElement(Field_fieldIcons, {
    after: after,
    before: before
  }, /*#__PURE__*/external_react_default.a.createElement(external_informed_["BasicText"], textInput_extends({}, rest, {
    fieldState: fieldState,
    className: textInput_default.a.input
  }))), /*#__PURE__*/external_react_default.a.createElement(components_Field_message, {
    fieldState: fieldState
  }, message));
};

TextInput.propTypes = {
  after: external_prop_types_["node"],
  before: external_prop_types_["node"],
  classes: Object(external_prop_types_["shape"])({
    input: external_prop_types_["string"]
  }),
  fieldState: Object(external_prop_types_["shape"])({
    value: external_prop_types_["string"]
  }),
  message: external_prop_types_["node"]
};
/* harmony default export */ var TextInput_textInput = (Object(external_informed_["asField"])(TextInput));
// CONCATENATED MODULE: ./src/components/TextInput/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/components/AddressForm/addressForm.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/














/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AddressForm = props => {
  const {
    parseAddressFormValues
  } = useAddressForm({});
  const [submitting, setIsSubmitting] = Object(external_react_["useState"])(false);
  const {
    cancel,
    countries,
    formErrorMessage,
    formHeading,
    isAddressInvalid,
    invalidAddressMessage,
    initialAddressSelectValue,
    initialValues,
    onAddressSelectValueChange,
    showAddressSelect,
    showDefaultAddressCheckbox,
    showEmailInput,
    showSaveInAddressBookCheckbox,
    submit,
    submitButtonLabel
  } = props;
  const validationMessage = isAddressInvalid ? invalidAddressMessage : null;
  const errorMessage = formErrorMessage ? formErrorMessage : null;
  const intl = Object(external_react_intl_["useIntl"])();
  const displayCountries = Object(external_react_["useMemo"])(() => {
    if (!countries || countries.length === 0) {
      return [];
    }

    return countries.map(country => {
      return {
        label: country['full_name_locale'],
        value: country['id']
      };
    });
  }, [countries]);
  const handleSubmit = Object(external_react_["useCallback"])(values => {
    if (!values['region_code'] || values['region_code'].length === 0) {
      // add an empty `region_code` value since
      // the form doesn't provide one if you leave the field empty
      values['region_code'] = '';
    }

    setIsSubmitting(true); // Convert street back to array

    submit({ ...values,
      street: [values.street0],
      street0: undefined
    });
  }, [submit]);

  const Regions = () => {
    const {
      value: countryCode
    } = Object(external_informed_["useFieldState"])('country_code');
    const country = countries.find(({
      id
    }) => countryCode === id);

    if (!country || !country.available_regions) {
      return /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
        id: addressForm_default.a.region_code,
        field: "region_code"
      });
    } // US do not have regions with unique codes


    const uniqueRegions = [...new Set(country.available_regions.map(item => item.code))];
    const displayRegions = uniqueRegions.map(id => {
      let entry = country.available_regions.find(({
        code
      }) => code === id);
      return {
        value: entry.code,
        label: entry.name
      };
    });
    return /*#__PURE__*/external_react_default.a.createElement(components_Select_select, {
      id: addressForm_default.a.region_code,
      field: "region_code",
      items: [{
        value: '',
        label: ''
      }, ...displayRegions],
      validate: isRequired
    });
  };

  return /*#__PURE__*/external_react_default.a.createElement(external_informed_["Form"], {
    className: addressForm_default.a.root,
    initialValues: parseAddressFormValues(initialValues),
    onSubmit: handleSubmit
  }, ({
    formApi
  }) => /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.body
  }, /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: addressForm_default.a.heading
  }, formHeading), showAddressSelect && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.address_select
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "checkout:address-use-saved-address",
      defaultMessage: [{
        "type": 0,
        "value": "Use Saved Address"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(AddressForm_addressSelect, {
    initialValue: initialAddressSelectValue,
    onValueChange: value => onAddressSelectValueChange(value, formApi)
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.firstname
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    htmlFor: addressForm_default.a.firstname,
    label: intl.formatMessage({
      id: "checkout:address-firstname",
      defaultMessage: [{
        "type": 0,
        "value": "First Name"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: addressForm_default.a.firstname,
    field: "firstname",
    validateOnBlur: true,
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.lastname
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    htmlFor: addressForm_default.a.lastname,
    label: intl.formatMessage({
      id: "checkout:address-lastname",
      defaultMessage: [{
        "type": 0,
        "value": "Last Name"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: addressForm_default.a.lastname,
    field: "lastname",
    validateOnBlur: true,
    validate: isRequired
  }))), showEmailInput && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.email
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    htmlFor: addressForm_default.a.email,
    label: intl.formatMessage({
      id: "checkout:address-email",
      defaultMessage: [{
        "type": 0,
        "value": "E-Mail"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: addressForm_default.a.email,
    field: "email",
    validateOnBlur: true,
    validate: combineValidators([isRequired, validateEmail])
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.street0
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    htmlFor: addressForm_default.a.street0,
    label: intl.formatMessage({
      id: "checkout:address-street",
      defaultMessage: [{
        "type": 0,
        "value": "Street"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: addressForm_default.a.street0,
    field: "street0",
    validateOnBlur: true,
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.city
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    htmlFor: addressForm_default.a.city,
    label: intl.formatMessage({
      id: "checkout:address-city",
      defaultMessage: [{
        "type": 0,
        "value": "City"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: addressForm_default.a.city,
    field: "city",
    validateOnBlur: true,
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.country
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    htmlFor: addressForm_default.a.country,
    label: intl.formatMessage({
      id: "checkout:country",
      defaultMessage: [{
        "type": 0,
        "value": "Country"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(components_Select_select, {
    id: addressForm_default.a.country,
    field: "country_code",
    items: displayCountries,
    onChange: () => {
      // reset the region_code field when we change the country
      // otherwise the previous selected version would still be in the form state
      formApi.setValue('region_code', '');
    }
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.region_code
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    htmlFor: addressForm_default.a.region_code,
    label: intl.formatMessage({
      id: "checkout:address-state",
      defaultMessage: [{
        "type": 0,
        "value": "State"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(Regions, null))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.postcode
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    htmlFor: addressForm_default.a.postcode,
    label: intl.formatMessage({
      id: "checkout:address-postcode",
      defaultMessage: [{
        "type": 0,
        "value": "ZIP"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: addressForm_default.a.postcode,
    field: "postcode",
    validateOnBlur: true,
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.telephone
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    htmlFor: addressForm_default.a.telephone,
    label: intl.formatMessage({
      id: "checkout:address-phone",
      defaultMessage: [{
        "type": 0,
        "value": "Phone"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: addressForm_default.a.telephone,
    field: "telephone",
    validateOnBlur: true,
    validate: isRequired
  }))), showDefaultAddressCheckbox && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.default_shipping
  }, /*#__PURE__*/external_react_default.a.createElement(components_Checkbox_checkbox, {
    id: addressForm_default.a.default_shipping,
    label: intl.formatMessage({
      id: "checkout:address-default-address",
      defaultMessage: [{
        "type": 0,
        "value": "Make my default address"
      }]
    }),
    field: "default_shipping"
  })), showSaveInAddressBookCheckbox && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.save_in_address_book
  }, /*#__PURE__*/external_react_default.a.createElement(components_Checkbox_checkbox, {
    id: addressForm_default.a.save_in_address_book,
    label: intl.formatMessage({
      id: "checkout:address-save-in-address-book",
      defaultMessage: [{
        "type": 0,
        "value": "Save in address book"
      }]
    }),
    field: "save_in_address_book"
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.validation
  }, validationMessage), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.error
  }, errorMessage)), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressForm_default.a.footer
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    onClick: cancel
  }, intl.formatMessage({
    id: "common:cancel",
    defaultMessage: [{
      "type": 0,
      "value": "Cancel"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    type: "submit",
    priority: "high",
    disabled: submitting
  }, submitButtonLabel))));
};

AddressForm.propTypes = {
  cancel: external_prop_types_["func"].isRequired,
  classes: Object(external_prop_types_["shape"])({
    body: external_prop_types_["string"],
    button: external_prop_types_["string"],
    city: external_prop_types_["string"],
    default_shipping: external_prop_types_["string"],
    email: external_prop_types_["string"],
    firstname: external_prop_types_["string"],
    footer: external_prop_types_["string"],
    heading: external_prop_types_["string"],
    lastname: external_prop_types_["string"],
    postcode: external_prop_types_["string"],
    root: external_prop_types_["string"],
    region_code: external_prop_types_["string"],
    street0: external_prop_types_["string"],
    telephone: external_prop_types_["string"],
    validation: external_prop_types_["string"]
  }),
  countries: external_prop_types_["array"],
  formErrorMessage: external_prop_types_["string"],
  formHeading: external_prop_types_["string"],
  invalidAddressMessage: external_prop_types_["string"],
  initialAddressSelectValue: external_prop_types_["number"],
  initialValues: external_prop_types_["object"],
  isAddressInvalid: external_prop_types_["bool"],
  onAddressSelectValueChange: external_prop_types_["func"],
  showAddressSelect: external_prop_types_["bool"],
  showDefaultAddressCheckbox: external_prop_types_["bool"],
  showEmailInput: external_prop_types_["bool"],
  showSaveInAddressBookCheckbox: external_prop_types_["bool"],
  submit: external_prop_types_["func"].isRequired,
  submitting: external_prop_types_["bool"],
  submitButtonLabel: external_prop_types_["string"]
};
AddressForm.defaultProps = {
  initialAddressSelectValue: null,
  initialValues: {},
  showAddressSelect: false,
  showDefaultAddressCheckbox: false,
  showEmailInput: false,
  showSaveInAddressBookCheckbox: false
};
/* harmony default export */ var AddressForm_addressForm = (AddressForm);
/*
const mockAddress = {
    country_id: 'US',
    firstname: 'Veronica',
    lastname: 'Costello',
    street: ['6146 Honey Bluff Parkway'],
    city: 'Calder',
    postcode: '49628-7978',
    region_code: 'MI',
    region: {
        region_code: 'MI'
    },
    telephone: '(555) 229-3326',
    email: 'veronica@example.com'
};
*/
// CONCATENATED MODULE: ./src/components/AddressForm/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: external "braintree-web-drop-in"
var external_braintree_web_drop_in_ = __webpack_require__(66);
var external_braintree_web_drop_in_default = /*#__PURE__*/__webpack_require__.n(external_braintree_web_drop_in_);

// CONCATENATED MODULE: ./src/queries/mutation_create_braintree_client_token.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_create_braintree_client_token_graphql = (client_["gql"]`
    mutation {
        createBraintreeClientToken
    }
`);
// CONCATENATED MODULE: ./src/components/Checkout/paymentProviders/braintree.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/








const CONTAINER_ID = 'braintree-dropin-container';

const Braintree = props => {
  const [{
    braintreeToken
  }, dispatch] = useCheckoutState();
  const [{
    cart
  }, cartDispatch] = useCartState();
  const [dropinInstance, setDropinInstance] = Object(external_react_["useState"])(); // This state is gone after you leave the payment form

  const [paymentMethodRequestable, setPaymentMethodRequestable] = Object(external_react_["useState"])(false);
  const paymentNonceField = Object(external_informed_["useFieldApi"])('payment_nonce');
  const [createBraintreeClientToken, {
    data: braintreeTokenData,
    error: braintreeTokenError
  }] = Object(client_["useMutation"])(mutation_create_braintree_client_token_graphql);

  async function createDropinInstance() {
    try {
      // Tear down instance if it already exists, e.g. when switching between the PayPal and credit card form.
      if (dropinInstance) {
        await dropinInstance.teardown();
        setDropinInstance(false);
      }

      let paypal = false;

      if (props.accept === 'paypal') {
        const amount = {
          amount: cart.prices.grand_total.value,
          currency: cart.prices.grand_total.currency
        };
        paypal = {
          flow: 'checkout',
          ...amount
        };
      }

      let card = false;

      if (props.accept === 'card') {
        card = {
          cardholderName: {
            required: true
          },
          overrides: {
            fields: {
              number: {
                maskInput: {
                  // Only show last four digits on blur.
                  showLastFour: true
                }
              }
            }
          }
        };
      }

      const braintreeDropIn = await external_braintree_web_drop_in_default.a.create({
        authorization: braintreeToken,
        container: `#${CONTAINER_ID}`,
        paypal,
        card
      });
      braintreeDropIn.on('paymentMethodRequestable', () => {
        setPaymentMethodRequestable(true);
      });
      braintreeDropIn.on('noPaymentMethodRequestable', () => {
        setPaymentMethodRequestable(false);
      });
      setDropinInstance(braintreeDropIn);
    } catch (error) {
      cartDispatch({
        type: 'error',
        error: error.toString()
      });
    }
  } // Request new braintree token and initialize payment form


  Object(external_react_["useEffect"])(() => {
    if (!braintreeToken) {
      createBraintreeClientToken();
      return;
    }

    createDropinInstance();
  }, [braintreeToken, props.accept]); // Store braintree token

  Object(external_react_["useEffect"])(() => {
    if (braintreeTokenError) {
      cartDispatch({
        type: 'error',
        error: braintreeTokenError.toString()
      });
      return;
    }

    if (braintreeTokenData && braintreeTokenData.createBraintreeClientToken) {
      dispatch({
        type: 'setBraintreeToken',
        token: braintreeTokenData.createBraintreeClientToken
      });
    }
  }, [braintreeTokenData, braintreeTokenError]);
  Object(external_react_["useEffect"])(() => {
    if (paymentMethodRequestable) {
      dropinInstance.requestPaymentMethod().then(paymentNonce => {
        paymentNonceField.setValue(paymentNonce.nonce);
      }).catch(error => {
        cartDispatch({
          type: 'error',
          error: error.toString()
        });
      });
    }
  }, [paymentMethodRequestable]);
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    id: CONTAINER_ID
  });
};

Braintree.propTypes = {
  accept: Object(external_prop_types_["oneOf"])(['card', 'paypal']).isRequired
};
/* harmony default export */ var braintree = (Braintree);
// CONCATENATED MODULE: ./src/components/Checkout/paymentProviders/nonceValidation.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
/* harmony default export */ var nonceValidation = ((value, values) => {
  const nonce = value;
  const paymentMethod = values.payment_method;

  switch (paymentMethod) {
    case 'braintree':
      {
        return !nonce || nonce.length < 11 ? 'Please provide your credit card details.' : undefined;
      }

    case 'braintree_paypal':
      {
        return !nonce || nonce.length < 11 ? 'Please provide your PayPal details.' : undefined;
      }

    default:
      {
        // No nonce needed for any other payment methods
        return undefined;
      }
  }
});
// EXTERNAL MODULE: ./src/components/Checkout/paymentProviders/paymentProvider.css
var paymentProvider = __webpack_require__(48);
var paymentProvider_default = /*#__PURE__*/__webpack_require__.n(paymentProvider);

// CONCATENATED MODULE: ./src/components/Checkout/paymentProviders/paymentProvider.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






const PaymentProvider = () => {
  const formState = Object(external_informed_["useFormState"])();
  let child;

  switch (formState.values.payment_method) {
    case 'braintree':
      {
        child = /*#__PURE__*/external_react_default.a.createElement(braintree, {
          accept: "card"
        });
        break;
      }

    case 'braintree_paypal':
      {
        child = /*#__PURE__*/external_react_default.a.createElement(braintree, {
          accept: "paypal"
        });
        break;
      }

    default:
      {
        return null;
      }
  }

  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentProvider_default.a.braintree
  }, child, /*#__PURE__*/external_react_default.a.createElement(external_informed_["Text"], {
    type: "hidden",
    field: "payment_nonce",
    validate: nonceValidation
  }), formState.errors.payment_nonce && /*#__PURE__*/external_react_default.a.createElement("p", {
    className: paymentProvider_default.a.error_message
  }, formState.errors.payment_nonce));
};

/* harmony default export */ var paymentProviders_paymentProvider = (PaymentProvider);
// EXTERNAL MODULE: ./src/components/Checkout/paymentsForm.css
var paymentsForm = __webpack_require__(7);
var paymentsForm_default = /*#__PURE__*/__webpack_require__.n(paymentsForm);

// CONCATENATED MODULE: ./src/components/Checkout/paymentsForm.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/














/**
 * A wrapper around the payment form. This component's purpose is to maintain
 * the submission state as well as prepare/set initial values.
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const PaymentsForm = props => {
  const {
    allowSame,
    billingAddressSameAsShippingAddress,
    cancel,
    countries,
    initialAddressSelectValue,
    initialPaymentMethod,
    initialValues,
    onAddressSelectValueChange,
    paymentMethods,
    showAddressSelect,
    showEmailInput,
    showSaveInAddressBookCheckbox,
    submit
  } = props;
  const [isSubmitting, setIsSubmitting] = Object(external_react_["useState"])(false);
  const intl = Object(external_react_intl_["useIntl"])();
  const anchorRef = Object(external_react_["useRef"])(null);
  const paymentMethodsItems = paymentMethods.map(item => {
    return {
      label: item.title,
      value: item.code
    };
  });
  const initialPaymentMethodState = !initialPaymentMethod ? paymentMethodsItems[0].value : initialPaymentMethod.code;
  const [paymentMethod] = Object(external_react_["useState"])(initialPaymentMethodState);
  let initialFormValues;

  if (allowSame && billingAddressSameAsShippingAddress) {
    // If the addresses are the same, don't populate any fields
    // other than the checkbox with an initial value.
    initialFormValues = {
      addresses_same: true
    };
  } else {
    // Convert street array
    if (initialValues && initialValues.street) {
      initialValues.street.forEach((v, i) => {
        initialValues[`street${i}`] = v;
      });
    } // Convert region code


    if (initialValues && initialValues.region) {
      initialValues.region_code = initialValues.region.code;
    } // The addresses are not the same, populate the other fields.


    initialFormValues = {
      addresses_same: false,
      ...initialValues
    };
  }

  const [differentAddress, setDifferentAddress] = Object(external_react_["useState"])(!initialFormValues.addresses_same);
  const handleSubmit = Object(external_react_["useCallback"])(formValues => {
    setIsSubmitting(true);
    const sameAsShippingAddress = formValues['addresses_same'];
    let billingAddress = {
      sameAsShippingAddress
    };

    if (!sameAsShippingAddress) {
      billingAddress = { ...billingAddress,
        ...formValues,
        street: [formValues.street0]
      };
    }

    submit({
      paymentMethod: paymentMethods.find(v => v.code === formValues['payment_method']),
      paymentNonce: formValues['payment_nonce'],
      billingAddress
    });
  }, [setIsSubmitting, paymentMethod]);
  const billingAddressFields = differentAddress ? /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.firstname
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "checkout:address-firstname",
      defaultMessage: [{
        "type": 0,
        "value": "First Name"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: paymentsForm_default.a.firstname,
    field: "firstname",
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.lastname
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "checkout:address-lastname",
      defaultMessage: [{
        "type": 0,
        "value": "Last Name"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: paymentsForm_default.a.lastname,
    field: "lastname",
    validate: isRequired
  }))), showEmailInput && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.email
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "checkout:address-email",
      defaultMessage: [{
        "type": 0,
        "value": "E-Mail"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: paymentsForm_default.a.email,
    field: "email",
    validate: combineValidators([isRequired, validateEmail])
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.street0
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "checkout:address-street",
      defaultMessage: [{
        "type": 0,
        "value": "Street"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: paymentsForm_default.a.street0,
    field: "street0",
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.city
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "checkout:address-city",
      defaultMessage: [{
        "type": 0,
        "value": "City"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: paymentsForm_default.a.city,
    field: "city",
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.region_code
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "checkout:address-state",
      defaultMessage: [{
        "type": 0,
        "value": "State"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: paymentsForm_default.a.region_code,
    field: "region_code",
    validate: combineValidators([isRequired, [hasLengthExactly, 2], [validateRegionCode, countries]])
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.postcode
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "checkout:address-postcode",
      defaultMessage: [{
        "type": 0,
        "value": "ZIP"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: paymentsForm_default.a.postcode,
    field: "postcode",
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.telephone
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "checkout:address-phone",
      defaultMessage: [{
        "type": 0,
        "value": "Phone"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    id: paymentsForm_default.a.telephone,
    field: "telephone",
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("span", {
    ref: anchorRef
  })) : null; // When the address checkbox is unchecked, additional fields are rendered.
  // This causes the form to grow, and potentially to overflow, so the new
  // fields may go unnoticed. To reveal them, we scroll them into view.

  Object(external_react_["useEffect"])(() => {
    if (differentAddress) {
      const {
        current: element
      } = anchorRef;

      if (element instanceof HTMLElement) {
        element.scrollIntoView({
          behavior: 'smooth'
        });
      }
    }
  }, [differentAddress]);
  return /*#__PURE__*/external_react_default.a.createElement(external_informed_["Form"], {
    className: paymentsForm_default.a.root,
    initialValues: initialFormValues,
    onSubmit: handleSubmit
  }, ({
    formApi
  }) => /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.body
  }, /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: paymentsForm_default.a.heading
  }, "Billing Information"), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.braintree
  }, /*#__PURE__*/external_react_default.a.createElement(components_Select_select, {
    items: paymentMethodsItems,
    field: "payment_method",
    initialValue: paymentMethod,
    onValueChange: () => formApi.getError('payment_nonce') && formApi.resetField('payment_nonce')
  })), /*#__PURE__*/external_react_default.a.createElement(paymentProviders_paymentProvider, null), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.address_check
  }, allowSame && /*#__PURE__*/external_react_default.a.createElement(components_Checkbox_checkbox, {
    field: "addresses_same",
    label: intl.formatMessage({
      id: "checkout:same-as-shipping",
      defaultMessage: [{
        "type": 0,
        "value": "Billing address same as shipping address"
      }]
    }),
    onClick: ev => {
      setDifferentAddress(!ev.target.checked);
    }
  })), differentAddress && showAddressSelect && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.address_select
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "checkout:address-use-saved-address",
      defaultMessage: [{
        "type": 0,
        "value": "Use Saved Address"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(AddressForm_addressSelect, {
    initialValue: initialAddressSelectValue,
    onValueChange: value => onAddressSelectValueChange(value, formApi)
  }))), billingAddressFields, differentAddress && showSaveInAddressBookCheckbox && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.save_in_address_book
  }, /*#__PURE__*/external_react_default.a.createElement(components_Checkbox_checkbox, {
    id: paymentsForm_default.a.save_in_address_book,
    label: intl.formatMessage({
      id: "checkout:address-save-in-address-book",
      defaultMessage: [{
        "type": 0,
        "value": "Save in address book"
      }]
    }),
    field: "save_in_address_book"
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: paymentsForm_default.a.footer
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    onClick: cancel
  }, intl.formatMessage({
    id: "common:cancel",
    defaultMessage: [{
      "type": 0,
      "value": "Cancel"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "high",
    type: "submit",
    disabled: isSubmitting
  }, intl.formatMessage({
    id: "checkout:use-payment-method",
    defaultMessage: [{
      "type": 0,
      "value": "Use Payment Method"
    }]
  })))));
};

PaymentsForm.propTypes = {
  allowSame: external_prop_types_["bool"],
  billingAddressSameAsShippingAddress: external_prop_types_["bool"],
  cancel: external_prop_types_["func"].isRequired,
  classes: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"]
  }),
  countries: external_prop_types_["array"],
  initialAddressSelectValue: external_prop_types_["number"],
  initialPaymentMethod: Object(external_prop_types_["shape"])({
    code: external_prop_types_["string"]
  }),
  initialValues: Object(external_prop_types_["shape"])({
    firstname: external_prop_types_["string"],
    lastname: external_prop_types_["string"],
    telephone: external_prop_types_["string"],
    city: external_prop_types_["string"],
    postcode: external_prop_types_["string"],
    region_code: external_prop_types_["string"],
    street0: external_prop_types_["string"]
  }),
  onAddressSelectValueChange: external_prop_types_["func"],
  paymentMethods: external_prop_types_["array"].isRequired,
  showAddressSelect: external_prop_types_["bool"],
  showEmailInput: external_prop_types_["bool"],
  showSaveInAddressBookCheckbox: external_prop_types_["bool"],
  submit: external_prop_types_["func"].isRequired
};
PaymentsForm.defaultProps = {
  allowSame: true,
  billingAddressSameAsShippingAddress: true,
  initialAddressSelectValue: null,
  initialValues: {},
  showAddressSelect: false,
  showEmailInput: false,
  showSaveInAddressBookCheckbox: false
};
/* harmony default export */ var Checkout_paymentsForm = (PaymentsForm);
// EXTERNAL MODULE: ./src/components/Checkout/shippingForm.css
var shippingForm = __webpack_require__(17);
var shippingForm_default = /*#__PURE__*/__webpack_require__.n(shippingForm);

// CONCATENATED MODULE: ./src/components/Checkout/shippingForm.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const ShippingForm = props => {
  const {
    availableShippingMethods,
    cancel,
    shippingMethod,
    submit,
    submitting
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  let initialValue;
  let selectableShippingMethods;

  if (availableShippingMethods.length > 0) {
    selectableShippingMethods = availableShippingMethods.filter(method => method.carrier_code && method.carrier_title).map(({
      carrier_code,
      carrier_title
    }) => ({
      label: carrier_title,
      value: carrier_code
    }));
    initialValue = shippingMethod ? shippingMethod.carrier_code : availableShippingMethods[0].carrier_code;
  } else {
    selectableShippingMethods = [];
    initialValue = '';
  }

  const handleSubmit = Object(external_react_["useCallback"])(({
    shippingMethod
  }) => {
    const selectedShippingMethod = availableShippingMethods.find(({
      carrier_code
    }) => carrier_code === shippingMethod);

    if (!selectedShippingMethod) {
      console.warn(`Could not find the selected shipping method ${selectedShippingMethod} in the list of available shipping methods.`);
      cancel();
      return;
    }

    submit({
      shippingMethod: selectedShippingMethod
    });
  }, [availableShippingMethods, cancel, submit]);
  return /*#__PURE__*/external_react_default.a.createElement(external_informed_["Form"], {
    className: shippingForm_default.a.root,
    onSubmit: handleSubmit
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: shippingForm_default.a.body
  }, /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: shippingForm_default.a.heading
  }, intl.formatMessage({
    id: "checkout:shipping-information",
    defaultMessage: [{
      "type": 0,
      "value": "Shipping Information"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: shippingForm_default.a.shippingMethod,
    id: shippingForm_default.a.shippingMethod
  }, /*#__PURE__*/external_react_default.a.createElement("label", {
    htmlFor: shippingForm_default.a.shippingMethod
  }, intl.formatMessage({
    id: "checkout:shipping-method",
    defaultMessage: [{
      "type": 0,
      "value": "Shipping Method"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement(components_Select_select, {
    field: "shippingMethod",
    initialValue: initialValue,
    items: selectableShippingMethods
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: shippingForm_default.a.footer
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    onClick: cancel
  }, intl.formatMessage({
    id: "common:cancel",
    defaultMessage: [{
      "type": 0,
      "value": "Cancel"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "high",
    type: "submit",
    disabled: submitting
  }, intl.formatMessage({
    id: "checkout:use-shipping-method",
    defaultMessage: [{
      "type": 0,
      "value": "Use Method"
    }]
  }))));
};

ShippingForm.propTypes = {
  availableShippingMethods: external_prop_types_["array"].isRequired,
  cancel: external_prop_types_["func"].isRequired,
  classes: Object(external_prop_types_["shape"])({
    body: external_prop_types_["string"],
    button: external_prop_types_["string"],
    footer: external_prop_types_["string"],
    heading: external_prop_types_["string"],
    shippingMethod: external_prop_types_["string"]
  }),
  shippingMethod: external_prop_types_["object"],
  submit: external_prop_types_["func"].isRequired,
  submitting: external_prop_types_["bool"]
};
ShippingForm.defaultProps = {
  availableShippingMethods: [{}]
};
/* harmony default export */ var Checkout_shippingForm = (ShippingForm);
// CONCATENATED MODULE: ./src/queries/mutation_set_payment_method.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_set_payment_method_graphql = (client_["gql"]`
    mutation($cartId: String!, $paymentMethodCode: String!) {
        setPaymentMethodOnCart(input: { cart_id: $cartId, payment_method: { code: $paymentMethodCode } }) {
            cart {
                selected_payment_method {
                    code
                    title
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/queries/mutation_set_braintree_payment_method.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_set_braintree_payment_method_graphql = (client_["gql"]`
    mutation($cartId: String!, $paymentMethodCode: String!, $nonce: String!) {
        setPaymentMethodOnCart(
            input: {
                cart_id: $cartId
                payment_method: {
                    code: $paymentMethodCode
                    braintree: { payment_method_nonce: $nonce, is_active_payment_token_enabler: false }
                }
            }
        ) {
            cart {
                selected_payment_method {
                    code
                    title
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/queries/mutation_set_billing_address.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_set_billing_address_graphql = (client_["gql"]`
    # Welcome to Altair GraphQL Client.
    # You can send your request using CmdOrCtrl + Enter.

    # Enter your graphQL query here.

    mutation(
        $cartId: String!
        $city: String!
        $company: String
        $country_code: String!
        $firstname: String!
        $lastname: String!
        $postcode: String
        $region_code: String
        $save_in_address_book: Boolean
        $street: [String]!
        $telephone: String!
    ) {
        setBillingAddressOnCart(
            input: {
                cart_id: $cartId
                billing_address: {
                    address: {
                        city: $city
                        company: $company
                        country_code: $country_code
                        firstname: $firstname
                        lastname: $lastname
                        postcode: $postcode
                        region: $region_code
                        save_in_address_book: $save_in_address_book
                        street: $street
                        telephone: $telephone
                    }
                }
            }
        ) {
            cart {
                billing_address {
                    city
                    company
                    country {
                        code
                    }
                    firstname
                    lastname
                    postcode
                    region {
                        code
                    }
                    street
                    telephone
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/queries/mutation_set_shipping_method.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_set_shipping_method_graphql = (client_["gql"]`
    mutation($cartId: String!, $carrier_code: String!, $method_code: String!) {
        setShippingMethodsOnCart(
            input: { cart_id: $cartId, shipping_methods: { carrier_code: $carrier_code, method_code: $method_code } }
        ) {
            cart {
                shipping_addresses {
                    selected_shipping_method {
                        method_code
                        method_title
                        carrier_code
                        carrier_title
                    }
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/queries/mutation_set_guest_email_on_cart.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_set_guest_email_on_cart_graphql = (client_["gql"]`
    mutation($cartId: String!, $email: String!) {
        setGuestEmailOnCart(input: { cart_id: $cartId, email: $email }) {
            cart {
                email
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/components/Checkout/editableForm.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




















/**
 * The EditableForm component renders the actual edit forms for the sections
 * within the form.
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const EditableForm = props => {
  const {
    submitting,
    isAddressInvalid,
    invalidAddressMessage
  } = props;
  const [{
    cart,
    cartId
  }, cartDispatch] = useCartState();
  const [{
    editing,
    shippingAddress,
    shippingMethod,
    paymentMethod,
    billingAddress,
    billingAddressSameAsShippingAddress,
    isEditingNewAddress
  }, dispatch] = useCheckoutState();
  const {
    selectedAddressId,
    parseInitialAddressSelectValue,
    handleChangeAddressSelectInCheckout
  } = useAddressSelect({
    initialAddress: shippingAddress
  });
  const {
    error: countriesError,
    countries
  } = useCountries();
  const [{
    isSignedIn,
    currentUser
  }] = useUserContext();
  const cartDetailsQuery = useAwaitQuery(query_cart_details_graphql);
  const [setShippingAddressesOnCart] = Object(client_["useMutation"])(mutation_set_shipping_address_graphql);
  const [setBraintreePaymentMethodOnCart] = Object(client_["useMutation"])(mutation_set_braintree_payment_method_graphql);
  const [setPaymentMethodOnCart] = Object(client_["useMutation"])(mutation_set_payment_method_graphql);
  const [setBillingAddressOnCart] = Object(client_["useMutation"])(mutation_set_billing_address_graphql);
  const [setShippingMethodsOnCart, {
    data: shippingMethodsResult,
    error: shippingMethodsError
  }] = Object(client_["useMutation"])(mutation_set_shipping_method_graphql);
  const [setGuestEmailOnCart] = Object(client_["useMutation"])(mutation_set_guest_email_on_cart_graphql);
  const intl = Object(external_react_intl_["useIntl"])();

  if (shippingMethodsError || countriesError) {
    let errorObj = shippingMethodsError || countriesError;
    cartDispatch({
      type: 'error',
      error: errorObj.toString()
    });
  }

  const handleCancel = Object(external_react_["useCallback"])(() => {
    dispatch({
      type: 'endEditing'
    });
  }, [dispatch]);

  const handleSubmitAddressForm = async formValues => {
    cartDispatch({
      type: 'beginLoading'
    });

    try {
      const addressVariables = {
        variables: {
          cartId,
          country_code: 'US',
          ...formValues
        }
      };
      await setShippingAddressesOnCart(addressVariables);

      if (billingAddressSameAsShippingAddress) {
        addressVariables.variables.save_in_address_book = false;
        await setBillingAddressOnCart(addressVariables);
      }

      await getCartDetails({
        cartDetailsQuery,
        dispatch: cartDispatch,
        cartId
      });

      if (!isSignedIn) {
        await setGuestEmailOnCart({
          variables: {
            cartId,
            email: formValues.email
          }
        });
        dispatch({
          type: 'setShippingAddressEmail',
          email: formValues.email
        });
      }
    } catch (err) {
      cartDispatch({
        type: 'error',
        error: err.toString()
      });
    } finally {
      cartDispatch({
        type: 'endLoading'
      });
    }
  };

  const handleSubmitPaymentsForm = async formValues => {
    cartDispatch({
      type: 'beginLoading'
    });

    try {
      const billingAddressValues = !cart.is_virtual && formValues.billingAddress.sameAsShippingAddress && shippingAddress ? { ...shippingAddress
      } : formValues.billingAddress;
      const addressVariables = {
        variables: {
          cartId,
          country_code: 'US',
          ...billingAddressValues
        }
      };
      await setBillingAddressOnCart(addressVariables);
      await getCartDetails({
        cartDetailsQuery,
        dispatch: cartDispatch,
        cartId
      });
      dispatch({
        type: 'setBillingAddressSameAsShippingAddress',
        same: formValues.billingAddress.sameAsShippingAddress
      }); // If virtual and guest cart, set email with payment address, since no shipping address set

      if (cart.is_virtual && !isSignedIn) {
        await setGuestEmailOnCart({
          variables: {
            cartId,
            email: formValues.billingAddress.email
          }
        });
        dispatch({
          type: 'setBillingAddressEmail',
          email: formValues.billingAddress.email
        });
      }

      let paymentResult;

      switch (formValues.paymentMethod.code) {
        case 'braintree':
        case 'braintree_paypal':
          {
            paymentResult = await setBraintreePaymentMethodOnCart({
              variables: {
                cartId: cartId,
                paymentMethodCode: formValues.paymentMethod.code,
                nonce: formValues.paymentNonce
              }
            });
            break;
          }

        default:
          {
            paymentResult = await setPaymentMethodOnCart({
              variables: {
                cartId: cartId,
                paymentMethodCode: formValues.paymentMethod.code
              }
            });
          }
      }

      dispatch({
        type: 'setPaymentMethod',
        paymentMethod: { ...paymentResult.data.setPaymentMethodOnCart.cart.selected_payment_method
        }
      });
    } catch (err) {
      cartDispatch({
        type: 'error',
        error: err.toString()
      });
    } finally {
      cartDispatch({
        type: 'endLoading'
      });
    }
  };

  const handleSubmitShippingForm = async formValues => {
    cartDispatch({
      type: 'beginLoading'
    });

    try {
      await setShippingMethodsOnCart({
        variables: {
          cartId: cartId,
          ...formValues.shippingMethod
        }
      });
      await getCartDetails({
        cartDetailsQuery,
        dispatch: cartDispatch,
        cartId
      });
    } catch (err) {
      cartDispatch({
        type: 'error',
        error: err.toString()
      });
    } finally {
      cartDispatch({
        type: 'endLoading'
      });
    }
  };

  if (shippingMethodsResult) {
    dispatch({
      type: 'setShippingMethod',
      shippingMethod: shippingMethodsResult.setShippingMethodsOnCart.cart.shipping_addresses[0].selected_shipping_method
    });
  } // We can display the forms only after the countries are loaded.


  if (!countries || countries.length === 0) {
    return null;
  }

  const hasSavedAddresses = currentUser.addresses.length > 0;
  const newAddressItemValue = 0;
  const billingAddressSelectInitialValue = billingAddressSameAsShippingAddress ? newAddressItemValue : parseInitialAddressSelectValue(billingAddress);

  switch (editing) {
    case 'address':
      {
        return /*#__PURE__*/external_react_default.a.createElement(AddressForm_addressForm, {
          cancel: handleCancel,
          countries: countries,
          formHeading: intl.formatMessage({
            id: "checkout:address-form-heading",
            defaultMessage: [{
              "type": 0,
              "value": "Shipping Address"
            }]
          }),
          isAddressInvalid: isAddressInvalid,
          invalidAddressMessage: invalidAddressMessage,
          initialAddressSelectValue: selectedAddressId,
          initialValues: shippingAddress,
          onAddressSelectValueChange: handleChangeAddressSelectInCheckout,
          showAddressSelect: isSignedIn && hasSavedAddresses,
          showEmailInput: !isSignedIn,
          showSaveInAddressBookCheckbox: isSignedIn && selectedAddressId !== 0,
          submit: handleSubmitAddressForm,
          submitting: submitting,
          submitButtonLabel: intl.formatMessage({
            id: "checkout:address-submit",
            defaultMessage: [{
              "type": 0,
              "value": "Use Address"
            }]
          })
        });
      }

    case 'paymentMethod':
      {
        return /*#__PURE__*/external_react_default.a.createElement(Checkout_paymentsForm, {
          allowSame: !cart.is_virtual,
          billingAddressSameAsShippingAddress: billingAddressSameAsShippingAddress,
          cancel: handleCancel,
          cart: cart,
          countries: countries,
          initialAddressSelectValue: billingAddressSelectInitialValue,
          initialPaymentMethod: paymentMethod,
          initialValues: billingAddress,
          onAddressSelectValueChange: handleChangeAddressSelectInCheckout,
          paymentMethods: cart.available_payment_methods,
          showAddressSelect: isSignedIn && hasSavedAddresses,
          showEmailInput: cart.is_virtual && !isSignedIn,
          showSaveInAddressBookCheckbox: isSignedIn && isEditingNewAddress,
          submit: handleSubmitPaymentsForm,
          submitting: submitting
        });
      }

    case 'shippingMethod':
      {
        const availableShippingMethods = shippingAddress && shippingAddress.available_shipping_methods ? shippingAddress.available_shipping_methods : [];
        return /*#__PURE__*/external_react_default.a.createElement(Checkout_shippingForm, {
          availableShippingMethods: availableShippingMethods,
          cancel: handleCancel,
          shippingMethod: shippingMethod,
          submit: handleSubmitShippingForm,
          submitting: submitting
        });
      }

    default:
      {
        return null;
      }
  }
};

EditableForm.propTypes = {
  submitting: external_prop_types_["bool"],
  isAddressInvalid: external_prop_types_["bool"],
  invalidAddressMessage: external_prop_types_["string"]
};
/* harmony default export */ var editableForm = (EditableForm);
// CONCATENATED MODULE: ./src/components/Checkout/form.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







/**
 * The Form component is similar to Flow in that it renders either the overview
 * or the editable form based on the 'editing' state value.
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Form = () => {
  const {
    parseAddress
  } = useAddressForm();
  const [{
    cart
  }] = useCartState();
  const [{
    editing,
    shippingAddress
  }, dispatch] = useCheckoutState();
  const {
    shipping_addresses = [],
    selected_payment_method = undefined,
    billing_address = undefined,
    email
  } = cart;
  Object(external_react_["useEffect"])(() => {
    if (shipping_addresses && shipping_addresses.length > 0 && shipping_addresses[0].firstname !== null) {
      dispatch({
        type: 'setShippingAddress',
        shippingAddress: parseAddress(shipping_addresses[0], email)
      });
    }
  }, [shipping_addresses]);
  Object(external_react_["useEffect"])(() => {
    if (selected_payment_method && selected_payment_method.code.length > 0) {
      dispatch({
        type: 'setPaymentMethod',
        paymentMethod: selected_payment_method
      });
    }
  }, [selected_payment_method]);
  Object(external_react_["useEffect"])(() => {
    if (billing_address && billing_address.city !== null) {
      dispatch({
        type: 'setBillingAddress',
        billingAddress: parseAddress(billing_address, email)
      });
    }
  }, [billing_address]);
  Object(external_react_["useEffect"])(() => {
    if (shippingAddress && shippingAddress.selected_shipping_method && shippingAddress.selected_shipping_method.carrier_code !== null) {
      dispatch({
        type: 'setShippingMethod',
        shippingMethod: shippingAddress.selected_shipping_method
      });
    }
  }, [shippingAddress]);
  const child = editing ? /*#__PURE__*/external_react_default.a.createElement(editableForm, null) : /*#__PURE__*/external_react_default.a.createElement(overview, {
    classes: form_default.a
  });
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: form_default.a.root
  }, child);
};

/* harmony default export */ var components_Checkout_form = (Form);
// EXTERNAL MODULE: ./src/components/Checkout/flow.css
var flow = __webpack_require__(67);
var flow_default = /*#__PURE__*/__webpack_require__.n(flow);

// EXTERNAL MODULE: ./src/components/Checkout/receipt.css
var receipt = __webpack_require__(24);
var receipt_default = /*#__PURE__*/__webpack_require__.n(receipt);

// CONCATENATED MODULE: ./src/components/Checkout/useReceipt.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

/* harmony default export */ var useReceipt = (() => {
  const [{
    order
  }, dispatch] = useCheckoutState();

  const continueShopping = () => {
    // Reset checkout state
    dispatch({
      type: 'reset'
    });
  };

  const orderId = order && order.order_id ? order.order_id : null;
  return [{
    orderId
  }, continueShopping];
});
// CONCATENATED MODULE: ./src/components/Checkout/receipt.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Receipt = () => {
  const [{
    orderId
  }, continueShopping] = useReceipt();
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: receipt_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: receipt_default.a.body
  }, /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: receipt_default.a.header
  }, intl.formatMessage({
    id: "checkout:thankyou-for-purchase",
    defaultMessage: [{
      "type": 0,
      "value": "Thank you for your purchase!"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: receipt_default.a.textBlock
  }, intl.formatMessage({
    id: "checkout:order-confirmation",
    defaultMessage: [{
      "type": 0,
      "value": "The order number is "
    }, {
      "type": 1,
      "value": "orderId"
    }, {
      "type": 0,
      "value": ". You will receive an order confirmation email with order status and other details."
    }]
  }, {
    orderId
  })), /*#__PURE__*/external_react_default.a.createElement(Trigger_trigger, {
    action: continueShopping
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: receipt_default.a.continue
  }, intl.formatMessage({
    id: "checkout:continue-shopping",
    defaultMessage: [{
      "type": 0,
      "value": "Continue Shopping"
    }]
  })))));
};

/* harmony default export */ var Checkout_receipt = (Receipt);
// CONCATENATED MODULE: ./src/components/Checkout/flow.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/








const isCartReady = cart => {
  return cart && cart.items.length > 0;
};
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */


const Flow = () => {
  const [{
    cart
  }] = useCartState();
  const [{
    flowState
  }] = useCheckoutState();
  let child;

  switch (flowState) {
    case 'cart':
      {
        child = /*#__PURE__*/external_react_default.a.createElement(components_Checkout_cart, {
          ready: isCartReady(cart),
          submitting: false
        });
        break;
      }

    case 'form':
      {
        child = /*#__PURE__*/external_react_default.a.createElement(components_Checkout_form, null);
        break;
      }

    case 'receipt':
      {
        child = /*#__PURE__*/external_react_default.a.createElement(Checkout_receipt, null);
        break;
      }

    default:
      {
        child = null;
      }
  }

  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: flow_default.a.root
  }, child);
};

/* harmony default export */ var Checkout_flow = (Flow);
// CONCATENATED MODULE: ./src/components/Checkout/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


// EXTERNAL MODULE: ./src/components/Minicart/footer.css
var Minicart_footer = __webpack_require__(49);
var footer_default = /*#__PURE__*/__webpack_require__.n(Minicart_footer);

// EXTERNAL MODULE: ./src/components/Minicart/totalsSummary.css
var Minicart_totalsSummary = __webpack_require__(14);
var totalsSummary_default = /*#__PURE__*/__webpack_require__.n(Minicart_totalsSummary);

// CONCATENATED MODULE: ./src/components/Minicart/totalsSummary.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const TotalsSummary = props => {
  const intl = Object(external_react_intl_["useIntl"])(); // Props.

  const {
    numItems,
    subtotal,
    subtotalDiscount
  } = props; // Do not display price, if cart is empty. But display price, if the cart has
  // items and the price is 0 (e.g. when coupons are applied).

  const hasSubtotal = Boolean(subtotal.value) || numItems > 0;
  const hasDiscount = subtotal.value !== subtotalDiscount.value;
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: totalsSummary_default.a.root
  }, hasSubtotal && /*#__PURE__*/external_react_default.a.createElement("dl", {
    className: totalsSummary_default.a.totals
  }, /*#__PURE__*/external_react_default.a.createElement("dt", {
    className: totalsSummary_default.a.subtotalLabel
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "cart:total",
    defaultMessage: [{
      "type": 0,
      "value": "Cart Total:"
    }]
  }), ' ', /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    className: hasDiscount ? totalsSummary_default.a.discounted : '',
    currencyCode: subtotal.currency,
    value: subtotal.value
  }))), /*#__PURE__*/external_react_default.a.createElement("dd", {
    className: totalsSummary_default.a.subtotalValue
  }, intl.formatMessage({
    id: "cart:itemsWithCount",
    defaultMessage: [{
      "type": 6,
      "value": "count",
      "options": {
        "one": {
          "value": [{
            "type": 7
          }, {
            "type": 0,
            "value": " item"
          }]
        },
        "other": {
          "value": [{
            "type": 7
          }, {
            "type": 0,
            "value": " items"
          }]
        }
      },
      "offset": 0,
      "pluralType": "cardinal"
    }]
  }, {
    count: numItems
  }))), hasSubtotal && hasDiscount && /*#__PURE__*/external_react_default.a.createElement("dl", {
    className: totalsSummary_default.a.totalsDiscount
  }, /*#__PURE__*/external_react_default.a.createElement("dt", {
    className: totalsSummary_default.a.subtotalLabel
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "cart:new-total",
    defaultMessage: [{
      "type": 0,
      "value": "New Cart Total:"
    }]
  }), ' ', /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    currencyCode: subtotalDiscount.currency,
    value: subtotalDiscount.value
  }))), /*#__PURE__*/external_react_default.a.createElement("dd", {
    className: totalsSummary_default.a.subtotalValue
  }, intl.formatMessage({
    id: "cart:itemsWithCount",
    defaultMessage: [{
      "type": 6,
      "value": "count",
      "options": {
        "one": {
          "value": [{
            "type": 7
          }, {
            "type": 0,
            "value": " item"
          }]
        },
        "other": {
          "value": [{
            "type": 7
          }, {
            "type": 0,
            "value": " items"
          }]
        }
      },
      "offset": 0,
      "pluralType": "cardinal"
    }]
  }, {
    count: numItems
  }))));
};

TotalsSummary.propTypes = {
  currencyCode: external_prop_types_["string"],
  numItems: external_prop_types_["number"],
  subtotal: Object(external_prop_types_["shape"])({
    currency: external_prop_types_["string"],
    value: external_prop_types_["number"]
  }),
  subtotalDiscount: Object(external_prop_types_["shape"])({
    currency: external_prop_types_["string"],
    value: external_prop_types_["number"]
  })
};
/* harmony default export */ var components_Minicart_totalsSummary = (TotalsSummary);
// CONCATENATED MODULE: ./src/components/Minicart/footer.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Footer = () => {
  const [{
    isOpen,
    cart
  }] = useCartState();
  const footerClassName = isOpen ? footer_default.a.root_open : footer_default.a.root;
  let totalsSummary = null;

  if (cart && cart.prices && cart.total_quantity) {
    const {
      subtotal_excluding_tax,
      subtotal_with_discount_excluding_tax
    } = cart.prices;
    totalsSummary = /*#__PURE__*/external_react_default.a.createElement(components_Minicart_totalsSummary, {
      subtotal: subtotal_excluding_tax,
      subtotalDiscount: subtotal_with_discount_excluding_tax,
      numItems: cart.total_quantity
    });
  }

  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: footerClassName
  }, totalsSummary, /*#__PURE__*/external_react_default.a.createElement(Checkout_flow, null));
};

/* harmony default export */ var components_Minicart_footer = (Footer);
// CONCATENATED MODULE: ./src/components/Minicart/useMinicart.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





const productMapper = item => ({
  data: {
    sku: item.sku,
    quantity: parseFloat(item.quantity)
  }
});
const bundledProductMapper = item => ({ ...productMapper(item),
  bundle_options: item.options
});
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

/* harmony default export */ var useMinicart = (({
  queries
}) => {
  const {
    createCartMutation,
    addToCartMutation,
    cartDetailsQuery,
    addVirtualItemMutation,
    addBundleItemMutation,
    addSimpleAndVirtualItemMutation
  } = queries;
  const [{
    cartId,
    cart,
    isOpen,
    isLoading,
    isEditing,
    errorMessage
  }, dispatch] = useCartState();
  const mse = useStorefrontEvents();
  Object(external_react_["useEffect"])(() => {
    async function fn() {
      await getCartDetails({
        cartDetailsQuery,
        dispatch,
        cartId
      });
    }

    fn();
  }, [cartId]);

  const refreshCart = async () => {
    await getCartDetails({
      cartDetailsQuery,
      dispatch,
      cartId
    });
  };

  const addItem = async event => {
    if (!event.detail) return;
    let physicalCartItems = event.detail.filter(item => !item.virtual).map(productMapper);
    let virtualCartItems = event.detail.filter(item => item.virtual).map(productMapper);
    let bundleCartItems = event.detail.filter(item => item.bundle).map(bundledProductMapper);
    dispatch({
      type: 'open'
    });
    dispatch({
      type: 'beginLoading'
    });
    let addItemFn = addToCartMutation;

    if (bundleCartItems.length > 0) {
      addItemFn = addBundleItemMutation;
    } else if (physicalCartItems.length > 0 && virtualCartItems.length > 0) {
      addItemFn = addSimpleAndVirtualItemMutation;
    } else if (virtualCartItems.length > 0) {
      addItemFn = addVirtualItemMutation;
    }

    await addItemToCart({
      createCartMutation,
      addToCartMutation: addItemFn,
      cartDetailsQuery,
      cart,
      cartId,
      dispatch,
      physicalCartItems,
      virtualCartItems,
      bundleCartItems
    }); // Push add to cart dataLayer events

    mse && mse.publish.addToCart();
    event.detail.forEach(item => {
      // https://github.com/adobe/xdm/blob/master/docs/reference/datatypes/productlistitem.schema.md
      let eventInfo = {
        '@id': item.productId,
        'xdm:SKU': item.sku,
        'xdm:quantity': item.quantity
      };

      if (item.bundle) {
        eventInfo['bundle'] = true;
      }

      pushEvent('cif:addToCart', eventInfo);
    });
    dispatch({
      type: 'endLoading'
    });
  };

  const data = {
    cartId,
    cart,
    isOpen,
    isLoading,
    isEditing,
    errorMessage
  };
  const api = {
    addItem,
    refreshCart,
    dispatch
  };
  return [data, api];
});
// EXTERNAL MODULE: ./src/components/Minicart/minicart.css
var minicart = __webpack_require__(50);
var minicart_default = /*#__PURE__*/__webpack_require__.n(minicart);

// CONCATENATED MODULE: ./src/components/Minicart/minicart.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

















/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const MiniCart = () => {
  const [createCartMutation] = Object(client_["useMutation"])(mutation_create_guest_cart_graphql);
  const [addToCartMutation] = Object(client_["useMutation"])(mutation_add_to_cart_graphql);
  const [addVirtualItemMutation] = Object(client_["useMutation"])(mutation_add_virtual_to_cart_graphql);
  const [addSimpleAndVirtualItemMutation] = Object(client_["useMutation"])(mutation_add_simple_and_virtual_to_cart_graphql);
  const [addBundleItemMutation] = Object(client_["useMutation"])(mutation_add_bundle_to_cart_graphql);
  const cartDetailsQuery = useAwaitQuery(query_cart_details_graphql);
  const [{
    flowState
  }] = useCheckoutState();
  const [{
    cart,
    isOpen,
    isLoading,
    isEditing,
    errorMessage
  }, {
    addItem,
    dispatch
  }] = useMinicart({
    queries: {
      createCartMutation,
      addToCartMutation,
      cartDetailsQuery,
      addVirtualItemMutation,
      addBundleItemMutation,
      addSimpleAndVirtualItemMutation
    }
  });
  useEventListener(document, 'aem.cif.open-cart', () => {
    dispatch({
      type: 'open'
    });
  });
  useEventListener(document, 'aem.cif.add-to-cart', addItem);
  const rootClass = isOpen ? minicart_default.a.root_open : minicart_default.a.root;
  const isEmpty = cart && Object.entries(cart).length > 0 ? cart.items.length === 0 : true;
  const showFooter = !(isLoading || isEmpty || isEditing || errorMessage) || flowState === 'receipt';
  const footer = showFooter ? /*#__PURE__*/external_react_default.a.createElement(components_Minicart_footer, null) : null;
  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement(Mask_mask, {
    isOpen: isOpen,
    onClickHandler: () => dispatch({
      type: 'close'
    })
  }), /*#__PURE__*/external_react_default.a.createElement("aside", {
    className: rootClass
  }, /*#__PURE__*/external_react_default.a.createElement(external_react_["Suspense"], {
    fallback: /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, null)
  }, /*#__PURE__*/external_react_default.a.createElement(Minicart_header, null), /*#__PURE__*/external_react_default.a.createElement(Minicart_body, null), footer)));
};

/* harmony default export */ var Minicart_minicart = (MiniCart);
// CONCATENATED MODULE: ./src/components/Minicart/cartInitializer.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CartInitializer = props => {
  const [{
    cartId: stateCartId
  }, dispatch] = useCartState();
  const [{
    cartId: registeredCartId
  }] = useUserContext();
  const CART_COOKIE = 'cif.cart';
  const [cartId, setCartCookie] = useCookieValue(CART_COOKIE);
  Object(external_react_["useEffect"])(() => {
    if (cartId && cartId.length > 0 && !stateCartId) {
      dispatch({
        type: 'cartId',
        cartId
      });
    }
  }, [cartId]);
  Object(external_react_["useEffect"])(() => {
    if (stateCartId && (!cartId || cartId.length === 0)) {
      setCartCookie(stateCartId);
    }
  }, [stateCartId]);
  Object(external_react_["useEffect"])(() => {
    if (registeredCartId) {
      setCartCookie(registeredCartId);
      dispatch({
        type: 'cartId',
        cartId: registeredCartId
      });
    }
  }, [registeredCartId]);
  return props.children;
};

/* harmony default export */ var cartInitializer = (CartInitializer);
// CONCATENATED MODULE: ./src/components/Minicart/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



// CONCATENATED MODULE: ./src/context/ConfigContext.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


const ConfigContext = /*#__PURE__*/external_react_default.a.createContext();

const ConfigContextProvider = props => {
  const [config] = Object(external_react_["useState"])(props.config);
  return /*#__PURE__*/external_react_default.a.createElement(ConfigContext.Provider, {
    value: config
  }, props.children);
};

ConfigContextProvider.propTypes = {
  config: external_prop_types_default.a.shape({
    storeView: external_prop_types_default.a.string,
    headers: external_prop_types_default.a.object,
    graphqlEndpoint: external_prop_types_default.a.string.isRequired,
    graphqlMethod: external_prop_types_default.a.oneOf(['GET', 'POST']).isRequired,
    mountingPoints: external_prop_types_default.a.shape({
      accountContainer: external_prop_types_default.a.string,
      addressBookContainer: external_prop_types_default.a.string,
      authBarContainer: external_prop_types_default.a.string,
      cartTrigger: external_prop_types_default.a.string,
      minicart: external_prop_types_default.a.string,
      navPanel: external_prop_types_default.a.string,
      bundleProductOptionsContainer: external_prop_types_default.a.string,
      giftCardProductOptionsContainer: external_prop_types_default.a.string,
      accountDetails: external_prop_types_default.a.string,
      resetPasswordPage: external_prop_types_default.a.string,
      productRecs: external_prop_types_default.a.string,
      cartDetailsContainer: external_prop_types_default.a.string,
      checkoutPageContainer: external_prop_types_default.a.string
    }),
    pagePaths: external_prop_types_default.a.shape({
      addressBook: external_prop_types_default.a.string,
      baseUrl: external_prop_types_default.a.string,
      accountDetails: external_prop_types_default.a.string,
      cartDetails: external_prop_types_default.a.string,
      resetPassword: external_prop_types_default.a.string,
      checkoutPage: external_prop_types_default.a.string
    })
  }).isRequired
};
/* harmony default export */ var context_ConfigContext = (ConfigContextProvider);
const useConfigContext = () => Object(external_react_["useContext"])(ConfigContext);
// CONCATENATED MODULE: ./src/utils/localStorageUtils.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
const localStorage = window.localStorage;
const checkItem = itemKey => {
  return localStorage.getItem(itemKey) !== null;
};
const getPlainItem = itemKey => {
  return localStorage.getItem(itemKey);
};
const getJsonItem = itemKey => {
  let result = null;

  try {
    result = JSON.parse(localStorage.getItem(itemKey));
  } catch (e) {
    console.error(`Local Storage item ${itemKey} is not a JSON.`);
  }

  return result;
};
// CONCATENATED MODULE: ./src/utils/authUtils.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




const SIGN_IN_TOKEN_KEY = simplePersistence_default.a.KEY + '__signin_token';

const getAuthToken = () => {
  let token = checkCookie('cif.userToken') ? cookieValue('cif.userToken') : '';

  if (checkItem(SIGN_IN_TOKEN_KEY)) {
    const singInTokenJson = getJsonItem(SIGN_IN_TOKEN_KEY);

    if (singInTokenJson) {
      const timestamp = new Date().getTime();

      if (timestamp - singInTokenJson.timeStored < singInTokenJson.ttl * 1000) {
        token = singInTokenJson.value.replace(/"/g, '');
      }
    }
  }

  return token;
};

const authLink = new client_["ApolloLink"]((operation, forward) => {
  const token = getAuthToken();

  if (token.length > 0) {
    operation.setContext(({
      headers
    }) => ({
      headers: {
        authorization: `Bearer ${token && token.length > 0 ? token : ''}`,
        ...headers
      }
    }));
  }

  return forward(operation);
});

// EXTERNAL MODULE: external "graphql"
var external_graphql_ = __webpack_require__(51);

// CONCATENATED MODULE: ./src/utils/compressQueryFetch.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/**
 * This custom fetch interceptor minimizes GraphQL queries, by stripping unnecessary characters from the query.
 * This is a workaround, since Apollo always restores the formatting of a query, independent of the formatting in
 * .graphql files. See https://github.com/apollographql/apollo-link/issues/1079.
 *
 * This is required, since there are certain limits for Magento Cloud, see
 * https://docs.fastly.com/en/guides/resource-limits#request-and-response-limits.
 */

/* harmony default export */ var compressQueryFetch = (function (url, options) {
  try {
    if (options.method === 'GET') {
      // Split url by ? to get query string
      let parts = url.split('?'); // Only proceed if it is a valid URL

      if (parts.length === 2) {
        // Parse query from search params string
        let params = new URLSearchParams(parts[1]);
        let query = params.get('query');

        if (query) {
          query = Object(external_graphql_["stripIgnoredCharacters"])(query);
          params.set('query', query);
          parts[1] = params.toString();
          url = parts.join('?');
        }
      }
    }

    if (options.method === 'POST') {
      // Parse query from body in request
      let bodyJson = JSON.parse(options.body);

      if (bodyJson.query) {
        bodyJson.query = Object(external_graphql_["stripIgnoredCharacters"])(bodyJson.query);
        options.body = JSON.stringify(bodyJson);
      }
    }
  } catch (err) {
    console.warn('Could not minimize GraphQL query', err);
  }

  return fetch(url, options);
});
// CONCATENATED MODULE: ./src/utils/useCustomUrlEvent.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

 // @deprecated, will be moved to @adobe/aem-core-cif-experience-platform-connector

const useCustomUrlEvent = (props = {}) => {
  // eslint-disable-next-line react-hooks/rules-of-hooks
  const mse = typeof props.mse !== 'undefined' ? props.mse : useStorefrontEvents();
  Object(external_react_["useEffect"])(() => {
    const customUrl = window.location && window.location.href;

    if (!customUrl || !mse) {
      return;
    }

    mse.context.setCustomUrl({
      customUrl
    });
    mse.publish.customUrl();
  }, [mse]);
};

/* harmony default export */ var utils_useCustomUrlEvent = (useCustomUrlEvent);
// CONCATENATED MODULE: ./src/utils/useReferrerEvent.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

 // @deprecated, will be moved to @adobe/aem-core-cif-experience-platform-connector

const useReferrerEvent = (props = {}) => {
  // eslint-disable-next-line react-hooks/rules-of-hooks
  const mse = typeof props.mse !== 'undefined' ? props.mse : useStorefrontEvents();
  Object(external_react_["useEffect"])(() => {
    if (!document.referrer || !mse) {
      return;
    }

    mse.context.setReferrerUrl({
      referrerUrl: document.referrer
    });
    mse.publish.referrerUrl();
  }, [mse]);
};

/* harmony default export */ var utils_useReferrerEvent = (useReferrerEvent);
// CONCATENATED MODULE: ./src/utils/useViewedOffsets.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


const documentScrollTop = () => document.body.scrollTop || document.documentElement.scrollTop;

const documentScrollLeft = () => document.body.scrollLeft || document.documentElement.scrollLeft;

const useViewedOffsets = () => {
  const minXOffset = Object(external_react_["useRef"])(0);
  const maxXOffset = Object(external_react_["useRef"])(0);
  const minYOffset = Object(external_react_["useRef"])(0);
  const maxYOffset = Object(external_react_["useRef"])(0);

  const onResizeOrScroll = () => {
    const currentXOffset = documentScrollLeft();
    const currentYOffset = documentScrollTop();
    minXOffset.current = Math.min(currentXOffset, minXOffset.current);
    maxXOffset.current = Math.max(currentXOffset + window.innerWidth, maxXOffset.current);
    minYOffset.current = Math.min(currentYOffset, minYOffset.current);
    maxYOffset.current = Math.max(currentYOffset + window.innerHeight, maxYOffset.current);
  };

  Object(external_react_["useEffect"])(() => {
    const currentXOffset = documentScrollLeft();
    const currentYOffset = documentScrollTop();
    minXOffset.current = currentXOffset;
    maxXOffset.current = currentXOffset + window.innerWidth;
    minYOffset.current = currentYOffset;
    maxYOffset.current = currentYOffset + window.innerHeight;
    window.addEventListener('scroll', onResizeOrScroll);
    window.addEventListener('resize', onResizeOrScroll);
    return () => {
      window.removeEventListener('scroll', onResizeOrScroll);
      window.removeEventListener('resize', onResizeOrScroll);
    };
  }, []);
  return {
    minXOffset,
    maxXOffset,
    minYOffset,
    maxYOffset
  };
};

/* harmony default export */ var utils_useViewedOffsets = (useViewedOffsets);
// CONCATENATED MODULE: ./src/utils/usePageEvent.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


 // @deprecated, will be moved to @adobe/aem-core-cif-experience-platform-connector

const usePageEvent = (props = {}) => {
  // eslint-disable-next-line react-hooks/rules-of-hooks
  const mse = typeof props.mse !== 'undefined' ? props.mse : useStorefrontEvents();
  const {
    minXOffset,
    maxXOffset,
    minYOffset,
    maxYOffset
  } = utils_useViewedOffsets();
  const pageType = usePageType();

  const sendPageEvent = () => {
    const context = {
      pageType,
      eventType: 'pageUnload',
      maxXOffset: maxXOffset.current,
      maxYOffset: maxYOffset.current,
      minXOffset: minXOffset.current,
      minYOffset: minYOffset.current,
      ping_interval: 0,
      pings: 0
    };
    mse.context.setPage(context);
    mse.publish.pageView();
  };

  Object(external_react_["useEffect"])(() => {
    if (!mse) {
      return;
    }

    window.addEventListener('beforeunload', sendPageEvent);
    return () => {
      window.removeEventListener('beforeunload', sendPageEvent);
    };
  }, [mse]);
};

/* harmony default export */ var utils_usePageEvent = (usePageEvent);
// CONCATENATED MODULE: ./src/utils/useDataLayerEvents.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



const useDataLayerEvents = () => {
  const getClickId = element => {
    var _element$dataset;

    if (element === document) {
      return undefined;
    }

    if ((_element$dataset = element.dataset) !== null && _element$dataset !== void 0 && _element$dataset.cmpDataLayer) {
      return Object.keys(JSON.parse(element.dataset.cmpDataLayer))[0];
    } // if the target itself does not have a component data layer data
    // find the closes parent


    const componentElement = element.closest('[data-cmp-data-layer]');

    if (componentElement) {
      return getClickId(componentElement);
    }

    return undefined;
  };

  useEventListener(document, 'aem.cif.add-to-cart', async event => {
    const items = typeof event.detail === 'string' ? JSON.parse(event.detail) : event.detail;
    const componentId = getClickId(event.target);
    items.forEach(item => {
      let eventInfo = {
        'xdm:SKU': item.sku,
        'xdm:quantity': item.quantity
      };

      if (item.bundle) {
        eventInfo.bundle = true;
      }

      if (componentId) {
        eventInfo.path = 'component.' + componentId;
      }

      pushEvent('cif:addToCart', eventInfo);
    });
  });
  useEventListener(document, 'aem.cif.add-to-wishlist', async event => {
    const items = typeof event.detail === 'string' ? JSON.parse(event.detail) : event.detail;
    const componentId = getClickId(event.target);
    items.forEach(item => {
      let eventInfo = {
        'xdm:SKU': item.sku,
        'xdm:quantity': item.quantity
      };

      if (item.bundle) {
        eventInfo.bundle = true;
      }

      if (componentId) {
        eventInfo.path = 'component.' + componentId;
      }

      pushEvent('cif:addToWishList', eventInfo);
    });
  });
};

/* harmony default export */ var utils_useDataLayerEvents = (useDataLayerEvents);
// CONCATENATED MODULE: ./src/components/App/app.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/














const App = props => {
  const {
    graphqlEndpoint,
    storeView,
    graphqlMethod = 'POST',
    headers = {}
  } = useConfigContext();
  utils_useCustomUrlEvent();
  utils_useReferrerEvent();
  utils_usePageEvent();
  utils_useDataLayerEvents();
  const clientHeaders = { ...headers
  };

  if (storeView) {
    clientHeaders['Store'] = storeView;
  }

  const clientConfig = {
    link: Object(client_["from"])([authLink, new client_["HttpLink"]({
      uri: graphqlEndpoint,
      headers: clientHeaders,
      useGETForQueries: graphqlMethod === 'GET',
      fetch: compressQueryFetch
    })]),
    cache: new client_["InMemoryCache"]({
      typePolicies: policies_default.a
    })
  };
  const client = new client_["ApolloClient"](clientConfig);
  return /*#__PURE__*/external_react_default.a.createElement(client_["ApolloProvider"], {
    client: client
  }, /*#__PURE__*/external_react_default.a.createElement(context_UserContext, null, /*#__PURE__*/external_react_default.a.createElement(CartProvider, null, /*#__PURE__*/external_react_default.a.createElement(cartInitializer, null, /*#__PURE__*/external_react_default.a.createElement(CheckoutProvider, null, props.children)))));
};

/* harmony default export */ var app = (App);
// CONCATENATED MODULE: ./src/components/App/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/AuthBar/authBar.css
var authBar = __webpack_require__(68);
var authBar_default = /*#__PURE__*/__webpack_require__.n(authBar);

// EXTERNAL MODULE: ./src/components/AuthBar/userChip.css
var userChip = __webpack_require__(18);
var userChip_default = /*#__PURE__*/__webpack_require__.n(userChip);

// CONCATENATED MODULE: ./src/components/AuthBar/userChip.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const UserChip = props => {
  const {
    currentUser,
    showMyAccount
  } = props;
  const {
    email,
    firstname,
    lastname
  } = currentUser;
  const display = `${firstname} ${lastname}`;
  return /*#__PURE__*/external_react_default.a.createElement("button", {
    className: userChip_default.a.root,
    onClick: showMyAccount
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: userChip_default.a.content
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: userChip_default.a.avatar
  }, /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
    src: external_react_feather_["User"]
  })), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: userChip_default.a.user
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: userChip_default.a.fullName
  }, display), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: userChip_default.a.email
  }, email)), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: userChip_default.a.icon
  }, /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
    src: external_react_feather_["ChevronRight"]
  }))));
};

UserChip.propTypes = {
  currentUser: Object(external_prop_types_["shape"])({
    firstname: external_prop_types_["string"],
    lastname: external_prop_types_["string"],
    email: external_prop_types_["string"]
  }).isRequired,
  showMyAccount: external_prop_types_["func"].isRequired
};
/* harmony default export */ var AuthBar_userChip = (UserChip);
// CONCATENATED MODULE: ./src/components/AuthBar/authBar.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AuthBar = ({
  showMyAccount,
  showSignIn
}) => {
  const [{
    currentUser,
    isSignedIn
  }, {
    getUserDetails
  }] = useUserContext();
  const intl = Object(external_react_intl_["useIntl"])();
  Object(external_react_["useEffect"])(() => {
    if (isSignedIn && currentUser.email === '') {
      getUserDetails();
    }
  }, [getUserDetails]);
  const content = isSignedIn ? /*#__PURE__*/external_react_default.a.createElement(AuthBar_userChip, {
    currentUser: currentUser,
    showMyAccount: showMyAccount
  }) : /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    disabled: false,
    priority: "high",
    onClick: showSignIn
  }, intl.formatMessage({
    id: "account:sign-in",
    defaultMessage: [{
      "type": 0,
      "value": "Sign In"
    }]
  }));
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: authBar_default.a.root
  }, content);
};

AuthBar.propTypes = {
  showMyAccount: external_prop_types_["func"],
  showSignIn: external_prop_types_["func"]
};
/* harmony default export */ var AuthBar_authBar = (AuthBar);
// EXTERNAL MODULE: ./src/components/SignIn/signIn.css
var signIn = __webpack_require__(19);
var signIn_default = /*#__PURE__*/__webpack_require__.n(signIn);

// CONCATENATED MODULE: ./src/queries/mutation_merge_carts.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_merge_carts_graphql = (client_["gql"]`
    mutation mergeCarts($sourceCartId: String!, $destinationCartId: String!) {
        mergeCarts(source_cart_id: $sourceCartId, destination_cart_id: $destinationCartId) {
            id
        }
    }
`);
// CONCATENATED MODULE: ./src/queries/mutation_generate_token.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_generate_token_graphql = (client_["gql"]`
    mutation($email: String!, $password: String!) {
        generateCustomerToken(email: $email, password: $password) {
            token
        }
    }
`);
// CONCATENATED MODULE: ./src/components/SignIn/useSignin.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/











/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const useSignin = props => {
  const {
    showMyAccount
  } = props;
  const [, cartDispatch] = useCartState();
  const [userState, {
    setToken,
    getUserDetails,
    setCustomerCart,
    setError
  }] = useUserContext();
  const [inProgress, setInProgress] = Object(external_react_["useState"])(false);
  const [, setCartCookie] = useCookieValue('cif.cart');
  const [mergeCartsMutation] = Object(client_["useMutation"])(mutation_merge_carts_graphql);
  const fetchCustomerCart = useAwaitQuery(query_customer_cart_graphql);
  const cartDetailsQuery = useAwaitQuery(query_cart_details_graphql);
  const [generateCustomerToken] = Object(client_["useMutation"])(mutation_generate_token_graphql);
  let errorMessage = '';

  if (userState.signInError && userState.signInError.length > 0) {
    errorMessage = userState.signInError;
  }

  const refreshPage = () => {
    window.location.reload();
  };

  const handleSubmit = async ({
    email,
    password
  }) => {
    setInProgress(true);

    try {
      // 1. generate the customer token
      const {
        data
      } = await generateCustomerToken({
        variables: {
          email,
          password
        }
      });
      const token = data.generateCustomerToken.token;
      setToken(token); // 2. get the user details

      await getUserDetails();
      const {
        data: customerCartData
      } = await fetchCustomerCart({
        fetchPolicy: 'network-only'
      });
      const customerCartId = customerCartData.customerCart.id; // 3. merge the shopping cart if necessary

      let mergedCartId; // Get cartId from localStorage, not from cookie

      const cartId = await Object(asyncActions_["retrieveCartId"])();

      if (cartId) {
        mergedCartId = await mergeCarts({
          mergeCartsMutation,
          cartDetailsQuery,
          cartId,
          customerCartId,
          dispatch: cartDispatch
        });
      } else {
        mergedCartId = customerCartId;
      } //4. set the cart id in the cookie and localStorage


      setCartCookie(mergedCartId);
      setCustomerCart(mergedCartId);
      await Object(asyncActions_["saveCartId"])(mergedCartId); //5. show my account view in account dropdown or navigation side panel after sign in

      showMyAccount(); //6. simple refresh(current page)

      refreshPage();
    } catch (e) {
      setError(e);
      setInProgress(false);
    }
  };

  return {
    inProgress,
    handleSubmit,
    errorMessage,
    isSignedIn: userState.isSignedIn
  };
};
// CONCATENATED MODULE: ./src/components/SignIn/signIn.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/











/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const SignIn = props => {
  const {
    showMyAccount,
    showForgotPassword,
    showCreateAccount
  } = props;
  const {
    errorMessage,
    handleSubmit,
    inProgress
  } = useSignin({
    showMyAccount
  });
  const intl = Object(external_react_intl_["useIntl"])();

  if (inProgress) {
    return /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, null, intl.formatMessage({
      id: "account:signing-in",
      defaultMessage: [{
        "type": 0,
        "value": "Signing In"
      }]
    }));
  }

  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: signIn_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement(external_informed_["Form"], {
    onSubmit: handleSubmit,
    className: signIn_default.a.form
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: signIn_default.a.formTitle
  }, intl.formatMessage({
    id: "account:sign-in-form-title",
    defaultMessage: [{
      "type": 0,
      "value": "Sign-in to Your Account"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:email",
      defaultMessage: [{
        "type": 0,
        "value": "Email address"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    autoComplete: "email",
    field: "email",
    validate: isRequired,
    "aria-label": "email"
  })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:password",
      defaultMessage: [{
        "type": 0,
        "value": "Password"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    autoComplete: "current-password",
    field: "password",
    type: "password",
    validate: isRequired,
    "aria-label": "password"
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: signIn_default.a.forgotPasswordButton
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "low",
    type: "button",
    onClick: showForgotPassword
  }, intl.formatMessage({
    id: "account:forgot-password",
    defaultMessage: [{
      "type": 0,
      "value": "Forgot Password?"
    }]
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: signIn_default.a.signInError
  }, errorMessage), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: signIn_default.a.signInButton
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "high",
    type: "submit",
    "aria-label": "submit"
  }, intl.formatMessage({
    id: "account:sign-in",
    defaultMessage: [{
      "type": 0,
      "value": "Sign In"
    }]
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: signIn_default.a.createAccountButton
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "normal",
    type: "button",
    onClick: showCreateAccount
  }, intl.formatMessage({
    id: "account:create-an-account",
    defaultMessage: [{
      "type": 0,
      "value": "Create an Account"
    }]
  })))));
};

SignIn.propTypes = {
  showMyAccount: external_prop_types_["func"].isRequired,
  showForgotPassword: external_prop_types_["func"].isRequired,
  showCreateAccount: external_prop_types_["func"].isRequired
};
/* harmony default export */ var SignIn_signIn = (SignIn);
// CONCATENATED MODULE: ./src/components/SignIn/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/MyAccount/myAccount.css
var myAccount = __webpack_require__(20);
var myAccount_default = /*#__PURE__*/__webpack_require__.n(myAccount);

// EXTERNAL MODULE: ./src/components/MyAccount/accountLink.css
var accountLink = __webpack_require__(69);
var accountLink_default = /*#__PURE__*/__webpack_require__.n(accountLink);

// CONCATENATED MODULE: ./src/components/MyAccount/accountLink.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AccountLink = props => {
  const {
    children,
    onClick
  } = props;
  const [icon, text] = children;
  const classes = Object.assign({}, accountLink_default.a, props.classes);
  const handleClick = Object(external_react_["useCallback"])(() => {
    if (typeof onClick === 'function') {
      onClick();
    }
  }, [onClick]);
  return /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    classes: classes,
    onClick: handleClick
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: classes.icon
  }, icon), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: classes.text
  }, text));
};

/* harmony default export */ var MyAccount_accountLink = (AccountLink);
AccountLink.propTypes = {
  children: Object(external_prop_types_["arrayOf"])(external_prop_types_["node"]).isRequired,
  classes: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"],
    content: external_prop_types_["string"],
    icon: external_prop_types_["string"],
    text: external_prop_types_["string"],
    root_normalPriority: external_prop_types_["string"]
  }),
  onClick: external_prop_types_["func"]
};
// CONCATENATED MODULE: ./src/components/MyAccount/AccountLinks/signOutLink.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/









const SignOutLink = props => {
  const {
    showMenu
  } = props;
  const [, dispatch] = useCartState();
  const {
    pagePaths
  } = useConfigContext();
  const [, {
    signOut
  }] = useUserContext();
  const intl = Object(external_react_intl_["useIntl"])();

  const handleSignOut = async () => {
    dispatch({
      type: 'reset'
    });
    await signOut();

    if (showMenu) {
      showMenu();
    }

    redirectBacktoStorefront();
  };

  const redirectBacktoStorefront = () => {
    if (pagePaths && pagePaths.baseUrl) {
      window.location.href = pagePaths.baseUrl;
    }
  };

  return /*#__PURE__*/external_react_default.a.createElement(MyAccount_accountLink, {
    onClick: handleSignOut
  }, /*#__PURE__*/external_react_default.a.createElement(external_react_feather_["LogOut"], {
    size: 18
  }), intl.formatMessage({
    id: "account:sign-out",
    defaultMessage: [{
      "type": 0,
      "value": "Sign Out"
    }]
  }));
};

SignOutLink.propTypes = {
  showMenu: external_prop_types_["func"]
};
/* harmony default export */ var signOutLink = (SignOutLink);
// CONCATENATED MODULE: ./src/components/MyAccount/AccountLinks/accountInfoLink.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






const AccountInfoLink = props => {
  const {
    showAccountInformation
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement(MyAccount_accountLink, {
    onClick: showAccountInformation
  }, /*#__PURE__*/external_react_default.a.createElement(external_react_feather_["Info"], {
    size: 18
  }), intl.formatMessage({
    id: "account:account-information",
    defaultMessage: [{
      "type": 0,
      "value": "Account Information"
    }]
  }));
};

AccountInfoLink.propTypes = {
  showAccountInformation: external_prop_types_["func"].isRequired
};
/* harmony default export */ var accountInfoLink = (AccountInfoLink);
// CONCATENATED MODULE: ./src/components/MyAccount/AccountLinks/addressBookLink.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






const AddressBookLink = () => {
  const {
    pagePaths
  } = useConfigContext();
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement(MyAccount_accountLink, {
    onClick: () => {
      window.location.href = pagePaths.addressBook;
    }
  }, /*#__PURE__*/external_react_default.a.createElement(external_react_feather_["Book"], {
    size: 18
  }), intl.formatMessage({
    id: "account:address-book",
    defaultMessage: [{
      "type": 0,
      "value": "Address Book"
    }]
  }));
};

/* harmony default export */ var addressBookLink = (AddressBookLink);
// CONCATENATED MODULE: ./src/components/MyAccount/AccountLinks/changePasswordLink.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






const ChangePasswordLink = props => {
  const {
    showChangePassword
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement(MyAccount_accountLink, {
    onClick: showChangePassword
  }, /*#__PURE__*/external_react_default.a.createElement(external_react_feather_["Lock"], {
    size: 18
  }), intl.formatMessage({
    id: "account:change-password",
    defaultMessage: [{
      "type": 0,
      "value": "Change Password"
    }]
  }));
};

ChangePasswordLink.propTypes = {
  showChangePassword: external_prop_types_["func"].isRequired
};
/* harmony default export */ var changePasswordLink = (ChangePasswordLink);
// CONCATENATED MODULE: ./src/components/MyAccount/AccountLinks/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




// CONCATENATED MODULE: ./src/components/MyAccount/myAccount.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const MyAccount = props => {
  const {
    showMenu,
    showChangePassword,
    showAccountInformation
  } = props;
  const [{
    currentUser,
    inProgress
  }] = useUserContext();
  const intl = Object(external_react_intl_["useIntl"])();

  if (inProgress) {
    return /*#__PURE__*/external_react_default.a.createElement("div", {
      className: myAccount_default.a.modal_active
    }, /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, null, intl.formatMessage({
      id: "account:signing-in",
      defaultMessage: [{
        "type": 0,
        "value": "Signing In"
      }]
    })));
  }

  const accountLinks = props.children || /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement(changePasswordLink, {
    showChangePassword: showChangePassword
  }), /*#__PURE__*/external_react_default.a.createElement(addressBookLink, null), /*#__PURE__*/external_react_default.a.createElement(accountInfoLink, {
    showAccountInformation: showAccountInformation
  }), /*#__PURE__*/external_react_default.a.createElement(signOutLink, {
    showMenu: showMenu
  }));
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: myAccount_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: myAccount_default.a.user
  }, /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: myAccount_default.a.title
  }, `${currentUser.firstname} ${currentUser.lastname}`), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: myAccount_default.a.subtitle
  }, currentUser.email)), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: myAccount_default.a.actions
  }, accountLinks));
};

MyAccount.propTypes = {
  showMenu: external_prop_types_["func"],
  showAccountInformation: external_prop_types_["func"].isRequired,
  showChangePassword: external_prop_types_["func"].isRequired
};
/* harmony default export */ var MyAccount_myAccount = (MyAccount);
// CONCATENATED MODULE: ./src/components/MyAccount/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



// EXTERNAL MODULE: ./src/components/ForgotPassword/forgotPasswordForm.css
var forgotPasswordForm = __webpack_require__(70);
var forgotPasswordForm_default = /*#__PURE__*/__webpack_require__.n(forgotPasswordForm);

// CONCATENATED MODULE: ./src/components/ForgotPassword/forgotPasswordForm.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/










/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const ForgotPasswordForm = props => {
  const {
    handleFormSubmit,
    handleCancel
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  const classes = Object.assign({}, forgotPasswordForm_default.a, props.classes || {});
  return /*#__PURE__*/external_react_default.a.createElement(external_informed_["Form"], {
    className: classes.root,
    onSubmit: handleFormSubmit
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:email",
      defaultMessage: [{
        "type": 0,
        "value": "Email address"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    autoComplete: "email",
    field: "email",
    validate: combineValidators([isRequired, validateEmail]),
    validateOnBlur: true,
    "aria-label": "email"
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: classes.buttonContainer
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    disabled: false,
    type: "submit",
    priority: "high",
    "aria-label": "submit"
  }, intl.formatMessage({
    id: "account:forgot-password-submit",
    defaultMessage: [{
      "type": 0,
      "value": "Submit"
    }]
  })), handleCancel && /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    disabled: false,
    type: "button",
    priority: "normal",
    "aria-label": "cancel",
    onClick: handleCancel
  }, intl.formatMessage({
    id: "account:forgot-password-cancel",
    defaultMessage: [{
      "type": 0,
      "value": "Cancel"
    }]
  }))));
};

ForgotPasswordForm.propTypes = {
  handleFormSubmit: external_prop_types_["func"].isRequired,
  handleCancel: external_prop_types_["func"],
  classes: Object(external_prop_types_["shape"])({
    form: external_prop_types_["string"],
    buttonContainer: external_prop_types_["string"]
  })
};
/* harmony default export */ var ForgotPassword_forgotPasswordForm = (ForgotPasswordForm);
// EXTERNAL MODULE: ./src/components/ForgotPassword/formSubmissionSuccessful.css
var formSubmissionSuccessful = __webpack_require__(71);
var formSubmissionSuccessful_default = /*#__PURE__*/__webpack_require__.n(formSubmissionSuccessful);

// CONCATENATED MODULE: ./src/components/ForgotPassword/formSubmissionSuccessful.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const FormSubmissionSuccessful = props => {
  const {
    email,
    onContinue
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  const classes = mergeClasses(formSubmissionSuccessful_default.a, props.classes || {});
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: classes.root
  }, /*#__PURE__*/external_react_default.a.createElement("p", {
    className: classes.text
  }, intl.formatMessage({
    id: "account:forget-password-confirmation",
    defaultMessage: [{
      "type": 0,
      "value": "If there is an account associated with "
    }, {
      "type": 1,
      "value": "email"
    }, {
      "type": 0,
      "value": ", you will receive an email with a link to change your password."
    }]
  }, {
    email
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: classes.buttonContainer
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    "aria-label": "continue-shopping",
    onClick: onContinue
  }, intl.formatMessage({
    id: "account:continue-shopping",
    defaultMessage: [{
      "type": 0,
      "value": "Continue Shopping"
    }]
  }))));
};

FormSubmissionSuccessful.propTypes = {
  email: external_prop_types_["string"].isRequired,
  onContinue: external_prop_types_["func"].isRequired,
  classes: Object(external_prop_types_["shape"])({
    buttonContainer: external_prop_types_["string"],
    root: external_prop_types_["string"],
    text: external_prop_types_["string"]
  })
};
/* harmony default export */ var ForgotPassword_formSubmissionSuccessful = (FormSubmissionSuccessful);
// CONCATENATED MODULE: ./src/queries/mutation_request_password_reset_email.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_request_password_reset_email_graphql = (client_["gql"]`
    mutation($email: String!) {
        requestPasswordResetEmail(email: $email)
    }
`);
// CONCATENATED MODULE: ./src/components/ForgotPassword/useForgotPassword.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const useForgotPasswordForm = () => {
  const [state, setState] = Object(external_react_["useState"])({
    loading: false,
    submitted: false,
    email: null
  });
  const [requestPasswordResetEmail] = Object(client_["useMutation"])(mutation_request_password_reset_email_graphql);
  const handleFormSubmit = Object(external_react_["useCallback"])(async ({
    email
  }) => {
    setState({ ...state,
      loading: true
    });

    try {
      await requestPasswordResetEmail({
        variables: {
          email
        }
      });
    } catch (err) {// Do not output any errors which might indicate if the user email actually exists or not
    } finally {
      setState({ ...state,
        loading: false,
        submitted: true,
        email
      });
    }
  }, [requestPasswordResetEmail]);
  return [state, {
    handleFormSubmit
  }];
};

/* harmony default export */ var useForgotPassword = (useForgotPasswordForm);
// EXTERNAL MODULE: ./src/components/ForgotPassword/forgotPassword.css
var forgotPassword = __webpack_require__(52);
var forgotPassword_default = /*#__PURE__*/__webpack_require__.n(forgotPassword);

// CONCATENATED MODULE: ./src/components/ForgotPassword/forgotPassword.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/








/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const ForgotPassword = props => {
  const {
    onClose,
    onCancel
  } = props;
  const [{
    loading,
    submitted,
    email
  }, {
    handleFormSubmit
  }] = useForgotPassword();
  const intl = Object(external_react_intl_["useIntl"])();
  let content;

  if (loading) {
    content = /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, null, intl.formatMessage({
      id: "common:loading",
      defaultMessage: [{
        "type": 0,
        "value": "Loading"
      }]
    }));
  } else if (submitted) {
    content = /*#__PURE__*/external_react_default.a.createElement(ForgotPassword_formSubmissionSuccessful, {
      email: email,
      onContinue: onClose
    });
  } else {
    content = /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement("p", {
      className: forgotPassword_default.a.instructions
    }, intl.formatMessage({
      id: "account:reset-password-instructions",
      defaultMessage: [{
        "type": 0,
        "value": "Enter your email below to receive a password reset link."
      }]
    })), /*#__PURE__*/external_react_default.a.createElement(ForgotPassword_forgotPasswordForm, {
      handleFormSubmit: handleFormSubmit,
      handleCancel: onCancel
    }));
  }

  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: forgotPassword_default.a.root
  }, content);
};

ForgotPassword.propTypes = {
  onClose: external_prop_types_["func"].isRequired,
  onCancel: external_prop_types_["func"].isRequired
};
/* harmony default export */ var ForgotPassword_forgotPassword = (ForgotPassword);
// CONCATENATED MODULE: ./src/components/ForgotPassword/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



// EXTERNAL MODULE: ./src/components/CreateAccount/createAccount.css
var CreateAccount_createAccount = __webpack_require__(72);
var createAccount_default = /*#__PURE__*/__webpack_require__.n(CreateAccount_createAccount);

// CONCATENATED MODULE: ./src/queries/mutation_create_customer.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_create_customer_graphql = (client_["gql"]`
    mutation createAccount($email: String!, $firstname: String!, $lastname: String!, $password: String) {
        createCustomerV2(input: { email: $email, firstname: $firstname, lastname: $lastname, password: $password }) {
            customer {
                email
                firstname
                lastname
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/components/CreateAccount/useCreateAccount.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

/* harmony default export */ var useCreateAccount = (props => {
  const {
    showAccountCreated
  } = props;
  const [{
    isSignedIn,
    createAccountError,
    inProgress
  }, {
    dispatch
  }] = useUserContext();
  const [createCustomer] = Object(client_["useMutation"])(mutation_create_customer_graphql);

  const handleCreateAccount = async formValues => {
    dispatch({
      type: 'setInProgress'
    });
    const {
      customer: {
        email,
        firstname,
        lastname
      },
      password
    } = formValues;

    try {
      await createCustomer({
        variables: {
          email,
          password,
          firstname,
          lastname
        }
      });
      dispatch({
        type: 'postCreateAccount',
        accountEmail: email
      });
      showAccountCreated();
    } catch (error) {
      dispatch({
        type: 'createAccountError',
        error
      });
    }
  };

  return [{
    isSignedIn,
    createAccountError,
    inProgress
  }, {
    createAccount: handleCreateAccount
  }];
});
// CONCATENATED MODULE: ./src/components/CreateAccount/createAccount.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/














/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CreateAccount = props => {
  const {
    showAccountCreated,
    handleCancel
  } = props;
  const [{
    createAccountError,
    inProgress
  }, {
    createAccount
  }] = useCreateAccount({
    showAccountCreated
  });
  const intl = Object(external_react_intl_["useIntl"])();

  if (inProgress) {
    return /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, {
      message: "Creating account"
    });
  }

  const handleCreateAccount = formValues => {
    createAccount(formValues);
  };

  const errorMessage = createAccountError ? createAccountError : null;
  const classes = mergeClasses(createAccount_default.a, props.classes);
  return /*#__PURE__*/external_react_default.a.createElement(external_informed_["Form"], {
    className: classes.root,
    onSubmit: handleCreateAccount
  }, /*#__PURE__*/external_react_default.a.createElement("p", {
    className: classes.lead
  }, intl.formatMessage({
    id: "account:create-account-lead",
    defaultMessage: [{
      "type": 0,
      "value": "Check out faster, use multiple addresses, track orders and more by creating an account!"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:firstname",
      defaultMessage: [{
        "type": 0,
        "value": "First Name"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "customer.firstname",
    autoComplete: "given-name",
    validate: isRequired,
    validateOnBlur: true,
    "aria-label": "firstname"
  })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:lastname",
      defaultMessage: [{
        "type": 0,
        "value": "Last Name"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "customer.lastname",
    autoComplete: "family-name",
    validate: isRequired,
    validateOnBlur: true,
    "aria-label": "lastname"
  })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:email",
      defaultMessage: [{
        "type": 0,
        "value": "Email address"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "customer.email",
    autoComplete: "email",
    validate: combineValidators([isRequired, validateEmail]),
    validateOnBlur: true,
    "aria-label": "email"
  })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:password",
      defaultMessage: [{
        "type": 0,
        "value": "Password"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "password",
    type: "password",
    autoComplete: "new-password",
    validate: combineValidators([isRequired, [hasLengthAtLeast, 8], validatePassword]),
    validateOnBlur: true,
    "aria-label": "password"
  })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:confirm-password",
      defaultMessage: [{
        "type": 0,
        "value": "Confirm Password"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "confirm",
    type: "password",
    validate: combineValidators([isRequired, validateConfirmPassword]),
    validateOnBlur: true,
    "aria-label": "confirm"
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: classes.subscribe
  }, /*#__PURE__*/external_react_default.a.createElement(components_Checkbox_checkbox, {
    field: "subscribe",
    label: intl.formatMessage({
      id: "account:subscribe-news",
      defaultMessage: [{
        "type": 0,
        "value": "Subscribe to news and updates"
      }]
    }),
    "aria-label": "subscribe"
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: classes.error
  }, errorMessage), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: classes.actions
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    disabled: inProgress,
    type: "submit",
    priority: "high",
    "aria-label": "submit"
  }, intl.formatMessage({
    id: "account:create-submit",
    defaultMessage: [{
      "type": 0,
      "value": "Submit"
    }]
  })), handleCancel && /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    disabled: inProgress,
    type: "button",
    priority: "normal",
    "aria-label": "cancel",
    onClick: handleCancel
  }, intl.formatMessage({
    id: "account:create-cancel",
    defaultMessage: [{
      "type": 0,
      "value": "Cancel"
    }]
  }))));
};

CreateAccount.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    actions: external_prop_types_["string"],
    error: external_prop_types_["string"],
    lead: external_prop_types_["string"],
    root: external_prop_types_["string"],
    subscribe: external_prop_types_["string"]
  }),
  showMyAccount: external_prop_types_["func"].isRequired,
  showAccountCreated: external_prop_types_["func"].isRequired,
  handleCancel: external_prop_types_["func"]
};
/* harmony default export */ var components_CreateAccount_createAccount = (CreateAccount);
// EXTERNAL MODULE: ./src/components/CreateAccount/createAccountSuccess.css
var createAccountSuccess = __webpack_require__(21);
var createAccountSuccess_default = /*#__PURE__*/__webpack_require__.n(createAccountSuccess);

// CONCATENATED MODULE: ./src/components/CreateAccount/createAccountSuccess.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CreateAccountSuccess = props => {
  const {
    showSignIn
  } = props;
  const [{
    createAccountEmail
  }, {
    dispatch
  }] = useUserContext();
  const intl = Object(external_react_intl_["useIntl"])();

  const handleSignIn = () => {
    dispatch({
      type: 'cleanupAccountCreated'
    });
    showSignIn();
  };

  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: createAccountSuccess_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: createAccountSuccess_default.a.body
  }, /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: createAccountSuccess_default.a.header
  }, intl.formatMessage({
    id: "account:account-created-title",
    defaultMessage: [{
      "type": 0,
      "value": "Your account was successfully created"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: createAccountSuccess_default.a.textBlock
  }, intl.formatMessage({
    id: "account:email-confirmation-info",
    defaultMessage: [{
      "type": 0,
      "value": "You will receive a link at "
    }, {
      "type": 1,
      "value": "email"
    }, {
      "type": 0,
      "value": ". Access that link to confirm your email address."
    }]
  }, {
    email: createAccountEmail
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: createAccountSuccess_default.a.actions
  }, /*#__PURE__*/external_react_default.a.createElement(Trigger_trigger, {
    action: handleSignIn
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: createAccountSuccess_default.a.signin
  }, intl.formatMessage({
    id: "account:sign-in",
    defaultMessage: [{
      "type": 0,
      "value": "Sign In"
    }]
  }))))));
};

CreateAccountSuccess.propTypes = {
  showSignIn: external_prop_types_["func"].isRequired
};
/* harmony default export */ var CreateAccount_createAccountSuccess = (CreateAccountSuccess);
// CONCATENATED MODULE: ./src/components/CreateAccount/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


// EXTERNAL MODULE: ./src/components/ChangePassword/changePassword.css
var changePassword = __webpack_require__(22);
var changePassword_default = /*#__PURE__*/__webpack_require__.n(changePassword);

// CONCATENATED MODULE: ./src/queries/mutation_change_password.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_change_password_graphql = (client_["gql"]`
    mutation ChangeCustomerPassword($currentPassword: String!, $newPassword: String!) {
        changeCustomerPassword(currentPassword: $currentPassword, newPassword: $newPassword) {
            __typename
        }
    }
`);
// CONCATENATED MODULE: ./src/components/ChangePassword/changePassword.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/















/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const ChangePassword = props => {
  const {
    showMyAccount,
    handleCancel
  } = props;
  const [{
    token
  }] = useUserContext();
  const [doChangePassword, {
    data,
    loading,
    error
  }] = Object(client_["useMutation"])(mutation_change_password_graphql);
  const intl = Object(external_react_intl_["useIntl"])();

  const handleSubmit = formValues => {
    doChangePassword({
      variables: {
        currentPassword: formValues.oldPassword,
        newPassword: formValues.password
      },
      context: {
        headers: {
          authorization: `Bearer ${token && token.length > 0 ? token : ''}`
        }
      }
    });
  };

  if (loading) {
    return /*#__PURE__*/external_react_default.a.createElement("div", {
      className: changePassword_default.a.root
    }, /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, null, "Loading"));
  }

  if (data) {
    return /*#__PURE__*/external_react_default.a.createElement("div", {
      className: changePassword_default.a.root
    }, /*#__PURE__*/external_react_default.a.createElement("p", null, intl.formatMessage({
      id: "account:password-was-changed",
      defaultMessage: [{
        "type": 0,
        "value": "Your password was changed."
      }]
    })), /*#__PURE__*/external_react_default.a.createElement("div", {
      className: changePassword_default.a.actions
    }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
      priority: "high",
      onClick: showMyAccount
    }, intl.formatMessage({
      id: "common:back",
      defaultMessage: [{
        "type": 0,
        "value": "Back"
      }]
    }))));
  }

  if (!data) {
    return /*#__PURE__*/external_react_default.a.createElement("div", {
      className: changePassword_default.a.root
    }, /*#__PURE__*/external_react_default.a.createElement(external_informed_["Form"], {
      onSubmit: handleSubmit
    }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
      label: intl.formatMessage({
        id: "account:current-password",
        defaultMessage: [{
          "type": 0,
          "value": "Current Password"
        }]
      }),
      required: true
    }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
      field: "oldPassword",
      type: "password",
      validate: combineValidators([isRequired]),
      validateOnBlur: true,
      "aria-label": "old-password"
    })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
      label: intl.formatMessage({
        id: "account:new-password",
        defaultMessage: [{
          "type": 0,
          "value": "New Password"
        }]
      }),
      required: true
    }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
      field: "password",
      type: "password",
      autoComplete: "password",
      validate: combineValidators([isRequired, [hasLengthAtLeast, 8], validatePassword]),
      validateOnBlur: true,
      "aria-label": "password"
    })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
      label: intl.formatMessage({
        id: "account:confirm-new-password",
        defaultMessage: [{
          "type": 0,
          "value": "Confirm New Password"
        }]
      }),
      required: true
    }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
      field: "confirm",
      type: "password",
      validate: combineValidators([isRequired, validateConfirmPassword]),
      validateOnBlur: true,
      "aria-label": "confirm"
    })), error && /*#__PURE__*/external_react_default.a.createElement("div", {
      className: changePassword_default.a.error
    }, parseError(error)), /*#__PURE__*/external_react_default.a.createElement("div", {
      className: changePassword_default.a.actions
    }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
      type: "submit",
      priority: "high",
      "aria-label": "submit"
    }, intl.formatMessage({
      id: "account:change-password",
      defaultMessage: [{
        "type": 0,
        "value": "Change Password"
      }]
    })), handleCancel && /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
      type: "button",
      priority: "normal",
      "aria-label": "cancel",
      onClick: handleCancel
    }, intl.formatMessage({
      id: "account:change-password-cancel",
      defaultMessage: [{
        "type": 0,
        "value": "Cancel"
      }]
    })))));
  }
};

ChangePassword.propTypes = {
  showMyAccount: external_prop_types_["func"].isRequired,
  handleCancel: external_prop_types_["func"]
};
/* harmony default export */ var ChangePassword_changePassword = (ChangePassword);
// CONCATENATED MODULE: ./src/components/ChangePassword/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/AuthBar/myAccountPanel.css
var myAccountPanel = __webpack_require__(73);
var myAccountPanel_default = /*#__PURE__*/__webpack_require__.n(myAccountPanel);

// CONCATENATED MODULE: ./src/components/AuthBar/myAccountPanel.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/








/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AuthModal = ({
  view = 'MENU',
  api,
  children
}) => {
  const {
    showSignIn,
    showMyAccount,
    showMenu,
    showForgotPassword,
    showChangePassword,
    showCreateAccount,
    showAccountCreated,
    handleBack
  } = api;
  let child;

  switch (view) {
    case 'SIGN_IN':
      child = /*#__PURE__*/external_react_default.a.createElement(SignIn_signIn, {
        showMyAccount: showMyAccount,
        showForgotPassword: showForgotPassword,
        showCreateAccount: showCreateAccount
      });
      break;

    case 'MY_ACCOUNT':
      child = /*#__PURE__*/external_react_default.a.createElement(MyAccount_myAccount, {
        showMenu: showMenu,
        showChangePassword: showChangePassword,
        showAccountInformation: () => {}
      }, children);
      break;

    case 'CHANGE_PASSWORD':
      child = /*#__PURE__*/external_react_default.a.createElement(ChangePassword_changePassword, {
        showMyAccount: showMyAccount,
        handleCancel: handleBack
      });
      break;

    case 'FORGOT_PASSWORD':
      child = /*#__PURE__*/external_react_default.a.createElement(ForgotPassword_forgotPassword, {
        onClose: showMenu,
        onCancel: handleBack
      });
      break;

    case 'CREATE_ACCOUNT':
      child = /*#__PURE__*/external_react_default.a.createElement(components_CreateAccount_createAccount, {
        showMyAccount: showMyAccount,
        showAccountCreated: showAccountCreated,
        handleCancel: handleBack
      });
      break;

    case 'ACCOUNT_CREATED':
      child = /*#__PURE__*/external_react_default.a.createElement(CreateAccount_createAccountSuccess, {
        showSignIn: showSignIn
      });
  }

  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: myAccountPanel_default.a.root
  }, child);
};

AuthModal.propTypes = {
  view: external_prop_types_["string"],
  api: Object(external_prop_types_["shape"])({
    showSignIn: external_prop_types_["func"],
    showMyAccount: external_prop_types_["func"],
    showMenu: external_prop_types_["func"],
    showForgotPassword: external_prop_types_["func"],
    showChangePassword: external_prop_types_["func"],
    showCreateAccount: external_prop_types_["func"],
    showAccountCreated: external_prop_types_["func"],
    handleBack: external_prop_types_["func"]
  })
};
/* harmony default export */ var AuthBar_myAccountPanel = (AuthModal);
// EXTERNAL MODULE: ./src/components/AuthBar/container.css
var container = __webpack_require__(53);
var container_default = /*#__PURE__*/__webpack_require__.n(container);

// CONCATENATED MODULE: ./src/components/AuthBar/useNavigationState.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



 // DOM events that are used to talk to the navigation panel

const events = {
  START_ACC_MANAGEMENT: 'aem.accmg.start',
  EXIT_ACC_MANAGEMENT: 'aem.accmg.exit'
};
const ancestors = {
  CREATE_ACCOUNT: 'SIGN_IN',
  FORGOT_PASSWORD: 'SIGN_IN',
  ACCOUNT_CREATED: 'MENU',
  MY_ACCOUNT: 'MENU',
  CHANGE_PASSWORD: 'MY_ACCOUNT',
  SIGN_IN: 'MENU',
  MENU: null
};
const stepTitles = {
  CREATE_ACCOUNT: intl => intl.formatMessage({
    id: "account:create-account",
    defaultMessage: [{
      "type": 0,
      "value": "Create account"
    }]
  }),
  FORGOT_PASSWORD: intl => intl.formatMessage({
    id: "account:password-recovery",
    defaultMessage: [{
      "type": 0,
      "value": "Password recovery"
    }]
  }),
  CHANGE_PASSWORD: intl => intl.formatMessage({
    id: "account:change-password",
    defaultMessage: [{
      "type": 0,
      "value": "Change Password"
    }]
  }),
  MY_ACCOUNT: intl => intl.formatMessage({
    id: "account:my-account",
    defaultMessage: [{
      "type": 0,
      "value": "My account"
    }]
  }),
  ACCOUNT_CREATED: intl => intl.formatMessage({
    id: "account:account-created",
    defaultMessage: [{
      "type": 0,
      "value": "Account created"
    }]
  }),
  SIGN_IN: intl => intl.formatMessage({
    id: "account:sign-in",
    defaultMessage: [{
      "type": 0,
      "value": "Sign In"
    }]
  })
};
const startAccMgEvent = new CustomEvent(events.START_ACC_MANAGEMENT);
const exitAccMgEvent = new CustomEvent(events.EXIT_ACC_MANAGEMENT);
/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const useNavigationState = (props = {
  view: 'MENU'
}) => {
  const [currentView, setCurrentView] = Object(external_react_["useState"])(props.view);
  const intl = Object(external_react_intl_["useIntl"])();
  const {
    mountingPoints: {
      navPanel
    }
  } = useConfigContext();
  const navigationPanel = document.querySelector(navPanel);

  const triggerNavigationEvent = title => {
    const event = new CustomEvent('aem.accmg.step', {
      detail: {
        title
      }
    });
    triggerEvent(event);
  };

  const triggerEvent = event => navigationPanel && navigationPanel.dispatchEvent(event);

  const handleBack = Object(external_react_["useCallback"])(() => {
    if (currentView === null) {
      return;
    }

    const parent = ancestors[currentView];

    if (parent === 'MENU') {
      // no parent view means we're out of the account management process and back to navigation
      // so we're resetting the title
      showMenu();
      return;
    }

    if (parent === 'MY_ACCOUNT') {
      showMyAccount();
      return;
    }

    if (parent) {
      switchTo(parent);
    }
  }, [currentView]);
  useEventListener(document, 'aem.navigation.back', handleBack);

  const switchTo = view => {
    triggerNavigationEvent(stepTitles[view](intl));
    setCurrentView(view);
  };

  const showSignIn = () => {
    triggerEvent(startAccMgEvent);
    switchTo('SIGN_IN');
  };

  const showMenu = () => {
    triggerEvent(exitAccMgEvent);
    setCurrentView('MENU');
  };

  const showMyAccount = () => {
    dispatchEvent(startAccMgEvent);
    switchTo('MY_ACCOUNT');
  };

  const showChangePassword = () => {
    switchTo('CHANGE_PASSWORD');
  };

  const showCreateAccount = () => {
    switchTo('CREATE_ACCOUNT');
  };

  const showForgotPassword = () => {
    switchTo('FORGOT_PASSWORD');
  };

  const showAccountCreated = () => {
    switchTo('ACCOUNT_CREATED');
  };

  const api = {
    showSignIn,
    showMenu,
    showMyAccount,
    showChangePassword,
    showForgotPassword,
    showCreateAccount,
    showAccountCreated
  };
  return [currentView, { ...api,
    switchTo,
    handleBack
  }];
};

/* harmony default export */ var AuthBar_useNavigationState = (useNavigationState);
// CONCATENATED MODULE: ./src/components/AuthBar/container.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Container = props => {
  const [view, api] = AuthBar_useNavigationState();
  const hasModal = view !== 'MENU';
  const modalClassName = hasModal ? container_default.a.modal_open : container_default.a.modal;
  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: "navigation__footer"
  }, /*#__PURE__*/external_react_default.a.createElement(AuthBar_authBar, {
    showSignIn: api.showSignIn,
    showMyAccount: api.showMyAccount
  })), view !== null && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: modalClassName
  }, /*#__PURE__*/external_react_default.a.createElement(AuthBar_myAccountPanel, {
    view: view,
    api: api
  }, props.children)));
};

/* harmony default export */ var AuthBar_container = (Container);
// CONCATENATED MODULE: ./src/components/AuthBar/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/CartTrigger/cartCounter.css
var cartCounter = __webpack_require__(74);
var cartCounter_default = /*#__PURE__*/__webpack_require__.n(cartCounter);

// CONCATENATED MODULE: ./src/components/CartTrigger/cartCounter.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const CartCounter = props => {
  const {
    counter
  } = props;
  return counter > 0 ? /*#__PURE__*/external_react_default.a.createElement("span", {
    className: cartCounter_default.a.root,
    "data-testid": "cart-counter"
  }, counter) : null;
};

CartCounter.propTypes = {
  counter: external_prop_types_default.a.number.isRequired
};
/* harmony default export */ var CartTrigger_cartCounter = (CartCounter);
// EXTERNAL MODULE: ./src/components/CartTrigger/cartTrigger.css
var cartTrigger = __webpack_require__(75);
var cartTrigger_default = /*#__PURE__*/__webpack_require__.n(cartTrigger);

// CONCATENATED MODULE: ./src/components/CartTrigger/cartTrigger.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const cartTrigger_Trigger = () => {
  const [{
    cart
  }, dispatch] = useCartState();
  let cartQuantity = cart && Object.entries(cart).length > 0 ? cart.total_quantity : 0;
  const iconColor = 'rgb(var(--venia-text))';
  const svgAttributes = {
    stroke: iconColor
  };

  if (cartQuantity > 0) {
    svgAttributes.fill = iconColor;
  }

  return /*#__PURE__*/external_react_default.a.createElement("button", {
    className: cartTrigger_default.a.root,
    "aria-label": "Toggle mini cart",
    onClick: () => dispatch({
      type: 'open'
    })
  }, /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
    src: external_react_feather_["ShoppingCart"],
    attrs: svgAttributes
  }), /*#__PURE__*/external_react_default.a.createElement(CartTrigger_cartCounter, {
    counter: cartQuantity
  }));
};

cartTrigger_Trigger.propTypes = {
  children: external_prop_types_default.a.node,
  classes: external_prop_types_default.a.shape({
    root: external_prop_types_default.a.string
  })
};
/* harmony default export */ var CartTrigger_cartTrigger = (cartTrigger_Trigger);
// CONCATENATED MODULE: ./src/components/CartTrigger/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/AccountContainer/accountTrigger.css
var accountTrigger = __webpack_require__(54);
var accountTrigger_default = /*#__PURE__*/__webpack_require__.n(accountTrigger);

// CONCATENATED MODULE: ./src/components/AccountContainer/accountTrigger.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AccountTrigger = props => {
  const [{
    isAccountDropdownOpen
  }, {
    toggleAccountDropdown
  }] = useUserContext();
  const {
    label
  } = props;
  const iconColor = 'rgb(var(--venia-text))';
  const svgAttributes = {
    stroke: iconColor
  };
  return /*#__PURE__*/external_react_default.a.createElement("button", {
    className: accountTrigger_default.a.root,
    "aria-label": "Toggle account dropdown",
    onClick: () => toggleAccountDropdown(!isAccountDropdownOpen)
  }, /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
    src: external_react_feather_["User"],
    attrs: svgAttributes
  }), label && /*#__PURE__*/external_react_default.a.createElement("span", {
    className: accountTrigger_default.a.label
  }, label));
};

AccountTrigger.propTypes = {
  children: external_prop_types_default.a.node,
  classes: external_prop_types_default.a.shape({
    root: external_prop_types_default.a.string
  }),
  label: external_prop_types_default.a.oneOfType([external_prop_types_default.a.object, external_prop_types_default.a.string])
};
/* harmony default export */ var AccountContainer_accountTrigger = (AccountTrigger);
// EXTERNAL MODULE: ./src/components/AccountContainer/accountDropdown.css
var accountDropdown = __webpack_require__(36);
var accountDropdown_default = /*#__PURE__*/__webpack_require__.n(accountDropdown);

// CONCATENATED MODULE: ./src/components/AccountContainer/accountDropdown.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/










/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AccountDropdown = props => {
  const [{
    isAccountDropdownOpen,
    isSignedIn,
    accountDropdownView
  }, {
    showSignIn,
    showMyAccount,
    showForgotPassword,
    showCreateAccount,
    showAccountCreated,
    showChangePassword,
    toggleAccountDropdown
  }] = useUserContext();
  const {
    pagePaths
  } = useConfigContext();
  const rootClass = isAccountDropdownOpen ? accountDropdown_default.a.root_open : accountDropdown_default.a.root;
  let view;

  if (!isSignedIn) {
    switch (accountDropdownView) {
      case 'FORGOT_PASSWORD':
        view = /*#__PURE__*/external_react_default.a.createElement(ForgotPassword_forgotPassword, {
          onClose: showSignIn,
          onCancel: showSignIn
        });
        break;

      case 'CREATE_ACCOUNT':
        view = /*#__PURE__*/external_react_default.a.createElement(components_CreateAccount_createAccount, {
          showMyAccount: showMyAccount,
          showAccountCreated: showAccountCreated,
          handleCancel: showSignIn
        });
        break;

      case 'ACCOUNT_CREATED':
        view = /*#__PURE__*/external_react_default.a.createElement(CreateAccount_createAccountSuccess, {
          showSignIn: showSignIn
        });
        break;

      case 'SIGN_IN':
      default:
        view = /*#__PURE__*/external_react_default.a.createElement(SignIn_signIn, {
          showMyAccount: showMyAccount,
          showForgotPassword: showForgotPassword,
          showCreateAccount: showCreateAccount
        });
    }
  } else {
    switch (accountDropdownView) {
      case 'CHANGE_PASSWORD':
        view = /*#__PURE__*/external_react_default.a.createElement(ChangePassword_changePassword, {
          showMyAccount: showMyAccount,
          handleCancel: showMyAccount
        });
        break;

      case 'MY_ACCOUNT':
      default:
        view = /*#__PURE__*/external_react_default.a.createElement(MyAccount_myAccount, {
          showChangePassword: showChangePassword,
          showAccountInformation: () => {
            window.location.href = pagePaths.accountDetails;
          }
        }, props.children);
    }
  }

  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement(Mask_mask, {
    isOpen: isAccountDropdownOpen,
    onClickHandler: () => toggleAccountDropdown(!isAccountDropdownOpen),
    customClasses: {
      root_active: accountDropdown_default.a.mask_active
    }
  }), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: rootClass,
    "aria-label": "account dropdown"
  }, view));
};

/* harmony default export */ var AccountContainer_accountDropdown = (AccountDropdown);
// CONCATENATED MODULE: ./src/components/AccountContainer/accountContainer.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AccountContainer = props => {
  const [{
    currentUser,
    isSignedIn
  }, {
    getUserDetails
  }] = useUserContext();
  const intl = Object(external_react_intl_["useIntl"])();
  Object(external_react_["useEffect"])(() => {
    if (isSignedIn && currentUser.email === '') {
      getUserDetails();
    }
  }, [getUserDetails]);
  const label = isSignedIn ? intl.formatMessage({
    id: "account:account-icon-text-greeting",
    defaultMessage: [{
      "type": 0,
      "value": "Hi, "
    }, {
      "type": 1,
      "value": "name"
    }]
  }, {
    name: currentUser.firstname
  }) : intl.formatMessage({
    id: "account:account-icon-text-sign-in",
    defaultMessage: [{
      "type": 0,
      "value": "Sign In"
    }]
  });
  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement(AccountContainer_accountTrigger, {
    label: label
  }), /*#__PURE__*/external_react_default.a.createElement(AccountContainer_accountDropdown, null, props.children));
};

/* harmony default export */ var accountContainer = (AccountContainer);
// CONCATENATED MODULE: ./src/components/AccountContainer/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/AddressBook/addressDeleteModal.css
var addressDeleteModal = __webpack_require__(37);
var addressDeleteModal_default = /*#__PURE__*/__webpack_require__.n(addressDeleteModal);

// CONCATENATED MODULE: ./src/components/AddressBook/addressDeleteModal.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AddressDeleteModal = () => {
  const [{
    deleteAddress: address
  }, {
    deleteAddress,
    dispatch
  }] = useUserContext();
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressDeleteModal_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressDeleteModal_default.a.cancel
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "normal",
    type: "button",
    onClick: () => dispatch({
      type: 'endDeletingAddress'
    })
  }, intl.formatMessage({
    id: "account:address-delete-cancel",
    defaultMessage: [{
      "type": 0,
      "value": "Cancel"
    }]
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressDeleteModal_default.a.delete
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    priority: "high",
    type: "button",
    onClick: () => {
      deleteAddress(address);
    }
  }, intl.formatMessage({
    id: "account:address-delete-confirm",
    defaultMessage: [{
      "type": 0,
      "value": "Delete"
    }]
  }))));
};

/* harmony default export */ var AddressBook_addressDeleteModal = (AddressDeleteModal);
// EXTERNAL MODULE: ./src/components/AddressBook/addressItem.css
var addressItem = __webpack_require__(8);
var addressItem_default = /*#__PURE__*/__webpack_require__.n(addressItem);

// CONCATENATED MODULE: ./src/components/AddressBook/addressItem.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AddressItem = props => {
  const {
    address,
    displayType
  } = props;
  const [{
    deleteAddress
  }, {
    dispatch
  }] = useUserContext();
  const rootClass = displayType ? addressItem_default.a[displayType] : addressItem_default.a.root;
  const street = address.street.join(' ');
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: rootClass
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressItem_default.a.summary
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressItem_default.a.name
  }, /*#__PURE__*/external_react_default.a.createElement("strong", null, address.firstname, " ", address.lastname)), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressItem_default.a.street
  }, street), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressItem_default.a.cityRegion
  }, address.city, ", ", address.region.region_code), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressItem_default.a.country
  }, address.country_code)), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressItem_default.a.actions
  }, /*#__PURE__*/external_react_default.a.createElement("button", {
    className: addressItem_default.a.editButton,
    onClick: () => dispatch({
      type: 'beginEditingAddress',
      address
    })
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: addressItem_default.a.icon
  }, /*#__PURE__*/external_react_default.a.createElement(external_react_feather_["Edit"], {
    size: 18
  })), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: addressItem_default.a.label
  }, intl.formatMessage({
    id: "account:address-edit",
    defaultMessage: [{
      "type": 0,
      "value": "Edit"
    }]
  }))), !address.default_shipping && !address.default_billing && /*#__PURE__*/external_react_default.a.createElement("button", {
    className: addressItem_default.a.deleteButton,
    onClick: () => dispatch({
      type: 'beginDeletingAddress',
      address
    })
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: addressItem_default.a.icon
  }, /*#__PURE__*/external_react_default.a.createElement(external_react_feather_["Trash2"], {
    size: 18
  })), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: addressItem_default.a.label
  }, intl.formatMessage({
    id: "account:address-delete",
    defaultMessage: [{
      "type": 0,
      "value": "Delete"
    }]
  }))), !!address.default_shipping && !!address.default_billing && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressItem_default.a.defaultTag
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "account:address-default-tag",
    defaultMessage: [{
      "type": 0,
      "value": "Default"
    }]
  })))), deleteAddress && deleteAddress.id === address.id && /*#__PURE__*/external_react_default.a.createElement(AddressBook_addressDeleteModal, null));
};

AddressItem.propTypes = {
  address: external_prop_types_default.a.object,
  displayType: external_prop_types_default.a.string
};
/* harmony default export */ var AddressBook_addressItem = (AddressItem);
// EXTERNAL MODULE: ./src/components/AddressBook/addAddressButton.css
var addAddressButton = __webpack_require__(30);
var addAddressButton_default = /*#__PURE__*/__webpack_require__.n(addAddressButton);

// CONCATENATED MODULE: ./src/components/AddressBook/addAddressButton.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AddAddressButton = props => {
  const {
    displayType
  } = props;
  const [, {
    dispatch
  }] = useUserContext();
  const intl = Object(external_react_intl_["useIntl"])();
  const rootClass = displayType ? addAddressButton_default.a[displayType] : addAddressButton_default.a.root;
  return /*#__PURE__*/external_react_default.a.createElement("button", {
    className: rootClass,
    "aria-label": "Add an address",
    onClick: () => dispatch({
      type: 'openAddressForm'
    })
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: addAddressButton_default.a.icon
  }, /*#__PURE__*/external_react_default.a.createElement(external_react_feather_["PlusSquare"], {
    size: 18
  })), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: addAddressButton_default.a.label
  }, intl.formatMessage({
    id: "account:add-an-address",
    defaultMessage: [{
      "type": 0,
      "value": "Add an address"
    }]
  })));
};

AddAddressButton.propTypes = {
  displayType: external_prop_types_default.a.string
};
/* harmony default export */ var AddressBook_addAddressButton = (AddAddressButton);
// EXTERNAL MODULE: ./src/components/AddressBook/addressItemsContainer.css
var addressItemsContainer = __webpack_require__(55);
var addressItemsContainer_default = /*#__PURE__*/__webpack_require__.n(addressItemsContainer);

// CONCATENATED MODULE: ./src/components/AddressBook/addressItemsContainer.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AddressItems = props => {
  const {
    displayType
  } = props;
  const [{
    currentUser
  }] = useUserContext();
  const rootClass = displayType ? addressItemsContainer_default.a[displayType] : addressItemsContainer_default.a.root;
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: rootClass
  }, currentUser.addresses.length > 0 && currentUser.addresses.map(address => /*#__PURE__*/external_react_default.a.createElement(AddressBook_addressItem, {
    key: address.id,
    address: address,
    displayType: displayType
  })), /*#__PURE__*/external_react_default.a.createElement(AddressBook_addAddressButton, {
    displayType: displayType
  }));
};

AddressItems.propTypes = {
  displayType: external_prop_types_default.a.string
};
/* harmony default export */ var AddressBook_addressItemsContainer = (AddressItems);
// EXTERNAL MODULE: ./src/components/AddressBook/addressFormContainer.css
var addressFormContainer = __webpack_require__(38);
var addressFormContainer_default = /*#__PURE__*/__webpack_require__.n(addressFormContainer);

// CONCATENATED MODULE: ./src/components/AddressBook/addressFormContainer.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AddressFormContainer = () => {
  const [{
    isShowAddressForm
  }] = useUserContext();
  const {
    countries,
    handleSubmit,
    handleCancel,
    errorMessage,
    updateAddress
  } = useAddressForm();
  const intl = Object(external_react_intl_["useIntl"])();
  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: isShowAddressForm ? addressFormContainer_default.a.mask_active : addressFormContainer_default.a.mask
  }), isShowAddressForm && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressFormContainer_default.a.container
  }, /*#__PURE__*/external_react_default.a.createElement(AddressForm_addressForm, {
    cancel: handleCancel,
    countries: countries,
    formErrorMessage: errorMessage,
    initialValues: updateAddress,
    showDefaultAddressCheckbox: true,
    submit: handleSubmit,
    formHeading: intl.formatMessage({
      id: "account:address-form-heading",
      defaultMessage: [{
        "type": 0,
        "value": "Address"
      }]
    }),
    submitButtonLabel: intl.formatMessage({
      id: "common:save",
      defaultMessage: [{
        "type": 0,
        "value": "Save"
      }]
    })
  })));
};

/* harmony default export */ var AddressBook_addressFormContainer = (AddressFormContainer);
// EXTERNAL MODULE: ./src/components/AddressBook/addressBook.css
var addressBook = __webpack_require__(39);
var addressBook_default = /*#__PURE__*/__webpack_require__.n(addressBook);

// CONCATENATED MODULE: ./src/components/AddressBook/addressBook.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AddressBook = () => {
  const [{
    isSignedIn
  }] = useUserContext();
  const intl = Object(external_react_intl_["useIntl"])();
  const content = isSignedIn ? /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement(AddressBook_addressItemsContainer, null), /*#__PURE__*/external_react_default.a.createElement(AddressBook_addressFormContainer, null)) : /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressBook_default.a.text
  }, intl.formatMessage({
    id: "account:address-book-sign-in-text",
    defaultMessage: [{
      "type": 0,
      "value": "Please Sign in to see your address book."
    }]
  }));
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: addressBook_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("h1", {
    className: addressBook_default.a.title
  }, intl.formatMessage({
    id: "account:address-book",
    defaultMessage: [{
      "type": 0,
      "value": "Address Book"
    }]
  })), content);
};

/* harmony default export */ var AddressBook_addressBook = (AddressBook);
// CONCATENATED MODULE: ./src/components/AddressBook/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/components/BundleProductOptions/checkbox.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




const checkbox_Checkbox = props => {
  const {
    item,
    customization,
    options,
    handleSelectionChange
  } = props;

  const onChange = event => {
    const {
      checked,
      value
    } = event.target;
    let newCustomization;

    if (checked) {
      newCustomization = [...customization];
      const {
        id,
        price,
        quantity
      } = options.find(o => o.id == value);
      newCustomization.push({
        id,
        price,
        quantity
      });
    } else {
      newCustomization = customization.filter(c => c.id != value);
    }

    handleSelectionChange(item.option_id, 1, newCustomization);
  };

  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, options.map(o => /*#__PURE__*/external_react_default.a.createElement("div", {
    key: `option-${item.option_id}-${o.id}`,
    className: "bundleProduct__option"
  }, /*#__PURE__*/external_react_default.a.createElement("label", null, /*#__PURE__*/external_react_default.a.createElement("input", {
    type: "checkbox",
    checked: customization.findIndex(c => c.id === o.id) > -1,
    onChange: onChange,
    value: o.id
  }), ' ', `${o.quantity} x ${o.label} +`, /*#__PURE__*/external_react_default.a.createElement("b", null, /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    currencyCode: o.currency,
    value: o.price
  }))))));
};

checkbox_Checkbox.propTypes = {
  item: Object(external_prop_types_["shape"])({
    required: external_prop_types_["bool"].isRequired,
    option_id: external_prop_types_["number"].isRequired
  }),
  customization: external_prop_types_["array"].isRequired,
  options: external_prop_types_["array"].isRequired,
  handleSelectionChange: external_prop_types_["func"].isRequired
};
/* harmony default export */ var BundleProductOptions_checkbox = (checkbox_Checkbox);
// CONCATENATED MODULE: ./src/components/BundleProductOptions/radio.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





const Radio = props => {
  const {
    item,
    customization,
    options,
    handleSelectionChange
  } = props;
  const {
    quantity
  } = item;
  const {
    can_change_quantity
  } = customization.length > 0 ? options.find(o => o.id === customization[0].id) : {
    can_change_quantity: false
  };
  const intl = Object(external_react_intl_["useIntl"])();

  const onChange = event => {
    const {
      value
    } = event.target;
    let newQuantity = 1;
    const newCustomization = options.filter(o => o.id == value).map(o => {
      newQuantity = o.quantity;
      return {
        id: o.id,
        quantity: newQuantity,
        price: o.price
      };
    });
    handleSelectionChange(item.option_id, newQuantity, newCustomization);
  };

  const onQuantityChange = event => {
    try {
      const newQuantity = parseInt(event.target.value);

      if (newQuantity > 0) {
        handleSelectionChange(item.option_id, newQuantity, customization);
      }
    } catch {
      throw new Error('Invalid quantity entered');
    }
  };

  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, !item.required && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: "bundleProduct__option"
  }, /*#__PURE__*/external_react_default.a.createElement("label", null, /*#__PURE__*/external_react_default.a.createElement("input", {
    type: "radio",
    name: item.option_id,
    value: "",
    onChange: onChange,
    checked: customization.length === 0
  }), ' ', "None")), options.map(o => /*#__PURE__*/external_react_default.a.createElement("div", {
    key: `option-${item.option_id}-${o.id}`,
    className: "bundleProduct__options"
  }, /*#__PURE__*/external_react_default.a.createElement("label", null, /*#__PURE__*/external_react_default.a.createElement("input", {
    type: "radio",
    name: item.option_id,
    value: o.id,
    onChange: onChange,
    checked: customization.findIndex(c => c.id === o.id) > -1
  }), ' ', `${o.label} +`, /*#__PURE__*/external_react_default.a.createElement("b", null, /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    currencyCode: o.currency,
    value: o.price
  }))))), /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: "option__title productFullDetail__quantityTitle"
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "cart:quantity",
    defaultMessage: [{
      "type": 0,
      "value": "Quantity"
    }]
  }))), /*#__PURE__*/external_react_default.a.createElement("input", {
    type: "number",
    min: "1",
    className: "option__quantity",
    disabled: !can_change_quantity,
    value: quantity,
    onChange: onQuantityChange
  }));
};

Radio.propTypes = {
  item: Object(external_prop_types_["shape"])({
    required: external_prop_types_["bool"].isRequired,
    option_id: external_prop_types_["number"].isRequired,
    quantity: external_prop_types_["number"].isRequired
  }),
  customization: external_prop_types_["array"].isRequired,
  options: external_prop_types_["array"].isRequired,
  handleSelectionChange: external_prop_types_["func"].isRequired
};
/* harmony default export */ var BundleProductOptions_radio = (Radio);
// CONCATENATED MODULE: ./src/components/BundleProductOptions/select.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/




const select_Select = props => {
  var _customization$;

  const {
    item,
    customization,
    options,
    handleSelectionChange
  } = props;
  const {
    quantity
  } = item;
  const {
    can_change_quantity
  } = customization.length > 0 ? options.find(o => o.id === customization[0].id) : {
    can_change_quantity: false
  };
  const intl = Object(external_react_intl_["useIntl"])();

  const onChange = event => {
    const {
      value
    } = event.target;
    let newQuantity = 1;
    const newCustomization = options.filter(o => o.id == value).map(o => {
      newQuantity = o.quantity;
      return {
        id: o.id,
        quantity: newQuantity,
        price: o.price
      };
    });
    handleSelectionChange(item.option_id, newQuantity, newCustomization);
  };

  const onQuantityChange = event => {
    try {
      const newQuantity = parseInt(event.target.value);

      if (newQuantity > 0) {
        handleSelectionChange(item.option_id, newQuantity, customization);
      }
    } catch {
      throw new Error('Invalid quantity entered');
    }
  };

  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: "bundleOptionSelect__root"
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__root"
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__input"
  }, /*#__PURE__*/external_react_default.a.createElement("select", {
    "aria-label": item.title,
    className: "select__input field__input bundleProduct__option",
    name: item.id,
    value: (_customization$ = customization[0]) === null || _customization$ === void 0 ? void 0 : _customization$.id,
    onChange: onChange
  }, !item.required && /*#__PURE__*/external_react_default.a.createElement("option", {
    value: ""
  }, "None"), options.map(o => /*#__PURE__*/external_react_default.a.createElement("option", {
    key: `option-${item.option_id}-${o.id}`,
    value: o.id
  }, o.label)))), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__before"
  }), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__after"
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "icon__root"
  }, /*#__PURE__*/external_react_default.a.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: "18",
    height: "18",
    viewBox: "0 0 24 24",
    fill: "none",
    stroke: "currentColor",
    strokeWidth: "2",
    strokeLinecap: "round",
    strokeLinejoin: "round"
  }, /*#__PURE__*/external_react_default.a.createElement("polyline", {
    points: "6 9 12 15 18 9"
  })))))), /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: "bundleProduct__quantityTitle"
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "cart:quantity",
    defaultMessage: [{
      "type": 0,
      "value": "Quantity"
    }]
  }))), /*#__PURE__*/external_react_default.a.createElement("input", {
    type: "number",
    min: "1",
    className: "option__quantity",
    disabled: !can_change_quantity,
    value: quantity,
    onChange: onQuantityChange
  }));
};

select_Select.propTypes = {
  item: Object(external_prop_types_["shape"])({
    required: external_prop_types_["bool"].isRequired,
    option_id: external_prop_types_["number"].isRequired,
    quantity: external_prop_types_["number"].isRequired
  }),
  customization: external_prop_types_["array"].isRequired,
  options: external_prop_types_["array"].isRequired,
  handleSelectionChange: external_prop_types_["func"].isRequired
};
/* harmony default export */ var BundleProductOptions_select = (select_Select);
// CONCATENATED MODULE: ./src/components/BundleProductOptions/multiSelect.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



const MultiSelect = props => {
  const {
    item,
    customization,
    options,
    handleSelectionChange
  } = props;

  const onChange = event => {
    const values = Array.from(event.target.options).filter(e => e.selected).map(e => e.value);
    const newCustomization = options.filter(o => values.includes(o.id.toString())).map(o => {
      return {
        id: o.id,
        quantity: o.quantity,
        price: o.price
      };
    });
    handleSelectionChange(item.option_id, 1, newCustomization);
  };

  return /*#__PURE__*/external_react_default.a.createElement("select", {
    name: item.option_id,
    multiple: "multiple",
    className: "bundleProduct__option field__input",
    size: "5",
    value: customization.map(c => c.id),
    onChange: onChange
  }, options.map(o => /*#__PURE__*/external_react_default.a.createElement("option", {
    key: `option-${item.option_id}-${o.id}`,
    value: o.id
  }, o.label)));
};

MultiSelect.propTypes = {
  item: Object(external_prop_types_["shape"])({
    required: external_prop_types_["bool"].isRequired,
    option_id: external_prop_types_["number"].isRequired
  }),
  customization: external_prop_types_["array"].isRequired,
  options: external_prop_types_["array"].isRequired,
  handleSelectionChange: external_prop_types_["func"].isRequired
};
/* harmony default export */ var multiSelect = (MultiSelect);
// CONCATENATED MODULE: ./src/queries/query_bundle_product.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var query_bundle_product_graphql = (client_["gql"]`
    query bundleProduct($sku: String!) {
        products(filter: { sku: { eq: $sku } }) {
            items {
                sku
                __typename
                id
                uid
                name
                ... on BundleProduct {
                    dynamic_sku
                    dynamic_price
                    dynamic_weight
                    price_view
                    ship_bundle_items
                    items {
                        option_id
                        title
                        required
                        type
                        position
                        sku
                        options {
                            id
                            quantity
                            position
                            is_default
                            price
                            price_type
                            can_change_quantity
                            label
                            product {
                                uid
                                price_range {
                                    maximum_price {
                                        final_price {
                                            currency
                                            value
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/components/BundleProductOptions/bundleProductOptions.js
function bundleProductOptions_extends() { bundleProductOptions_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return bundleProductOptions_extends.apply(this, arguments); }

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/













const BundleProductOptions = props => {
  const bundleProductQuery = useAwaitQuery(query_bundle_product_graphql);
  const {
    mountingPoints: {
      bundleProductOptionsContainer
    }
  } = useConfigContext();
  const productComponentEl = document.querySelector('[data-cmp-is=product]');
  const bundleProductOptionsContainerEl = document.querySelector(bundleProductOptionsContainer);
  const productId = productComponentEl === null || productComponentEl === void 0 ? void 0 : productComponentEl.id;
  const [bundleState, setBundleState] = Object(external_react_["useState"])(null);
  const intl = Object(external_react_intl_["useIntl"])();
  const addToCartRef = Object(external_react_["useRef"])();
  const addToWishlistRef = Object(external_react_["useRef"])();
  let {
    sku,
    showAddToWishList,
    showQuantity,
    useUid,
    autoLoadOptions
  } = { ...props,
    ...((bundleProductOptionsContainerEl === null || bundleProductOptionsContainerEl === void 0 ? void 0 : bundleProductOptionsContainerEl.dataset) || {})
  }; // show-add-to-wish-list is set without a value to the dom,
  // the returned value from the data set is an empty string: ''

  if (showAddToWishList === '') showAddToWishList = true;
  if (showQuantity === '') showQuantity = true;
  if (useUid === '') useUid = true;

  const fetchBundleDetails = async sku => {
    const {
      data,
      error
    } = await bundleProductQuery({
      variables: {
        sku
      },
      fetchPolicy: 'network-only'
    });

    if (error) {
      throw new Error(error);
    }

    let currencyCode;
    const bundleOptions = data.products.items[0];
    const selections = bundleOptions.items.map(item => {
      return {
        option_id: item.option_id,
        required: item.required,
        title: item.title,
        type: item.type,
        quantity: ['checkbox', 'multi'].includes(item.type) ? 1 : item.options.find(o => o.is_default).quantity,
        options: item.options.slice() // return a shallow copy of the array. the original is frozen and cannot be sorted as Array.prototype.sort() sorts the elements of the array in place
        .sort((a, b) => a.position - b.position).map(option => {
          const {
            id,
            can_change_quantity,
            quantity,
            label,
            product: {
              price_range: {
                maximum_price: {
                  final_price: {
                    currency,
                    value
                  }
                }
              }
            }
          } = option;
          return {
            id,
            can_change_quantity,
            quantity,
            label,
            currency,
            price: value
          };
        }),
        customization: item.options.filter(o => o.is_default).map(o => {
          const {
            id,
            quantity,
            product: {
              price_range: {
                maximum_price: {
                  final_price: {
                    value,
                    currency
                  }
                }
              }
            }
          } = o;
          currencyCode = currency;
          return {
            id,
            quantity,
            price: value
          };
        })
      };
    });
    setBundleState({
      selections,
      currencyCode,
      quantity: 1,
      name: bundleOptions.name
    });
  };

  const handleSelectionChange = (option_id, quantity, customization) => {
    const {
      selections
    } = bundleState;
    const selectionIndex = selections.findIndex(s => s.option_id === option_id);
    const selection = selections[selectionIndex];
    selections.splice(selectionIndex, 1, { ...selection,
      quantity,
      customization
    });
    setBundleState({ ...bundleState,
      selections: [...selections]
    });
  };

  const changeBundleQuantity = e => {
    const {
      value
    } = e.target;
    setBundleState({ ...bundleState,
      quantity: value
    });
  };

  const renderItemOptions = item => {
    const {
      option_id,
      required,
      quantity,
      options,
      type,
      customization
    } = item;
    const otherProps = {
      options,
      customization,
      handleSelectionChange
    };

    switch (type) {
      case 'checkbox':
        {
          return /*#__PURE__*/external_react_default.a.createElement(BundleProductOptions_checkbox, bundleProductOptions_extends({
            item: {
              option_id,
              required
            }
          }, otherProps));
        }

      case 'radio':
        {
          return /*#__PURE__*/external_react_default.a.createElement(BundleProductOptions_radio, bundleProductOptions_extends({
            item: {
              option_id,
              required,
              quantity
            }
          }, otherProps));
        }

      case 'select':
        {
          return /*#__PURE__*/external_react_default.a.createElement(BundleProductOptions_select, bundleProductOptions_extends({
            item: {
              option_id,
              required,
              quantity
            }
          }, otherProps));
        }

      case 'drop-down':
        {
          return /*#__PURE__*/external_react_default.a.createElement(BundleProductOptions_select, bundleProductOptions_extends({
            item: {
              option_id,
              required,
              quantity
            }
          }, otherProps));
        }

      case 'multi':
        {
          return /*#__PURE__*/external_react_default.a.createElement(multiSelect, bundleProductOptions_extends({
            item: {
              option_id,
              required
            }
          }, otherProps));
        }
    }
  };

  const canAddToCart = () => {
    const {
      selections
    } = bundleState;
    return selections.reduce((acc, selection) => {
      return acc && (selection.required ? selection.customization.length > 0 : true);
    }, true);
  };

  const addToCart = () => {
    const {
      selections,
      quantity,
      name,
      currencyCode
    } = bundleState;
    const selected_options = [];
    selections.forEach(s => {
      s.customization.forEach(c => {
        selected_options.push(window.btoa(`bundle/${s.option_id}/${c.id}/${s.quantity}`));
      });
    });
    const finalPrice = calculatePrice();
    const options = selections.map(s => {
      return {
        id: s.option_id,
        quantity: s.quantity,
        value: s.customization.map(c => c.id.toString())
      };
    });
    const productData = {
      useUid,
      productId,
      sku,
      parentSku: sku,
      virtual: false,
      bundle: true,
      quantity: quantity,
      options,
      selected_options,
      storefrontData: {
        name,
        currencyCode,
        finalPrice,
        regularPrice: finalPrice,
        selectedOptions: options.map(({
          id,
          value
        }) => ({
          attribute: String(id),
          value: value.join(',')
        }))
      }
    };
    const customEvent = new CustomEvent('aem.cif.add-to-cart', {
      bubbles: true,
      detail: [productData]
    });
    addToCartRef.current.dispatchEvent(customEvent);
  };

  const addToWishlist = () => {
    const {
      selections,
      quantity
    } = bundleState;
    const selected_options = [];
    selections.forEach(s => {
      s.customization.forEach(c => {
        selected_options.push(btoa(`bundle/${s.option_id}/${c.id}/${s.quantity}`));
      });
    });
    const productData = {
      sku,
      quantity: quantity,
      selected_options
    };
    const customEvent = new CustomEvent('aem.cif.add-to-wishlist', {
      bubbles: true,
      detail: [productData]
    });
    addToWishlistRef.current.dispatchEvent(customEvent);
  };

  const calculatePrice = () => {
    const {
      selections
    } = bundleState;
    const price = selections.reduce((acc, selection) => {
      return acc + selection.quantity * selection.customization.reduce((a, c) => {
        return a + c.price * (['checkbox', 'multi'].includes(selection.type) ? c.quantity : 1);
      }, 0);
    }, 0);
    return price;
  };

  const getTotalPrice = () => {
    const {
      currencyCode
    } = bundleState;
    const price = calculatePrice();
    return /*#__PURE__*/external_react_default.a.createElement(Price_price, {
      currencyCode: currencyCode,
      value: price,
      className: "bundlePrice"
    });
  };

  Object(external_react_["useEffect"])(() => {
    if (autoLoadOptions && sku) {
      fetchBundleDetails(sku);
    }
  }, []);

  if (bundleState === null && sku && !autoLoadOptions) {
    return /*#__PURE__*/external_react_default.a.createElement("section", {
      className: "productFullDetail__section productFullDetail__customizeBundle"
    }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
      priority: "high",
      onClick: () => fetchBundleDetails(sku)
    }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
      id: "product:customize-bundle",
      defaultMessage: [{
        "type": 0,
        "value": "Customize"
      }]
    }))));
  } else if (bundleState) {
    return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, bundleState.selections.map(e => {
      const {
        customization,
        options
      } = e;
      const {
        can_change_quantity = false
      } = customization.length > 0 ? options.find(o => o.id === customization[0].id) : {};
      return /*#__PURE__*/external_react_default.a.createElement("section", {
        key: `item-${e.option_id}`,
        className: "productFullDetail__section productFullDetail__bundleProduct"
      }, /*#__PURE__*/external_react_default.a.createElement("h3", {
        className: "option__title"
      }, /*#__PURE__*/external_react_default.a.createElement("span", null, e.title), " ", e.required && /*#__PURE__*/external_react_default.a.createElement("span", {
        className: "required"
      }, " *")), /*#__PURE__*/external_react_default.a.createElement("div", {
        className: `option__input ${!can_change_quantity ? 'option__input--fixed-quantity' : ''}`
      }, renderItemOptions(e)));
    }), /*#__PURE__*/external_react_default.a.createElement("section", {
      className: "productFullDetail__section productFullDetail__bundleProduct"
    }, /*#__PURE__*/external_react_default.a.createElement("h3", {
      className: "summary__title"
    }, /*#__PURE__*/external_react_default.a.createElement("span", {
      className: "required"
    }, "* ", intl.formatMessage({
      id: "product:required-fields",
      defaultMessage: [{
        "type": 0,
        "value": "Required fields"
      }]
    })), /*#__PURE__*/external_react_default.a.createElement("span", {
      className: "priceInfo"
    }, intl.formatMessage({
      id: "product:customization-price",
      defaultMessage: [{
        "type": 0,
        "value": "Your customization"
      }]
    }), ": ", getTotalPrice()))), showQuantity && /*#__PURE__*/external_react_default.a.createElement("section", {
      className: "productFullDetail__quantity productFullDetail__section"
    }, /*#__PURE__*/external_react_default.a.createElement("h2", {
      className: "productFullDetail__quantityTitle option__title"
    }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
      id: "cart:quantity",
      defaultMessage: [{
        "type": 0,
        "value": "Quantity"
      }]
    }))), /*#__PURE__*/external_react_default.a.createElement("div", {
      className: "quantity__root"
    }, /*#__PURE__*/external_react_default.a.createElement("span", {
      className: "fieldIcons__root",
      style: {
        '--iconsBefore': 0,
        '--iconsAfter': 1
      }
    }, /*#__PURE__*/external_react_default.a.createElement("span", {
      className: "fieldIcons__input"
    }, /*#__PURE__*/external_react_default.a.createElement("select", {
      "aria-label": intl.formatMessage({
        id: "product:quantity-label",
        defaultMessage: [{
          "type": 0,
          "value": "Product quantity"
        }]
      }),
      className: "select__input field__input",
      name: "quantity",
      value: bundleState.quantity,
      onChange: changeBundleQuantity
    }, /*#__PURE__*/external_react_default.a.createElement("option", {
      value: "1"
    }, "1"), /*#__PURE__*/external_react_default.a.createElement("option", {
      value: "2"
    }, "2"), /*#__PURE__*/external_react_default.a.createElement("option", {
      value: "3"
    }, "3"), /*#__PURE__*/external_react_default.a.createElement("option", {
      value: "4"
    }, "4"))), /*#__PURE__*/external_react_default.a.createElement("span", {
      className: "fieldIcons__before"
    }), /*#__PURE__*/external_react_default.a.createElement("span", {
      className: "fieldIcons__after"
    }, /*#__PURE__*/external_react_default.a.createElement("span", {
      className: "icon__root"
    }, /*#__PURE__*/external_react_default.a.createElement("svg", {
      xmlns: "http://www.w3.org/2000/svg",
      width: "18",
      height: "18",
      viewBox: "0 0 24 24",
      fill: "none",
      stroke: "currentColor",
      strokeWidth: "2",
      strokeLinecap: "round",
      strokeLinejoin: "round"
    }, /*#__PURE__*/external_react_default.a.createElement("polyline", {
      points: "6 9 12 15 18 9"
    }))))), /*#__PURE__*/external_react_default.a.createElement("p", {
      className: "message-root"
    }))), /*#__PURE__*/external_react_default.a.createElement("section", {
      className: "productFullDetail__cartActions productFullDetail__actions productFullDetail__section"
    }, /*#__PURE__*/external_react_default.a.createElement("button", {
      className: "button__root_highPriority button__root clickable__root button__filled",
      type: "button",
      disabled: !canAddToCart(),
      onClick: addToCart,
      ref: addToCartRef
    }, /*#__PURE__*/external_react_default.a.createElement("span", {
      className: "button__content"
    }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
      id: "product:add-item",
      defaultMessage: [{
        "type": 0,
        "value": "Add to Cart"
      }]
    })))), showAddToWishList && /*#__PURE__*/external_react_default.a.createElement("button", {
      className: "button__root_normalPriority button__root clickable__root",
      type: "button",
      onClick: addToWishlist,
      ref: addToWishlistRef
    }, /*#__PURE__*/external_react_default.a.createElement("span", {
      className: "button__content"
    }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
      id: "product:add-to-wishlist",
      defaultMessage: [{
        "type": 0,
        "value": "Add to Wish List"
      }]
    }))))));
  } else {
    return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null);
  }
};

BundleProductOptions.propTypes = {
  autoLoadOptions: external_prop_types_default.a.bool,
  sku: external_prop_types_default.a.string,
  showAddToWishList: external_prop_types_default.a.bool,
  showQuantity: external_prop_types_default.a.bool,
  useUid: external_prop_types_default.a.bool
};
/* harmony default export */ var bundleProductOptions = (BundleProductOptions);
// CONCATENATED MODULE: ./src/components/BundleProductOptions/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/queries/query_gift_card_product.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var query_gift_card_product_graphql = (client_["gql"]`
    query giftCardProduct($sku: String!) {
        products(filter: { sku: { eq: $sku } }) {
            items {
                id
                uid
                sku
                __typename
                name
                price_range {
                    maximum_price {
                        final_price {
                            currency
                        }
                    }
                }
                ... on GiftCardProduct {
                    giftcard_type
                    allow_open_amount
                    open_amount_min
                    open_amount_max
                    giftcard_amounts {
                        uid
                        value
                    }
                    gift_card_options {
                        title
                        required
                        ... on CustomizableFieldOption {
                            value {
                                uid
                            }
                        }
                    }
                }
            }
        }
    }
`);
// CONCATENATED MODULE: ./src/components/GiftCardOptions/useGiftCardOptions.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



const OPEN_AMOUNT = 'open_amount';

const useGiftCardOptions = props => {
  const {
    sku,
    useUid
  } = props;
  const [giftCardState, setGiftCardState] = Object(external_react_["useState"])(null);
  const giftCardProductQuery = useAwaitQuery(query_gift_card_product_graphql);
  Object(external_react_["useEffect"])(() => {
    const fetchGiftCardOptions = async () => {
      var _giftCardOptions$gift;

      if (!sku) {
        console.error('SKU is not present in the dataset of mountpoint element');
        return;
      }

      const {
        data,
        error
      } = await giftCardProductQuery({
        variables: {
          sku
        },
        fetchPolicy: 'network-only'
      });

      if (error) {
        throw new Error(error);
      }

      const giftCardOptions = data.products.items[0];
      const giftCardValues = {
        quantity: 1,
        open_amount: giftCardOptions.giftcard_amounts.length === 0,
        custom_amount: giftCardOptions.open_amount_min,
        custom_amount_uid: (_giftCardOptions$gift = giftCardOptions.gift_card_options.find(o => o.title.toLowerCase() === 'custom giftcard amount')) === null || _giftCardOptions$gift === void 0 ? void 0 : _giftCardOptions$gift.value.uid,
        selected_amount: '',
        entered_options: giftCardOptions.gift_card_options.filter(o => o.title.toLowerCase() !== 'custom giftcard amount').reduce((prev, curr) => ({ ...prev,
          [curr.value.uid]: ''
        }), {})
      };
      setGiftCardState({
        giftCardOptions,
        giftCardValues
      });
    };

    fetchGiftCardOptions();
  }, [sku, giftCardProductQuery]);

  const changeAmountSelection = e => {
    const {
      value
    } = e.target;
    setGiftCardState({ ...giftCardState,
      giftCardValues: { ...giftCardState.giftCardValues,
        open_amount: value === OPEN_AMOUNT,
        selected_amount: value
      }
    });
  };

  const changeCustomAmount = e => {
    const {
      value
    } = e.target;
    setGiftCardState({ ...giftCardState,
      giftCardValues: { ...giftCardState.giftCardValues,
        custom_amount: value
      }
    });
  };

  const changeOptionValue = (uid, value) => {
    setGiftCardState({ ...giftCardState,
      giftCardValues: { ...giftCardState.giftCardValues,
        entered_options: { ...giftCardState.giftCardValues.entered_options,
          [uid]: value
        }
      }
    });
  };

  const changeQuantity = e => {
    setGiftCardState({ ...giftCardState,
      giftCardValues: { ...giftCardState.giftCardValues,
        quantity: e.target.value
      }
    });
  };

  const canAddToCart = () => {
    if (giftCardState === null) return false;
    const {
      giftCardOptions: {
        gift_card_options,
        open_amount_min,
        open_amount_max
      },
      giftCardValues: {
        open_amount,
        custom_amount,
        selected_amount,
        entered_options
      }
    } = giftCardState;

    if (open_amount) {
      if (Math.fround(open_amount_min) > Math.fround(custom_amount) || Math.fround(custom_amount) > Math.fround(open_amount_max)) {
        return false;
      }
    } else {
      if (selected_amount === '') {
        return false;
      }
    }

    for (const option of gift_card_options.filter(o => o.required && o.title.toLowerCase() !== 'custom giftcard amount')) {
      if (entered_options[option.value.uid].trim() === '') {
        return false;
      }
    }

    return true;
  };

  const addToCart = (eventTarget = document) => {
    if (canAddToCart()) {
      const {
        giftCardValues: {
          quantity,
          open_amount,
          custom_amount,
          custom_amount_uid,
          selected_amount,
          entered_options
        }
      } = giftCardState;
      const productData = {
        useUid,
        sku,
        parentSku: sku,
        virtual: false,
        giftCard: true,
        quantity: quantity,
        entered_options: Object.entries(entered_options).map(o => ({
          uid: o[0],
          value: o[1]
        }))
      };

      if (open_amount) {
        productData.entered_options.push({
          uid: custom_amount_uid,
          value: custom_amount + ''
        });
      } else {
        productData.selected_options = [selected_amount];
      }

      const customEvent = new CustomEvent('aem.cif.add-to-cart', {
        bubbles: true,
        detail: [productData]
      });
      eventTarget.dispatchEvent(customEvent);
    }
  };

  const addToWishlist = (eventTarget = document) => {
    const {
      giftCardValues: {
        quantity
      }
    } = giftCardState;
    const productData = {
      sku,
      quantity
    };
    const customEvent = new CustomEvent('aem.cif.add-to-wishlist', {
      bubbles: true,
      detail: [productData]
    });
    eventTarget.dispatchEvent(customEvent);
  };

  return [giftCardState, {
    changeAmountSelection,
    changeCustomAmount,
    changeOptionValue,
    changeQuantity,
    canAddToCart,
    addToCart,
    addToWishlist
  }];
};

/* harmony default export */ var GiftCardOptions_useGiftCardOptions = (useGiftCardOptions);
// CONCATENATED MODULE: ./src/components/GiftCardOptions/giftCardOptions.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/






const giftCardOptions_OPEN_AMOUNT = 'open_amount';
const messages = Object(external_react_intl_["defineMessages"])({
  amountSelectionLabel: {
    id: "product:gift-card-amount-selection",
    defaultMessage: [{
      "type": 0,
      "value": "Amount"
    }]
  },
  chooseAmount: {
    id: "product:gift-card-choose-amount",
    defaultMessage: [{
      "type": 0,
      "value": "Choose an Amount"
    }]
  },
  otherAmount: {
    id: "product:gift-card-other-amount",
    defaultMessage: [{
      "type": 0,
      "value": "Other Amount"
    }]
  },
  customAmountLabel: {
    id: "product:gift-card-custom-amount",
    defaultMessage: [{
      "type": 0,
      "value": "Amount in"
    }]
  },
  customPriceMinimum: {
    id: "product:gift-card-custom-ammount-minimum",
    defaultMessage: [{
      "type": 0,
      "value": "Minimum"
    }]
  },
  customPriceMaximum: {
    id: "product:gift-card-custom-ammount-maximum",
    defaultMessage: [{
      "type": 0,
      "value": "Maximum"
    }]
  }
});

const GiftCardOptions = props => {
  const {
    sku,
    showAddToWishList,
    showQuantity,
    useUid
  } = props;
  const [giftCardState, {
    changeAmountSelection,
    changeCustomAmount,
    changeOptionValue,
    changeQuantity,
    canAddToCart,
    addToCart,
    addToWishlist
  }] = GiftCardOptions_useGiftCardOptions({
    sku,
    useUid
  });
  const intl = Object(external_react_intl_["useIntl"])();
  const addToCartRef = Object(external_react_["useRef"])();
  const addToWishListRef = Object(external_react_["useRef"])();

  if (giftCardState === null) {
    return /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, null);
  }

  const {
    giftCardOptions: {
      giftcard_amounts,
      gift_card_options,
      allow_open_amount,
      open_amount_min,
      open_amount_max,
      price_range: {
        maximum_price: {
          final_price: {
            currency
          }
        }
      }
    },
    giftCardValues: {
      quantity,
      open_amount,
      custom_amount,
      selected_amount,
      entered_options
    }
  } = giftCardState;
  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, giftcard_amounts.length > 0 && /*#__PURE__*/external_react_default.a.createElement("section", {
    className: "productFullDetail__section productFullDetail__giftCardProduct"
  }, /*#__PURE__*/external_react_default.a.createElement("h3", {
    className: "option__title"
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage(messages.amountSelectionLabel)), ' ', /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "required"
  }, " *")), /*#__PURE__*/external_react_default.a.createElement("div", null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: "giftCardOptionSelect__root"
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__root"
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__input"
  }, /*#__PURE__*/external_react_default.a.createElement("select", {
    "aria-label": intl.formatMessage(messages.amountSelectionLabel),
    className: "select__input field__input giftCardProduct__option",
    value: selected_amount,
    onChange: changeAmountSelection
  }, /*#__PURE__*/external_react_default.a.createElement("option", {
    value: ""
  }, intl.formatMessage(messages.chooseAmount), "..."), giftcard_amounts.map(o => /*#__PURE__*/external_react_default.a.createElement("option", {
    key: o.uid,
    value: o.uid
  }, o.value)), allow_open_amount && /*#__PURE__*/external_react_default.a.createElement("option", {
    value: giftCardOptions_OPEN_AMOUNT
  }, intl.formatMessage(messages.otherAmount), "..."))), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__before"
  }), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__after"
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "icon__root"
  }, /*#__PURE__*/external_react_default.a.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: "18",
    height: "18",
    viewBox: "0 0 24 24",
    fill: "none",
    stroke: "currentColor",
    strokeWidth: "2",
    strokeLinecap: "round",
    strokeLinejoin: "round"
  }, /*#__PURE__*/external_react_default.a.createElement("polyline", {
    points: "6 9 12 15 18 9"
  })))))))), open_amount && /*#__PURE__*/external_react_default.a.createElement("section", {
    className: "productFullDetail__section productFullDetail__giftCardProduct"
  }, /*#__PURE__*/external_react_default.a.createElement("h3", {
    className: "option__title"
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage(messages.customAmountLabel), " ", currency), ' ', /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "required"
  }, " *")), /*#__PURE__*/external_react_default.a.createElement("div", null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: "giftCardOptionSelect__root"
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, /*#__PURE__*/external_react_default.a.createElement("input", {
    type: "number",
    "aria-label": intl.formatMessage(messages.customAmountLabel),
    className: "field__input",
    min: open_amount_min,
    max: open_amount_max,
    value: custom_amount,
    onChange: changeCustomAmount
  })), /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage(messages.customPriceMinimum), ":", ' ', /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    currencyCode: currency,
    value: open_amount_min
  }), ' ', intl.formatMessage(messages.customPriceMaximum), ":", ' ', /*#__PURE__*/external_react_default.a.createElement(Price_price, {
    currencyCode: currency,
    value: open_amount_max
  }))))), gift_card_options.filter(o => o.title.toLowerCase() !== 'custom giftcard amount').map(o => /*#__PURE__*/external_react_default.a.createElement("section", {
    key: o.value.uid,
    className: "productFullDetail__section productFullDetail__giftCardProduct"
  }, /*#__PURE__*/external_react_default.a.createElement("h3", {
    className: "option__title"
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, o.title), " ", o.required && /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "required"
  }, " *")), /*#__PURE__*/external_react_default.a.createElement("div", null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: "giftCardOptionSelect__root"
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, /*#__PURE__*/external_react_default.a.createElement("input", {
    type: "text",
    "aria-label": o.title,
    className: "field__input",
    value: entered_options[o.value.uid],
    onChange: e => changeOptionValue(o.value.uid, e.target.value)
  })))))), showQuantity && /*#__PURE__*/external_react_default.a.createElement("section", {
    className: "productFullDetail__quantity productFullDetail__section"
  }, /*#__PURE__*/external_react_default.a.createElement("h2", {
    className: "productFullDetail__quantityTitle option__title"
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "cart:quantity",
    defaultMessage: [{
      "type": 0,
      "value": "Quantity"
    }]
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: "quantity__root"
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__root",
    style: {
      '--iconsBefore': 0,
      '--iconsAfter': 1
    }
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__input"
  }, /*#__PURE__*/external_react_default.a.createElement("select", {
    "aria-label": intl.formatMessage({
      id: "product:quantity-label",
      defaultMessage: [{
        "type": 0,
        "value": "Product quantity"
      }]
    }),
    className: "select__input field__input",
    name: "quantity",
    value: quantity,
    onChange: changeQuantity
  }, /*#__PURE__*/external_react_default.a.createElement("option", {
    value: "1"
  }, "1"), /*#__PURE__*/external_react_default.a.createElement("option", {
    value: "2"
  }, "2"), /*#__PURE__*/external_react_default.a.createElement("option", {
    value: "3"
  }, "3"), /*#__PURE__*/external_react_default.a.createElement("option", {
    value: "4"
  }, "4"))), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__before"
  }), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "fieldIcons__after"
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "icon__root"
  }, /*#__PURE__*/external_react_default.a.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: "18",
    height: "18",
    viewBox: "0 0 24 24",
    fill: "none",
    stroke: "currentColor",
    strokeWidth: "2",
    strokeLinecap: "round",
    strokeLinejoin: "round"
  }, /*#__PURE__*/external_react_default.a.createElement("polyline", {
    points: "6 9 12 15 18 9"
  }))))), /*#__PURE__*/external_react_default.a.createElement("p", {
    className: "message-root"
  }))), /*#__PURE__*/external_react_default.a.createElement("section", {
    className: "productFullDetail__cartActions productFullDetail__actions productFullDetail__section"
  }, /*#__PURE__*/external_react_default.a.createElement("button", {
    className: "button__root_highPriority button__root clickable__root button__filled",
    type: "button",
    disabled: !canAddToCart(),
    onClick: () => addToCart(addToCartRef.current),
    ref: addToCartRef
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "button__content"
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "product:add-item",
    defaultMessage: [{
      "type": 0,
      "value": "Add to Cart"
    }]
  })))), showAddToWishList && /*#__PURE__*/external_react_default.a.createElement("button", {
    className: "button__root_normalPriority button__root clickable__root",
    type: "button",
    onClick: () => addToWishlist(addToWishListRef.current),
    ref: addToWishListRef
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: "button__content"
  }, /*#__PURE__*/external_react_default.a.createElement("span", null, intl.formatMessage({
    id: "product:add-to-wishlist",
    defaultMessage: [{
      "type": 0,
      "value": "Add to Wish List"
    }]
  }))))));
};

GiftCardOptions.propTypes = {
  sku: external_prop_types_default.a.string.required,
  showAddToWishList: external_prop_types_default.a.bool,
  showQuantity: external_prop_types_default.a.bool,
  useUid: external_prop_types_default.a.bool
};
/* harmony default export */ var giftCardOptions = (GiftCardOptions);
// CONCATENATED MODULE: ./src/components/GiftCardOptions/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: external "react-dom"
var external_react_dom_ = __webpack_require__(76);
var external_react_dom_default = /*#__PURE__*/__webpack_require__.n(external_react_dom_);

// CONCATENATED MODULE: ./src/components/Portal/Portal.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





const withSuspense = Component => {
  let WithSuspense = props => {
    return /*#__PURE__*/external_react_default.a.createElement(external_react_["Suspense"], {
      fallback: /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, null)
    }, /*#__PURE__*/external_react_default.a.createElement(Component, props));
  };

  WithSuspense.displayName = `withSuspense(${Component.displayName || Component.name})`;
  return WithSuspense;
};

const Portal = props => {
  let {
    selector,
    children
  } = props;
  let elem;

  if (selector instanceof HTMLElement) {
    elem = selector;
  } else if (typeof selector === 'string') {
    elem = document.querySelector(selector);
  }

  if (elem) {
    // Only render children if mounting point is available
    return /*#__PURE__*/external_react_dom_default.a.createPortal(children, elem);
  }

  return null;
};

Portal.propTypes = {
  selector: external_prop_types_default.a.oneOfType([external_prop_types_default.a.string, external_prop_types_default.a.instanceOf(HTMLElement)]).isRequired
};
/* harmony default export */ var Portal_Portal = (withSuspense(Portal));
// CONCATENATED MODULE: ./src/components/Portal/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/utils/useEditorEvents.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


/**
 * This hook listens to messages from the AEM Sites editor, when in editing mode
 * and triggers a re-render of components using the hook.
 */

const useEditorEvents = () => {
  const [, setState] = Object(external_react_["useState"])(0);
  const [wcmmode] = useCookieValue('wcmmode');

  const onMessage = event => {
    // Drop events from unknown origins
    if (event.origin !== window.location.origin) {
      return;
    } // Drop events that are not AEM Sites editor commands


    if (!event.data || !event.data.msg || event.data.msg !== 'cqauthor-cmd') {
      return;
    } // Skip commands that do not require a re-render


    if (event.data.data && event.data.data.cmd && event.data.data.cmd === 'toggleClass') {
      return;
    } // Update state to force re-render


    setState(state => state + 1);
  };

  Object(external_react_["useEffect"])(() => {
    // Only during editing
    if (wcmmode !== 'edit') {
      return;
    }

    window.addEventListener('message', onMessage, false);
    return () => {
      window.removeEventListener('message', onMessage, false);
    };
  }, []);
};

/* harmony default export */ var utils_useEditorEvents = (useEditorEvents);
// CONCATENATED MODULE: ./src/components/PortalPlacer/PortalPlacer.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





const PortalPlacer = props => {
  const {
    selector,
    component: Cmp
  } = props;
  utils_useEditorEvents();
  const elems = document.querySelectorAll(selector);
  const children = [...elems].map((elem, index) => {
    // Convert empty dataset keys to boolean values
    const dataset = {
      hostElement: elem,
      ...elem.dataset
    };
    Object.keys(dataset).forEach(key => {
      if (dataset[key] === '') {
        dataset[key] = true;
      }
    });
    return /*#__PURE__*/external_react_default.a.createElement(Portal_Portal, {
      key: index,
      selector: elem
    }, /*#__PURE__*/external_react_default.a.createElement(Cmp, dataset));
  });
  return /*#__PURE__*/external_react_default.a.createElement(external_react_default.a.Fragment, null, children);
};

PortalPlacer.propTypes = {
  selector: external_prop_types_default.a.string.isRequired,
  component: external_prop_types_default.a.func.isRequired
};
/* harmony default export */ var PortalPlacer_PortalPlacer = (PortalPlacer);
// CONCATENATED MODULE: ./src/components/PortalPlacer/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/queries/mutation_reset_password.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var mutation_reset_password_graphql = (client_["gql"]`
    mutation($email: String!, $resetPasswordToken: String!, $newPassword: String!) {
        resetPassword(email: $email, resetPasswordToken: $resetPasswordToken, newPassword: $newPassword)
    }
`);
// CONCATENATED MODULE: ./src/components/ResetPassword/useResetPassword.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const useResetPassword = () => {
  const [status, setStatus] = Object(external_react_["useState"])('new');
  const [resetPassword] = Object(client_["useMutation"])(mutation_reset_password_graphql);
  const handleFormSubmit = Object(external_react_["useCallback"])(async ({
    email,
    token,
    password
  }) => {
    setStatus('loading');

    try {
      await resetPassword({
        variables: {
          email,
          resetPasswordToken: token,
          newPassword: password
        }
      });
      setStatus('done');
    } catch (err) {
      setStatus('error');
    }
  }, [resetPassword]);
  return [status, {
    handleFormSubmit
  }];
};

/* harmony default export */ var ResetPassword_useResetPassword = (useResetPassword);
// EXTERNAL MODULE: ./src/components/ResetPassword/ResetPassword.css
var ResetPassword = __webpack_require__(15);
var ResetPassword_default = /*#__PURE__*/__webpack_require__.n(ResetPassword);

// CONCATENATED MODULE: ./src/components/ResetPassword/ResetPassword.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/












/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const ResetPassword_ResetPassword = () => {
  const intl = Object(external_react_intl_["useIntl"])();
  const queryParams = useQueryParams();
  const token = queryParams.get('token');
  const [status, {
    handleFormSubmit
  }] = ResetPassword_useResetPassword();

  const onSubmit = formValues => {
    const {
      email,
      password
    } = formValues;
    handleFormSubmit({
      email,
      password,
      token
    });
  };

  if (!token) {
    return /*#__PURE__*/external_react_default.a.createElement("div", {
      className: ResetPassword_default.a.error
    }, intl.formatMessage({
      id: "account:reset-password-missing-token",
      defaultMessage: [{
        "type": 0,
        "value": "Missing or invalid token."
      }]
    }));
  }

  if (status === 'loading') {
    return /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, null, intl.formatMessage({
      id: "common:loading",
      defaultMessage: [{
        "type": 0,
        "value": "Loading"
      }]
    }));
  }

  if (status === 'error') {
    return /*#__PURE__*/external_react_default.a.createElement("div", {
      className: ResetPassword_default.a.error
    }, intl.formatMessage({
      id: "account:reset-password-error",
      defaultMessage: [{
        "type": 0,
        "value": "Could not reset password."
      }]
    }));
  }

  if (status === 'done') {
    return /*#__PURE__*/external_react_default.a.createElement("div", {
      className: ResetPassword_default.a.root
    }, /*#__PURE__*/external_react_default.a.createElement("p", {
      className: ResetPassword_default.a.lead
    }, intl.formatMessage({
      id: "account:reset-password-success",
      defaultMessage: [{
        "type": 0,
        "value": "Your password was changed. Please log in with your new password."
      }]
    })));
  }

  return /*#__PURE__*/external_react_default.a.createElement(external_informed_["Form"], {
    className: ResetPassword_default.a.root,
    onSubmit: onSubmit
  }, /*#__PURE__*/external_react_default.a.createElement("p", {
    className: ResetPassword_default.a.lead
  }, intl.formatMessage({
    id: "account:reset-password-lead",
    defaultMessage: [{
      "type": 0,
      "value": "Please choose a new password to complete the password reset."
    }]
  })), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: ResetPassword_default.a.fields
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:email",
      defaultMessage: [{
        "type": 0,
        "value": "Email address"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "email",
    autoComplete: "email",
    validate: combineValidators([isRequired, validateEmail]),
    validateOnBlur: true,
    "aria-label": "email"
  })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:new-password",
      defaultMessage: [{
        "type": 0,
        "value": "New Password"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "password",
    type: "password",
    autoComplete: "new-password",
    validate: combineValidators([isRequired, [hasLengthAtLeast, 8], validatePassword]),
    validateOnBlur: true,
    "aria-label": "password"
  })), /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: intl.formatMessage({
      id: "account:new-password-confirm",
      defaultMessage: [{
        "type": 0,
        "value": "Confirm new Password"
      }]
    }),
    required: true
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "confirm",
    type: "password",
    validate: combineValidators([isRequired, validateConfirmPassword]),
    validateOnBlur: true,
    "aria-label": "confirm"
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: ResetPassword_default.a.submit
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    type: "submit",
    priority: "high",
    "aria-label": "submit"
  }, intl.formatMessage({
    id: "account:reset-password",
    defaultMessage: [{
      "type": 0,
      "value": "Reset Password"
    }]
  }))));
};

/* harmony default export */ var components_ResetPassword_ResetPassword = (ResetPassword_ResetPassword);
// CONCATENATED MODULE: ./src/components/ResetPassword/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/components/AccountDetails/useAccountDetails.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const useAccountDetails = props => {
  const {
    getCustomerInformationQuery,
    setCustomerInformationMutation,
    changeCustomerPasswordMutation
  } = props;
  const [{
    isSignedIn
  }] = useUserContext(); // control the whether the edit form is shown or not

  const [isUpdateMode, setIsUpdateMode] = Object(external_react_["useState"])(false); // control whether we show the "new password" field

  const [shouldShowNewPasswordField, setShowNewPassword] = Object(external_react_["useState"])(false); // control whether we show the error or not.

  const [displayError, setDisplayError] = Object(external_react_["useState"])(false);
  const {
    data: accountInformationData
  } = Object(client_["useQuery"])(getCustomerInformationQuery, {
    skip: !isSignedIn,
    fetchPolicy: 'cache-and-network',
    nextFetchPolicy: 'cache-first'
  });
  const [setCustomerInformation, {
    loading: isUpdatingCustomer,
    error: customerInformationUpdateError
  }] = Object(client_["useMutation"])(setCustomerInformationMutation, {
    refetchQueries: ['GetCustomerInformation']
  });
  const [changeCustomerPassword, {
    loading: isChangingCustomerPassword,
    error: changePasswordError
  }] = Object(client_["useMutation"])(changeCustomerPasswordMutation);
  const initialValues = Object(external_react_["useMemo"])(() => {
    if (accountInformationData) {
      return {
        customer: accountInformationData.customer
      };
    }
  }, [accountInformationData]);
  const showEditForm = Object(external_react_["useCallback"])(() => {
    setIsUpdateMode(true); // hide the previous error message, if any

    setDisplayError(false);
  }, [setIsUpdateMode]);
  const handleCancel = Object(external_react_["useCallback"])(() => {
    setIsUpdateMode(false);
    setShowNewPassword(false);
  }, [setIsUpdateMode, setShowNewPassword]);
  const handleShowNewPasswordField = Object(external_react_["useCallback"])(() => {
    setShowNewPassword(true);
  }, [setShowNewPassword]);
  const handleSubmit = Object(external_react_["useCallback"])(async values => {
    const {
      firstname,
      lastname,
      email,
      password,
      newPassword
    } = values;

    try {
      if (initialValues.customer.firstname !== firstname || initialValues.customer.lastname !== lastname || initialValues.customer.email !== email) {
        // we have to send the password when we change the email address
        await setCustomerInformation({
          variables: {
            firstname,
            lastname,
            email,
            password
          }
        });
      } // if we have a "new password" value we must change the password as well


      if (password && newPassword) {
        await changeCustomerPassword({
          variables: {
            currentPassword: password,
            newPassword
          }
        });
      }

      handleCancel();
    } catch {
      setDisplayError(true);
      return;
    }
  }, [setCustomerInformation, handleCancel, changeCustomerPassword, initialValues]);
  const errors = displayError ? [customerInformationUpdateError, changePasswordError] : [];
  return {
    initialValues,
    formErrors: errors,
    isSignedIn,
    isUpdateMode,
    isDisabled: isUpdatingCustomer || isChangingCustomerPassword,
    showEditForm,
    handleCancel,
    handleSubmit,
    shouldShowNewPasswordField,
    handleShowNewPasswordField
  };
};

/* harmony default export */ var AccountDetails_useAccountDetails = (useAccountDetails);
// CONCATENATED MODULE: ./src/queries/query_get_customer_information.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/* harmony default export */ var query_get_customer_information_graphql = (client_["gql"]`
    query GetCustomerInformation {
        customer {
            firstname
            lastname
            email
        }
    }
`);
// CONCATENATED MODULE: ./src/queries/mutation_update_customer_information.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
 // TODO: updateCustomer mutation is deprecated and needs to be changed to updateCustomerV2. This new mutation doesn't
//       allow to change passwords or email address. Use updateCustomerEmail and changeCustomerPassword for this.

/* harmony default export */ var mutation_update_customer_information_graphql = (client_["gql"]`
    mutation UpdateCustomerInformation($firstname: String, $lastname: String, $email: String, $password: String) {
        updateCustomer(input: { firstname: $firstname, lastname: $lastname, email: $email, password: $password }) {
            customer {
                firstname
                lastname
                email
            }
        }
    }
`);
// EXTERNAL MODULE: ./src/components/AccountDetails/accountDetails.css
var accountDetails = __webpack_require__(11);
var accountDetails_default = /*#__PURE__*/__webpack_require__.n(accountDetails);

// EXTERNAL MODULE: ./src/components/Dialog/dialog.css
var dialog = __webpack_require__(10);
var dialog_default = /*#__PURE__*/__webpack_require__.n(dialog);

// CONCATENATED MODULE: ./src/components/Dialog/dialog.js
function dialog_extends() { dialog_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return dialog_extends.apply(this, arguments); }

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/








/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Dialog = props => {
  const {
    cancelText,
    children,
    confirmText,
    formProps,
    isModal,
    isOpen,
    onCancel,
    onConfirm,
    shouldDisableAllButtons,
    shouldDisableConfirmButton,
    title,
    rootContainerSelector
  } = props;
  const rootClass = isOpen ? dialog_default.a.root_open : dialog_default.a.root;
  const isMaskDisabled = shouldDisableAllButtons || isModal;
  const confirmButtonDisabled = shouldDisableAllButtons || shouldDisableConfirmButton;
  const confirmButtonClasses = {
    root_highPriority: dialog_default.a.confirmButton
  };
  const maybeCloseXButton = !isModal ? /*#__PURE__*/external_react_default.a.createElement("button", {
    className: dialog_default.a.headerButton,
    disabled: shouldDisableAllButtons,
    onClick: onCancel,
    type: "reset"
  }, /*#__PURE__*/external_react_default.a.createElement(components_Icon_icon, {
    src: external_react_feather_["X"]
  })) : null;
  return /*#__PURE__*/external_react_default.a.createElement(Portal_Portal, {
    selector: rootContainerSelector
  }, /*#__PURE__*/external_react_default.a.createElement("aside", {
    className: rootClass
  }, /*#__PURE__*/external_react_default.a.createElement(external_informed_["Form"], dialog_extends({
    className: dialog_default.a.form,
    onSubmit: onConfirm
  }, formProps), /*#__PURE__*/external_react_default.a.createElement("button", {
    className: dialog_default.a.mask,
    disabled: isMaskDisabled,
    onClick: onCancel,
    type: "reset"
  }), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: dialog_default.a.dialog
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: dialog_default.a.header
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: dialog_default.a.headerText
  }, title), maybeCloseXButton), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: dialog_default.a.body
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: dialog_default.a.contents
  }, children), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: dialog_default.a.buttons
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    disabled: shouldDisableAllButtons,
    onClick: onCancel,
    priority: "low",
    type: "reset"
  }, cancelText), /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    classes: confirmButtonClasses,
    disabled: shouldDisableAllButtons || confirmButtonDisabled,
    priority: "high",
    type: "submit"
  }, confirmText)))))));
};

/* harmony default export */ var Dialog_dialog = (Dialog);
Dialog.propTypes = {
  cancelText: external_prop_types_["string"],
  classes: Object(external_prop_types_["shape"])({
    body: external_prop_types_["string"],
    cancelButton: external_prop_types_["string"],
    confirmButton: external_prop_types_["string"],
    container: external_prop_types_["string"],
    contents: external_prop_types_["string"],
    header: external_prop_types_["string"],
    headerText: external_prop_types_["string"],
    headerButton: external_prop_types_["string"],
    mask: external_prop_types_["string"],
    root: external_prop_types_["string"],
    root_open: external_prop_types_["string"]
  }),
  confirmText: external_prop_types_["string"],
  formProps: external_prop_types_["object"],
  rootContainerSelector: external_prop_types_["string"],
  isModal: external_prop_types_["bool"],
  isOpen: external_prop_types_["bool"],
  onCancel: external_prop_types_["func"],
  onConfirm: external_prop_types_["func"],
  shouldDisableAllButtons: external_prop_types_["bool"],
  shouldDisableConfirmButton: external_prop_types_["bool"],
  title: external_prop_types_["string"]
};
Dialog.defaultProps = {
  cancelText: 'Cancel',
  confirmText: 'Confirm',
  isModal: false
};
// CONCATENATED MODULE: ./src/components/Dialog/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/FormError/formError.css
var formError = __webpack_require__(77);
var formError_default = /*#__PURE__*/__webpack_require__.n(formError);

// CONCATENATED MODULE: ./src/utils/deriveErrorMessage.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/**
 * Maps an error to a string message
 *
 * @param {Error} error the error to map
 * @return {String} error message
 */
const deriveErrorMessage_toString = error => {
  const {
    graphQLErrors,
    message
  } = error;
  return graphQLErrors && graphQLErrors.length ? graphQLErrors.map(({
    message
  }) => message).join(', ') : message;
};
/**
 * A function to derive an error string from an array of errors.
 */


const deriveErrorMessage = errors => {
  const errorCollection = [];

  for (const error of errors) {
    if (error) {
      errorCollection.push(deriveErrorMessage_toString(error));
    }
  }

  return errorCollection.join(', ');
};
// CONCATENATED MODULE: ./src/components/FormError/formError.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const FormError = props => {
  const {
    classes: propClasses,
    errors,
    scrollOnError
  } = props;
  const errorMessage = deriveErrorMessage(errors);
  const errorRef = Object(external_react_["useRef"])(null);
  Object(external_react_["useEffect"])(() => {
    if (scrollOnError && errorMessage) {
      errorRef.current.scrollIntoView({
        behavior: 'smooth',
        block: 'center'
      });
    }
  }, [errorRef, scrollOnError, errorMessage]);
  const classes = mergeClasses(formError_default.a, propClasses);
  return errorMessage ? /*#__PURE__*/external_react_default.a.createElement("div", {
    className: classes.root,
    ref: errorRef
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: classes.errorMessage
  }, errorMessage)) : null;
};

/* harmony default export */ var FormError_formError = (FormError);
FormError.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"],
    errorMessage: external_prop_types_["string"]
  }),
  errors: Object(external_prop_types_["arrayOf"])(Object(external_prop_types_["instanceOf"])(Error)),
  scrollOnError: external_prop_types_["bool"]
};
FormError.defaultProps = {
  scrollOnError: true
};
// CONCATENATED MODULE: ./src/components/FormError/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/LinkButton/linkButton.css
var linkButton = __webpack_require__(78);
var linkButton_default = /*#__PURE__*/__webpack_require__.n(linkButton);

// CONCATENATED MODULE: ./src/components/LinkButton/linkButton.js
function linkButton_extends() { linkButton_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return linkButton_extends.apply(this, arguments); }

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





/**
 * A component for link buttons.
 *
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const LinkButton = props => {
  const {
    children,
    classes: propClasses,
    type,
    ...restProps
  } = props;
  const classes = mergeClasses(linkButton_default.a, propClasses);
  return /*#__PURE__*/external_react_default.a.createElement(components_Button_button, linkButton_extends({
    priority: 'normal',
    classes: {
      root_normalPriority: classes.root
    },
    type: type
  }, restProps), children);
};

LinkButton.propTypes = {
  classes: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"]
  }),
  type: Object(external_prop_types_["oneOf"])(['button', 'reset', 'submit']).isRequired
};
LinkButton.defaultProps = {
  type: 'button'
};
/* harmony default export */ var LinkButton_linkButton = (LinkButton);
// CONCATENATED MODULE: ./src/components/LinkButton/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/components/Password/usePassword.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

/* harmony default export */ var usePassword = (() => {
  const [visible, setVisbility] = Object(external_react_["useState"])(false);
  const togglePasswordVisibility = Object(external_react_["useCallback"])(() => {
    setVisbility(!visible);
  }, [visible]);
  return {
    visible,
    togglePasswordVisibility
  };
});
// EXTERNAL MODULE: ./src/components/Password/password.css
var Password_password = __webpack_require__(79);
var password_default = /*#__PURE__*/__webpack_require__.n(Password_password);

// CONCATENATED MODULE: ./src/components/Password/password.js
function password_extends() { password_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return password_extends.apply(this, arguments); }

/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/










/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const Password = props => {
  const {
    classes: propClasses,
    label,
    fieldName,
    isToggleButtonHidden,
    autoComplete,
    validate,
    ...otherProps
  } = props;
  const talonProps = usePassword();
  const {
    visible,
    togglePasswordVisibility
  } = talonProps;
  const classes = mergeClasses(password_default.a, propClasses);
  const passwordButton = !isToggleButtonHidden ? /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    className: classes.passwordButton,
    onClick: togglePasswordVisibility,
    type: "button"
  }, visible ? /*#__PURE__*/external_react_default.a.createElement(external_react_feather_["Eye"], null) : /*#__PURE__*/external_react_default.a.createElement(external_react_feather_["EyeOff"], null)) : null;
  const fieldType = visible ? 'text' : 'password';
  return /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    label: label,
    classes: {
      root: classes.root
    }
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, password_extends({
    after: passwordButton,
    autoComplete: autoComplete,
    field: fieldName,
    type: fieldType,
    validate: validate
  }, otherProps)));
};

Password.propTypes = {
  autoComplete: external_prop_types_["string"],
  classes: Object(external_prop_types_["shape"])({
    root: external_prop_types_["string"]
  }),
  label: external_prop_types_["string"],
  fieldName: external_prop_types_["string"],
  isToggleButtonHidden: external_prop_types_["bool"],
  validate: external_prop_types_["func"]
};
Password.defaultProps = {
  isToggleButtonHidden: true,
  validate: isRequired
};
/* harmony default export */ var components_Password_password = (Password);
// CONCATENATED MODULE: ./src/components/Password/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// EXTERNAL MODULE: ./src/components/AccountDetails/editForm.css
var editForm = __webpack_require__(16);
var editForm_default = /*#__PURE__*/__webpack_require__.n(editForm);

// CONCATENATED MODULE: ./src/components/AccountDetails/editForm.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/











/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const EditForm = props => {
  const {
    shouldShowNewPassword,
    handleShowNewPasswordField
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  const maybeShowChangePasswordButton = !shouldShowNewPassword && /*#__PURE__*/external_react_default.a.createElement("div", {
    className: editForm_default.a.changePasswordButtonContainer
  }, /*#__PURE__*/external_react_default.a.createElement(LinkButton_linkButton, {
    type: "button",
    classes: {
      root: editForm_default.a.changePasswordButton
    },
    onClick: handleShowNewPasswordField
  }, intl.formatMessage({
    id: "account:change-password",
    defaultMessage: [{
      "type": 0,
      "value": "Change Password"
    }]
  })));
  const maybeShowNewPasswordField = shouldShowNewPassword ? /*#__PURE__*/external_react_default.a.createElement("div", {
    className: editForm_default.a.newPassword
  }, /*#__PURE__*/external_react_default.a.createElement(components_Password_password, {
    fieldName: "newPassword",
    label: intl.formatMessage({
      id: "account:new-password",
      defaultMessage: [{
        "type": 0,
        "value": "New Password"
      }]
    }),
    validate: combineValidators([isRequired, [hasLengthAtLeast, 8], validatePassword, [isNotEqualToField, 'password']]),
    isToggleButtonHidden: false
  })) : null;
  const passwordLabel = shouldShowNewPassword ? intl.formatMessage({
    id: "account:current-password",
    defaultMessage: [{
      "type": 0,
      "value": "Current Password"
    }]
  }) : intl.formatMessage({
    id: "account:password",
    defaultMessage: [{
      "type": 0,
      "value": "Password"
    }]
  });
  const formState = Object(external_informed_["useFormState"])();
  const formApi = Object(external_informed_["useFormApi"])();
  const {
    submits,
    invalid
  } = formState;
  Object(external_react_["useEffect"])(() => {
    if (!invalid) {
      // clear the password field on a successful submit
      formApi.setValue('password', '');
    }
  }, [submits, invalid]);
  return /*#__PURE__*/external_react_default.a.createElement(external_react_["Fragment"], null, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: editForm_default.a.root
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: editForm_default.a.firstname
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    id: "firstname",
    label: intl.formatMessage({
      id: "account:firstname",
      defaultMessage: [{
        "type": 0,
        "value": "First Name"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "firstname",
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: editForm_default.a.lastname
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    id: "lastname",
    label: intl.formatMessage({
      id: "account:lastname",
      defaultMessage: [{
        "type": 0,
        "value": "Last Name"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "lastname",
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: editForm_default.a.email
  }, /*#__PURE__*/external_react_default.a.createElement(Field_field, {
    id: "email",
    label: intl.formatMessage({
      id: "account:email",
      defaultMessage: [{
        "type": 0,
        "value": "Email address"
      }]
    })
  }, /*#__PURE__*/external_react_default.a.createElement(TextInput_textInput, {
    field: "email",
    validate: isRequired
  }))), /*#__PURE__*/external_react_default.a.createElement("div", {
    className: editForm_default.a.password
  }, /*#__PURE__*/external_react_default.a.createElement(components_Password_password, {
    fieldName: "password",
    label: passwordLabel,
    validate: isRequired,
    autoComplete: "current-password",
    isToggleButtonHidden: false
  })), maybeShowChangePasswordButton), maybeShowNewPasswordField);
};

/* harmony default export */ var AccountDetails_editForm = (EditForm);
EditForm.propTypes = {
  shouldShowNewPassword: external_prop_types_["bool"],
  handleShowNewPasswordField: external_prop_types_["func"]
};
// CONCATENATED MODULE: ./src/components/AccountDetails/editModal.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/







/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const EditModal = props => {
  const {
    initialValues,
    isOpen,
    onCancel,
    onSubmit,
    isDisabled,
    onChangePassword,
    shouldShowNewPassword,
    formErrors
  } = props;
  const intl = Object(external_react_intl_["useIntl"])();
  const {
    mountingPoints: {
      accountDetails: rootSelector
    }
  } = useConfigContext();
  const dialogFormProps = {
    initialValues
  };
  return /*#__PURE__*/external_react_default.a.createElement(Dialog_dialog, {
    confirmText: "Save",
    formProps: dialogFormProps,
    isOpen: isOpen,
    onCancel: onCancel,
    onConfirm: onSubmit,
    shouldDisableAllButtons: isDisabled,
    shouldDisableConfirmButton: isDisabled,
    title: intl.formatMessage({
      id: "account:edit-account-info",
      defaultMessage: [{
        "type": 0,
        "value": "Edit account information"
      }]
    }),
    rootContainerSelector: rootSelector,
    isModal: true
  }, /*#__PURE__*/external_react_default.a.createElement(FormError_formError, {
    errors: formErrors
  }), /*#__PURE__*/external_react_default.a.createElement(AccountDetails_editForm, {
    handleShowNewPasswordField: onChangePassword,
    shouldShowNewPassword: shouldShowNewPassword
  }));
};

/* harmony default export */ var editModal = (EditModal);
EditModal.propTypes = {
  initialValues: external_prop_types_["object"].isRequired,
  isOpen: external_prop_types_["bool"],
  onCancel: external_prop_types_["func"].isRequired,
  onSubmit: external_prop_types_["func"].isRequired,
  isDisabled: external_prop_types_["bool"],
  onChangePassword: external_prop_types_["func"].isRequired,
  shouldShowNewPassword: external_prop_types_["bool"],
  formErrors: external_prop_types_["array"]
};
// CONCATENATED MODULE: ./src/components/AccountDetails/accountDetails.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/










/**
 * @deprecated replace with peregrine backed component, will be removed with CIF 3.0 latest
 */

const AccountDetails = () => {
  const {
    initialValues,
    isSignedIn,
    isUpdateMode,
    showEditForm,
    handleCancel,
    shouldShowNewPasswordField,
    handleShowNewPasswordField,
    handleSubmit,
    isDisabled,
    formErrors
  } = AccountDetails_useAccountDetails({
    getCustomerInformationQuery: query_get_customer_information_graphql,
    setCustomerInformationMutation: mutation_update_customer_information_graphql,
    changeCustomerPasswordMutation: mutation_change_password_graphql
  });
  const intl = Object(external_react_intl_["useIntl"])();

  if (!isSignedIn) {
    return /*#__PURE__*/external_react_default.a.createElement("div", {
      className: accountDetails_default.a.messageText
    }, intl.formatMessage({
      id: "account:account-details-sign-in-text",
      defaultMessage: [{
        "type": 0,
        "value": "Please sign in to see the account details."
      }]
    }));
  }

  if (!initialValues) {
    return /*#__PURE__*/external_react_default.a.createElement(LoadingIndicator_indicator, null);
  }

  const {
    customer
  } = initialValues;
  return /*#__PURE__*/external_react_default.a.createElement("div", {
    className: accountDetails_default.a.accountDetails
  }, /*#__PURE__*/external_react_default.a.createElement("div", {
    className: accountDetails_default.a.lineItems
  }, /*#__PURE__*/external_react_default.a.createElement("span", {
    className: accountDetails_default.a.lineItemLabel
  }, intl.formatMessage({
    id: "account:name",
    defaultMessage: [{
      "type": 0,
      "value": "Name"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: accountDetails_default.a.lineItemValue,
    "aria-label": "name"
  }, `${customer.firstname} ${customer.lastname}`), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: accountDetails_default.a.lineItemLabel
  }, intl.formatMessage({
    id: "account:email",
    defaultMessage: [{
      "type": 0,
      "value": "Email address"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: accountDetails_default.a.lineItemValue,
    "aria-label": "email"
  }, customer.email), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: accountDetails_default.a.lineItemLabel
  }, intl.formatMessage({
    id: "account:password",
    defaultMessage: [{
      "type": 0,
      "value": "Password"
    }]
  })), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: accountDetails_default.a.lineItemValue,
    "aria-label": "password"
  }, `*******`), /*#__PURE__*/external_react_default.a.createElement("span", {
    className: accountDetails_default.a.lineItemButton
  }, /*#__PURE__*/external_react_default.a.createElement(components_Button_button, {
    className: accountDetails_default.a.editInformationButton,
    onClick: showEditForm
  }, intl.formatMessage({
    id: "common",
    defaultMessage: [{
      "type": 0,
      "value": "Edit"
    }]
  })))), /*#__PURE__*/external_react_default.a.createElement(editModal, {
    formErrors: formErrors,
    initialValues: { ...customer
    },
    isDisabled: isDisabled,
    isOpen: isUpdateMode,
    onCancel: handleCancel,
    onChangePassword: handleShowNewPasswordField,
    onSubmit: handleSubmit,
    shouldShowNewPassword: shouldShowNewPasswordField
  }));
};

/* harmony default export */ var AccountDetails_accountDetails = (AccountDetails);
// CONCATENATED MODULE: ./src/components/AccountDetails/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2020 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/utils/createProductPageUrl.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
const createProductPageUrl = sku => {
  const url = new URL(window.location); // Provided by StoreConfigExporter

  let storeConfigEl = document.querySelector('meta[name="store-config"]');
  let storeRootUrl;

  if (storeConfigEl) {
    storeRootUrl = JSON.parse(storeConfigEl.content).storeRootUrl;
  } else {
    // TODO: deprecated - the store configuration on the <body> has been deprecated and will be removed
    storeRootUrl = document.body.dataset.storeRootUrl;
  }

  if (!storeRootUrl) {
    return null;
  }

  const path = storeRootUrl.substr(0, storeRootUrl.lastIndexOf('.'));
  url.pathname = `${path}.cifproductredirect.html/${sku}`;
  return url.toString();
};
// EXTERNAL MODULE: external "@magento/peregrine/lib/util/shallowMerge"
var shallowMerge_ = __webpack_require__(32);
var shallowMerge_default = /*#__PURE__*/__webpack_require__.n(shallowMerge_);

// EXTERNAL MODULE: external "@magento/peregrine/lib/context/cart"
var cart_ = __webpack_require__(80);

// CONCATENATED MODULE: ./src/queries/mutation_add_items_to_cart.graphql.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


/* harmony default export */ var mutation_add_items_to_cart_graphql = (client_["gql"]`
    mutation($cartId: String!, $cartItems: [CartItemInput!]!) {
        addProductsToCart(cartId: $cartId, cartItems: $cartItems) {
            cart {
                id
                items {
                    uid
                    quantity
                    product {
                        sku
                        name
                        thumbnail {
                            url
                        }
                    }
                }
                ...MiniCartFragment
            }
        }
    }
    ${miniCartFragments_gql_["MiniCartFragment"]}
`);
// CONCATENATED MODULE: ./src/talons/Cart/useAddToCart.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/









const defaultOperations = {
  addProductsToCartMutation: mutation_add_items_to_cart_graphql,
  addPhysicalProductItemsMutation: mutation_add_to_cart_graphql,
  addBundledProductItemsMutation: mutation_add_bundle_to_cart_graphql,
  addVirtualProductItemsMutation: mutation_add_virtual_to_cart_graphql,
  addGiftCardProductItemsMutation: mutation_add_items_to_cart_graphql,
  addPhysicalAndVirtualProductItemsMutation: mutation_add_simple_and_virtual_to_cart_graphql
};

const useAddToCart = (props = {}) => {
  const operations = shallowMerge_default()(defaultOperations, props.operations || {});
  const [addProductsToCart] = Object(client_["useMutation"])(operations.addProductsToCartMutation);
  const [addPhysicalProductItems] = Object(client_["useMutation"])(operations.addPhysicalProductItemsMutation);
  const [addBundledProductItems] = Object(client_["useMutation"])(operations.addBundledProductItemsMutation);
  const [addVirtualProductItems] = Object(client_["useMutation"])(operations.addVirtualProductItemsMutation);
  const [addGiftCardProductItems] = Object(client_["useMutation"])(operations.addGiftCardProductItemsMutation);
  const [addPhysicalAndVirtualProductItems] = Object(client_["useMutation"])(operations.addPhysicalAndVirtualProductItemsMutation);
  const [{
    cartId
  }] = Object(cart_["useCartContext"])();
  return [// data
  {
    cartId
  }, // api
  {
    addProductsToCart: Object(external_react_["useCallback"])(async cartItems => {
      await addProductsToCart({
        variables: {
          cartId,
          cartItems
        }
      });
    }, [cartId]),
    addPhysicalProductItems: Object(external_react_["useCallback"])(async cartItems => {
      await addPhysicalProductItems({
        variables: {
          cartId,
          cartItems
        }
      });
    }, [cartId]),
    addBundledProductItems: Object(external_react_["useCallback"])(async cartItems => {
      await addBundledProductItems({
        variables: {
          cartId,
          cartItems
        }
      });
    }, [cartId]),
    addVirtualProductItems: Object(external_react_["useCallback"])(async cartItems => {
      await addVirtualProductItems({
        variables: {
          cartId,
          cartItems
        }
      });
    }, [cartId]),
    addGiftCardProductItems: Object(external_react_["useCallback"])(async cartItems => {
      await addGiftCardProductItems({
        variables: {
          cartId,
          cartItems
        }
      });
    }, [cartId]),
    addPhysicalAndVirtualProductItems: Object(external_react_["useCallback"])(async (simpleCartItems, virtualCartItems) => {
      await addPhysicalAndVirtualProductItems({
        variables: {
          cartId,
          simpleCartItems,
          virtualCartItems
        }
      });
    }, [cartId])
  }];
};

/* harmony default export */ var Cart_useAddToCart = (useAddToCart);
// CONCATENATED MODULE: ./src/talons/Cart/useAddToCartEvent.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/



const useAddToCartEvent_productMapper = item => ({
  data: {
    sku: item.sku,
    quantity: parseFloat(item.quantity)
  }
});

const useAddToCartEvent_bundledProductMapper = item => ({ ...useAddToCartEvent_productMapper(item),
  bundle_options: item.options
});

const giftCardProductMapper = item => ({ ...useAddToCartEvent_productMapper(item).data,
  entered_options: item.entered_options,
  selected_options: item.selected_options
});

const useAddToCartEvent = (props = {}) => {
  const {
    fallbackHandler
  } = props;
  const [{
    cartId
  }, defaultAddToCartApi] = Cart_useAddToCart();
  const {
    addToCartApi = defaultAddToCartApi
  } = props; // eslint-disable-next-line react-hooks/rules-of-hooks

  const mse = typeof props.mse !== 'undefined' ? props.mse : useStorefrontEvents();
  useEventListener(document, 'aem.cif.add-to-cart', async event => {
    const items = typeof event.detail === 'string' ? JSON.parse(event.detail) : event.detail; // Since the hook is backwards compatible, we need to determine which items can be added to cart with the latest mutation and map the properties to match the mutation input

    const useUidItems = items.filter(item => item.useUid).map(item => ({
      sku: item.parentSku,
      quantity: parseFloat(item.quantity),
      entered_options: item.entered_options,
      selected_options: item.selected_options
    }));
    const nonUidItems = items.filter(item => !item.useUid);
    const physicalCartItems = nonUidItems.filter(item => !item.virtual).map(useAddToCartEvent_productMapper);
    const virtualCartItems = nonUidItems.filter(item => item.virtual).map(useAddToCartEvent_productMapper);
    const bundleCartItems = nonUidItems.filter(item => item.bundle).map(useAddToCartEvent_bundledProductMapper);
    const giftCardCartItems = nonUidItems.filter(item => item.giftCard).map(giftCardProductMapper);

    if (useUidItems.length > 0) {
      await addToCartApi.addProductsToCart(useUidItems);
    }

    if (bundleCartItems.length > 0) {
      await addToCartApi.addBundledProductItems(bundleCartItems);
    } else if (giftCardCartItems.length > 0) {
      await addToCartApi.addGiftCardProductItems(giftCardCartItems);
    } else if (virtualCartItems.length > 0 && physicalCartItems.length > 0) {
      await addToCartApi.addPhysicalAndVirtualProductItems(physicalCartItems, virtualCartItems);
    } else if (virtualCartItems.length > 0) {
      await addToCartApi.addVirtualProductItems(virtualCartItems);
    } else if (physicalCartItems.length > 0) {
      await addToCartApi.addPhysicalProductItems(physicalCartItems);
    } else if (fallbackHandler) {
      await fallbackHandler(event);
    }

    if (mse) {
      const cartItemContext = {
        id: cartId,
        prices: {
          subtotalExcludingTax: {
            value: 0,
            currency: ''
          }
        },
        items: [],
        possibleOnepageCheckout: false,
        giftMessageSelected: false,
        giftWrappingSelected: false
      };
      items.forEach(item => {
        const {
          storefrontData
        } = item;
        const {
          sku,
          parentSku,
          quantity
        } = item;

        if (!storefrontData || !quantity || !sku && !parentSku) {
          // make sure that all places that do add to cart provide the data
          // otherwise the integration will not work correctly
          return;
        }

        const regularPrice = storefrontData.regularPrice || 0;
        const specialPrice = storefrontData.finalPrice || 0;
        const currency = storefrontData.currencyCode || '';
        const name = storefrontData.name || sku;
        const options = storefrontData.selectedOptions || [];
        cartItemContext.items.push({
          quantity,
          product: {
            name,
            sku: parentSku || sku,
            pricing: {
              regularPrice,
              specialPrice
            }
          },
          prices: {
            price: {
              value: specialPrice,
              currency
            }
          },
          configurableOptions: options.map(o => ({
            optionLabel: o.attribute,
            valueLabel: o.value
          }))
        });
        cartItemContext.prices.subtotalExcludingTax.value += specialPrice * quantity;
        cartItemContext.prices.subtotalExcludingTax.currency = currency;
      });
      mse.context.setShoppingCart(cartItemContext);
      mse.publish.addToCart();
    }
  });
};

/* harmony default export */ var Cart_useAddToCartEvent = (useAddToCartEvent);
// CONCATENATED MODULE: ./src/talons/Cart/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


// EXTERNAL MODULE: external "@magento/peregrine/lib/talons/Wishlist/AddToListButton/addToListButton.gql"
var addToListButton_gql_ = __webpack_require__(81);
var addToListButton_gql_default = /*#__PURE__*/__webpack_require__.n(addToListButton_gql_);

// CONCATENATED MODULE: ./src/talons/Wishlist/useAddToWishlistEvent.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/





const useAddToWishlistEvent_productMapper = item => {
  const result = {
    sku: item.sku,
    quantity: item.quantity
  };

  if (item.parent_sku) {
    result.parent_sku = item.parent_sku;
  }

  return result;
};

const useAddToWishlistEvent = (props = {}) => {
  const operations = shallowMerge_default()(addToListButton_gql_default.a, props.operations);
  const [addProductToWishlist] = Object(client_["useMutation"])(operations.addProductToWishlistMutation);
  useEventListener(document, 'aem.cif.add-to-wishlist', async event => {
    const items = typeof event.detail === 'string' ? JSON.parse(event.detail) : event.detail;
    const promises = items.map(item => addProductToWishlist({
      variables: {
        wishlistId: '0',
        itemOptions: useAddToWishlistEvent_productMapper(item)
      }
    }));
    let responseEvent;

    try {
      // Wait for all items to be added to the wishlist
      await Promise.all(promises);
      responseEvent = new CustomEvent('aem.cif.add-to-wishlist.success', {
        detail: {
          items
        }
      });
    } catch (error) {
      responseEvent = new CustomEvent('aem.cif.add-to-wishlist.error', {
        detail: {
          error,
          items
        }
      });
    }

    document.dispatchEvent(responseEvent);
  });
};

/* harmony default export */ var Wishlist_useAddToWishlistEvent = (useAddToWishlistEvent);
// CONCATENATED MODULE: ./src/talons/Wishlist/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2021 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/

// CONCATENATED MODULE: ./src/index.js
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 ~ Copyright 2019 Adobe
 ~
 ~ Licensed under the Apache License, Version 2.0 (the "License");
 ~ you may not use this file except in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~     http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing, software
 ~ distributed under the License is distributed on an "AS IS" BASIS,
 ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 ~ See the License for the specific language governing permissions and
 ~ limitations under the License.
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/


























 // new since CIF-1440

 // new since CIF-2539

 // new since CIF-2826



 // new since CIF-2865



/***/ })
/******/ ]);
});
//# sourceMappingURL=index.js.map